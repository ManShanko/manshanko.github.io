<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=0">
        <title>Vermintools</title>
        <link rel="stylesheet" href="format.css?107">
        <script src="frontend.js?107"></script>
        <script src="data.js?107" onload="verminted.finished_loading = true;" defer></script>
    </head>
    <body>
        <div style="display: none">
            <defs>
                <svg id="svg-attack-speed">
                    <svg>
                        <rect width="24" height="24" fill="rgb(0,255,0)" stroke-width="3" stroke="rgb(60,0,0)"/>
                    </svg>
                </svg>
            </defs>
        </div>
        <div class="tooltip" style="display: none">
            <p class="tooltip-text"></p>
        </div>
        <div class="modal-container hide">
            <div class="modal-wrapper">
                <div class="build-modal modal">
                    <div class="career-and-gear">
                        <div class="copy-build js-button">Copy build</div>
                        <select class="select-career js-input">
                            <option selected disabled hidden>Career</option>
                        </select>
                        <div class="item-container">
                        </div>
                    </div>
                    <div class="talent-tree"></div>
                    <div class="buff-container"></div>
                    <div class="build-modal-close">Close</div>
                </div>
            </div>
        </div>
        <div class="modal-container hide">
            <div class="modal-wrapper">
                <div class="chain-options-modal modal">
                    <div class="chain-options-dps">
                        <div class="headshot-percent">
                            Headshot %
                            <div>
                                <input class="select-headshot-percent js-input" type="number" step="1" min="0" max="100" value="0">
                            </div>
                        </div>
                    </div>
                    <div class="chain-attack-options"></div>
                    <div class="chain-options-modal-close">Close</div>
                </div>
            </div>
        </div>
        <div class="weapon-list-holder hide">
            <div class="weapon-list-container">
                <div class="weapon-list">
                </div>
            </div>
        </div>
        <div id="SPA">
            <div class="build-button-sticky">
                <div class="build-button js-button">Build</div>
            </div>
            <div class="header">
                <div class="select-page js-button" data-slot="attack-page">Attack Combo</div>
                <div class="select-page js-button" data-slot="weapon-page">Weapon Stats</div>
                <div class="select-page js-button" data-slot="resource-page">Resources</div>
                <input class="input-power-level js-input" type="number" step="1" min="15" max="600">
                <select class="select-difficulty js-input"></select>
                <input class="toggle-hbfs" type="checkbox">
                <select class="select-platform js-input">
                    <option value="pc" selected>PC</option>
                    <option value="console">Console</option>
                </select>
                <input class="select-file hide" type="file">
                <div class="build-number">107-31/5/2019</div>
            </div>
            <div class="header-dummy"></div>
            <div class="sidebar">
                <div class="build-button-wrapper">
                    <div class="build-button js-button">Build</div>
                </div>
                <div class="chain-attack-container">
                    <div class="chain-attack-header js-button">
                        Chain Options
                        <!--
                            Headshot %
                            <input class="select-headshot-percent js-input" type="number" step="1" min="0" max="100" value="0">
                        -->
                    </div>
                </div>
                <div class="community-link">
                    Follow updates at the <a href="https://discord.gg/jrXeGXP">Discord</a>
                </div>
            </div>
            <div class="main-page-display">
                <div class="attack-page main-page">
                    <div class="attack-plate">
                        <div class="attack-combo">
                            <div class="attack-combo-title js-button">
                                Attack Combo
                            </div>
                        </div>
                        <div class="weapon-breakpoints-container hide">
                            <div class="weapon-name js-button"></div>
                            <div class="weapon-breakpoints-attacks"></div>
                            <div class="weapon-breakpoints hide"></div>
                        </div>
                        <div class="weapon-breakpoints-container hide">
                            <div class="weapon-name js-button"></div>
                            <div class="weapon-breakpoints-attacks"></div>
                            <div class="weapon-breakpoints hide"></div>
                        </div>
                    </div>
                </div>
                <div class="weapon-page main-page hide">
                    <div class="weapon-plate">
                        <div class="weapon-attacks" data-weapon-slot="0">
                            <div class="weapon-title">
                                Weapon 1
                            </div>
                            <div class="attacks-container">
                                <div class="attack hide">
                                    <div class="attack-header">
                                        <div class="weapon-attack-name">Tester</div>
                                        <div class="attack-speed">
                                            <div class="svg-attack-speed">
                                                <svg width="24" height="24">
                                                    <use xlink:href="#svg-attack-speed" href="#svg-attack-speed"></use>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="attack-modifiers"></div>
                                    <div class="damage-table">
                                        <div class="infantry neither">
                                            NA
                                        </div>
                                        <div class="infantry headshot">
                                            NA
                                        </div>
                                        <div class="infantry critical">
                                            NA
                                        </div>
                                        <div class="infantry both">
                                            NA
                                        </div>
                                        <div class="armored neither">
                                            NA
                                        </div>
                                        <div class="armored headshot">
                                            NA
                                        </div>
                                        <div class="armored critical">
                                            NA
                                        </div>
                                        <div class="armored both">
                                            NA
                                        </div>
                                        <div class="monster neither">
                                            NA
                                        </div>
                                        <div class="monster headshot">
                                            NA
                                        </div>
                                        <div class="monster critical">
                                            NA
                                        </div>
                                        <div class="monster both">
                                            NA
                                        </div>
                                        <div class="berserker neither">
                                            NA
                                        </div>
                                        <div class="berserker headshot">
                                            NA
                                        </div>
                                        <div class="berserker critical">
                                            NA
                                        </div>
                                        <div class="berserker both">
                                            NA
                                        </div>
                                        <div class="superarmored neither">
                                            NA
                                        </div>
                                        <div class="superarmored headshot">
                                            NA
                                        </div>
                                        <div class="superarmored critical">
                                            NA
                                        </div>
                                        <div class="superarmored both">
                                            NA
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="weapon-attacks" data-weapon-slot="1">
                            <div class="weapon-title">
                                Weapon 2
                            </div>
                            <div class="attacks-container">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resource-page main-page hide">
                    <div class="resource-tab glossary-tab">
                        <div class="resource-title-wrapper">
                            <div class="resource-title js-button">
                                Glossary
                            </div>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Breakpoint
                            </div>
                            <div class="breakpoint-examples resource-example">
                                <div class="infantry neither" title="Normal hit with 1h_axe against a fanatic">
                                    2 (2%)
                                </div>
                                <div class="infantry headshot" title="headshot with 1h_axe against a fanatic">
                                    1
                                </div>
                                <div class="infantry critical" title="critcal hit with 1h_axe against a fanatic">
                                    1
                                </div>
                                <div class="infantry both" title="critical headshot with 1h_axe against a fanatic">
                                    1
                                </div>
                            </div>
                            <p>
                                Breakpoint (BP) is the power needed to lower the amount of hits necessary to kill the target.
                            </p>
                            <p>
                                For example, 1h_axe takes 2 hits to kill a fanatic on Legend. With 2% power vs fanatics the amount of hits needed is lowered to only 1, effectively doubling fanatic killspeed for non headshots/critcals.
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Combo Speed
                            </div>
                            <div class="combo-speed-examples resource-example">
                                <p style="color: red;">
                                    0
                                </p>
                                <p>
                                    2.02s
                                </p>
                            </div>
                            <p>
                                Combo speed is the estimated time it takes to complete the combo. Red means the combo is "incomplete".
                            </p>
                            <p>
                                A combo is complete when it "wraps". To wrap a combo it must end in an action that can be chained into the first action in the combo. Doing a full light/heavy attack rotation, having the last action be anim_cancel/block, or having the last action performed with a different weapon than the first action will wrap the combo.
                            </p>
                            <p>
                                Combo speed (and DPS by extension too) is only an estimate. In practice the actual values will be worse due to unmeasureable mechanics.
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                DPS
                            </div>
                            <div class="combo-damage-box resource-example">
                                <div class="infantry" title="1h_axe dps against infantry">28.2</div>
                                <div class="armored" title="1h_axe dps against armored">15.1</div>
                                <div class="monster" title="1h_axe dps against monster">57.6</div>
                                <div class="berserker" title="1h_axe dps against berserker">18.1</div>
                                <div class="superarmored" title="1h_axe dps against superarmored">14.2</div>
                            </div>
                            <p>
                                DPS is the estimated sustained single target damage done against that armor type.
                            </p>
                            <p>
                                Headshots and criticals are used to calculate DPS. To modify headshot hit percentage open the "Chain Options" menu with the button located underneath the "Build" button.
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Copy Build
                            </div>
                            <div class="copy-build js-button copy-build-examples resource-example">
                                Copy Build
                            </div>
                            <p>
                                Copy Build converts a valid build into a URL that can be shared with others.
                            </p>
                            <p>
                                It attempts to copy the full URL into the clipboard. In case this isn't supported by your browser the code is automatically selected for ease of copying. Just share the link copied or the website link with the code appended.
                            </p>
                        </div>
                        <div class="hit-type-examples resource-item">
                            <div class="resource-item-title">
                                Hit Types
                            </div>
                            <p>
                                In Vermintools hit types are separated into 4 types:
                            </p>
                            <b>
                                1. neither
                            </b>
                            <p class="indent-1">
                                It is a <span class="normal-hit">normal hit</span> to the <span class="normal-hit">body</span>.
                            </p>
                            <b>
                                2. headshot
                            </b>
                            <p class="indent-1">
                                It is a <span class="normal-hit">normal hit</span> to the <span class="headshot-hit">head</span>.
                            </p>
                            <b>
                                3. critical
                            </b>
                            <p class="indent-1">
                                It is a <span class="critical-hit">critical hit</span> to the <span class="normal-hit">body</span>.
                            </p>
                            <b>
                                4. both
                            </b>
                            <p class="indent-1">
                                It is a <span class="critical-hit">critical hit</span> to the <span class="headshot-hit">head</span>.
                            </p>
                        </div>
                    </div>
                    <div class="resource-tab mechanics-tab">
                        <div class="resource-title-wrapper">
                            <div class="resource-title js-button">
                                Mechanics
                            </div>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Power Level
                            </div>
                            <p>
                                Power level is your character's hero power + 185. The lowest and highest power level is 200 and 785 respectively.
                            </p>
                            <p>
                                Attack power, stagger power and cleave power are all calculated using a function that takes power level and returns a non-linear value. If hero power was increase from 15 to 215 and consequently doubled power level from 200 to 400 it would only increase the value by ~41%. For attack power the lowest is 231.25 at 200 power level (15 hero power) and the highest is 565.625 at 785 power level (600 hero power). This means that, ignoring Recruit and Veteran difficulties which have a power level soft cap, going from 15 hero power to 600 hero power is a damage increase of ~145%.
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Breakpoints
                            </div>
                            <p>
                                Damage in Vermintide 2 is rounded to the nearest quarter of an integer (i.e. 10.2 would round to 10.25 and 10.1 would round to 10).
                            </p>
                            <p>
                                Vermintools takes the rounding into account when calculating breakpoints. For example, a 1h axe light attack deals ~9.2 raw damage which rounds to 9.25 damage. Against a stormvermin (39 hp) it'd take 1h axe 5 hits (39 hp / 9.25 damage = 5 hits). To reach the next breakpoint (5 hits -> 4 hits) it would need ~4.8% power vs stormvermin to increase the raw damage to ~9.625 which rounds to 9.75 (39 hp / 9.75 damage = 4 hits).
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Cleave
                            </div>
                            <p>
                                An attacks cleave is largely controlled by 3 factors. That attack's hit mass profile, power level, and the cleave coefficient in the damage profile used.
                            </p>
                            <p>
                                When an attack starts a swing the cleave value is calculated. When a mob is hit the mob's hit mass is removed from the cleave value. Once the cleave value reachs 0 the attack stops cleaving. For example, the attack has a cleave value of 10 and hits a mob with a hit mass of 9 its cleave value would be reduced to 1 allowing it to hit one more mob. If the attack has a hit mass profile that reduces that mob's hit mass by 0.5 then the mob's effective hit mass to that attack would be 4.5 (9 * 0.5 = 4.5) meaning that that attack could hit 3 of those mobs in one swing as opposed to 2.
                            </p>
                            <p>
                                Damage profiles can have different damage scaling and armor multipliers for each target hit (i.e. first target hit, second target hit, third target hit) in an attack. While some attacks can't cleave two stormvermin, it could be possible to hit a slave rat and then a stormvermin. Although since the stormvermin is the second target hit the attack it would typically deal less damage than if the stormvermin was the first target.
                            </p>
                            <p>
                                Damage profiles have up to 4 target overrides and a default_target defined. That means no damage profile has more than 5 unique damage values. Because of this there is only up to 5 breakpoint rows with all excess targets simplified to "+X". Any excess targets will use the same breakpoint as the 5th target.
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Damage Calculation (power vs)
                            </div>
                            <p>
                                All damage is calculated in JavaScript using functions based on Vermintide 2's Lua damage functions.
                            </p>
                            <p>
                                This includes the difficulty softcap for power level, headshot damage boosts, critical power boosts, and strength potion. All different types of power vs are multiplied against each other. The order can be simplified as such:
                            </p>
                            <br>
                            <p class="indent-1">
                                raw damage * (1 + (power vs armor type)) * (1 + (power vs race)) * (1 + (power melee/ranged)) * (1 + (power)) * (1 + (damage taken debuff))
                            </p>
                            <br>
                            <p>
                                For example, a 1h_axe normal light attack as ranger veteran with 10% power vs armored, 20% power vs skaven, increased melee damage on no ammo (25% generic power) and 5 stacks of barrage (25% generic power), and shrapnel active (20%) against a stormvermin would do:
                            </p>
                            <p class="indent-1 math">
                               ~9.2 * (1 + (.1)) * (1 + (.2)) * (1 + (.25 + .25)) * (1 + (.2))
                            </p>
                            <p class="math">
                                = ~9.2 * (1.1) * (1.2) * (1.50) * (1.2)
                            </p>
                            <p class="math">
                                = ~9.2 * 2.376
                            </p>
                            <p class="math">
                                = ~21.86 which rounds to 21.75 damage
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Damage Calculation (headshot/critical boosts)
                            </div>
                            <p>
                                Headshot boost and critical power boost modifiers interact with damage differently than power vs modifiers.
                            </p>
                            <p>
                                Each damage profile for an attack has a boost curve that defines a beizer curve. The boost curve's Y cordinate functions as the multiplier for the extra damage from headshots and/or criticals. The Y position is normally a range from 0 to 1 unless a boost curve multiplier defined in the damage profile overrides the maximum value. The X position is a range from 0 to 1. Headshots and criticals each add 0.5 to X. If the target is superarmored or a monster than headshots only add 0.25 to X.
                            </p>
                            <br>
                            <p>
                                Headshot boosts from Witch Hunter Captain (passive 25% and 50% from talent) and from Wayfarer (50% from talent) modify the X position bonus for the beizer curve from headshotting. However, headshot criticals already max the X value at 1 (0.5 + 0.5) so unless the target is monster or supearmored (0.25 + 0.5) headshot boost has no effect on headshot criticals.
                            </p>
                            <br>
                            <p>
                                Critical power boost increases the extra damage calculated from the boost curve. This includes all of the extra damage from headshot criticals.
                            </p>
                            <p>
                                For example, an attack deals 40 damage on a normal hit and 80 damage on a critical hit.
                            </p>
                            <p class="indent-1 math">
                                80 - 40
                            </p>
                            <p class="math">
                                = <span style="color:#FFF;">40</span>
                            </p>
                            <p></p>
                            <p class="indent-1 math">
                                40 + (<span style="color:#FFF;">40</span> * 1.2)
                            </p>
                            <p class="math">
                                = 40 + 48
                            </p>
                            <p class="math">
                                = 88
                            </p>
                            <p>
                                While this works for most damage profiles, some actually have a different armor multiplier for the raw damage on a critical hit vs a normal hit that is independant of the extra damage from critical hits. If we take our existing example and increase the critical armor multiplier over the base armor multiplier by 50% we'd get 40 damage on a normal hit and 120 damage on a critical hit. Since the raw damage is actually 50% higher on a crit this would be the correct way to calculate the extra damage.
                            </p>
                            <p class="indent-1 math">
                                60 + (60 * 1.2)
                            </p>
                            <p class="math">
                                = 60 + 72
                            </p>
                            <p class="math">
                                = 132
                            </p>
                            <p>
                                If we just tried to subtract the base damage from the critical damage to get the extra damage and multiply that by the critical power boost amount we would get incorrect values if the damage profile has a different critical armor multiplier than base armor multiplier.
                            </p>
                            <p class="indent-1 math">
                                120 - 40
                            </p>
                            <p class="math">
                                = <span style="color:#FFF;">80</span>
                            </p>
                            <p></p>
                            <p class="indent-1 math">
                                40 + (<span style="color:#FFF;">80</span> * 1.2)
                            </p>
                            <p class="math">
                                = 40 + 96
                            </p>
                            <p class="math">
                                = 136
                            </p>
                            <p class="math">
                                <span style="color:#E00;">!</span>= 132
                            </p>
                            <p>
                                This makes it difficult to calculate damage with critical power boost unless we had access to the damage profile used.
                            </p>
                        </div>
                        <div class="resource-item">
                            <div class="resource-item-title">
                                Attack Speed
                            </div>
                            <p>
                                Vermintools compiles the attack speed directly from Vermintide 2. While it can simulate most ingame attack speed, a few outliers (hagbane finger roll) aren't supported at this time.
                            </p>
                            <p>
                                Attacks that have 0 wait time for block/animation cancel are handled by assuming that the attack would be interrupted halfway through the damage window. For example, axe and falchion L1 -> animation cancel has the highest base melee DPS but the animation cancel window starts before the damage window starts. This means that while it is possible to attack that fast, brute forcing animation cancel with a macro wouldn't work with it due to interrupting the attack before the damage window starts and thus dealing no damage.
                            </p>
                            <p>
                                Combos ending with a animation cancel are hard coded to add a flat .05s (3 frames for 60hz) to the combo speed to simulate the delay from QQ cancel. This can be partially circumvented by repeating the combo multiple times or completely circumvented by ending the combo with a different weapon's action.
                            </p>
                        </div>
                    </div>
                    <div class="resource-tab external-resources-tab">
                        <div class="resource-title-wrapper">
                            <div class="resource-title js-button">
                                External Resources
                            </div>
                        </div>
                        <div class="resource-item">
                            <a href="https://www.reddit.com/r/Vermintide/comments/90qola/a_list_of_everything_you_wish_fatshark_told_you/">A List of Everything You Wish Fatshark Told You</a>
                            <p>
                                Maintained by OrangeChris. Explains a lot of basic and/or hidden mechanics in Vermintide 2.
                            </p>
                            <a href="https://docs.google.com/spreadsheets/d/1_KihiXcEb1nP355Nwj0aQ3SszKwqrzQ6ra63CWPQq4I/edit?usp=sharing">Spreadsheet Breakpoint Calculator</a>
                            <p>
                                Maintained by OrangeChris. Forked from Lasmrah's original breakpoint calculator.
                            </p>
                            <a href="https://builds.verminti.de/">Verminbuilds</a>
                            <p>
                                Maintained by absolute_ly and community. Created by bfir3.
                            </p>
                            <a href="https://docs.google.com/spreadsheets/d/1PiWoQOH9LeZVlbHv5GvTaToet5wKW6AdpKDf35StcBI/edit#gid=1134474477">Mobs' HP (1.04)</a>
                            <p>
                                Created by UnShamed. Excluding the Troll (hp has since been increased by 20% for all difficulties) it is still accurate.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            prepPage();
        </script>
        <template id="TEMPLATE-CHAIN">
            <div class="chain-attack-select js-button">
                <select class="chain-attack-dropdown js-input">
                    <option selected disabled hidden>Next Attack</option>
                </select>
            </div>
        </template>
    </body>
</html>
