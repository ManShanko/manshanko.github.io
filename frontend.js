"use strict";function DefaultSettings(){var t={refresh:[]};let a=function(){for(let e=0;e<t.refresh.length;e++)t.refresh[e]()};return t.max_targets=5,t.anim_cancel=.05,t.power_level=835,t.set_power_level=function(n){let e=n.target,o=e.valueAsNumber;if(isNaN(o))throw"power_level is NaN!";600<o?(o=600,e.value=600):15>o&&(o=15,e.value=15),t.power_level=o+constants.starting_power_level,a()},t.difficulty="cataclysm",t.set_difficulty=function(n){let e=n.target,o=e.value;if(!constants.difficulties[o])throw"difficulty is not registered!";else t.difficulty=o,a()},t.harder_better=!1,t.set_harder_better=function(n){let e=!t.harder_better;n.target.value=e,t.harder_better=e,a()},t.platform=!1,t.set_platform=function(n){let e=n.target,o=e.value;t.platform="console"==o,t.difficulty="legend",a()},t.profiles={},t.language="en",t.link="manshanko.github.io",t}var verminted=DefaultSettings();function InitConstants(){return{armor_types:["infantry","armored","monster","friendly_fire","berserker","superarmored"],armor_lookup:{infantry:0,armored:1,monster:2,friendly_fire:3,berserker:4,superarmored:5},hit_types:["neither","headshot","critical","both"],attack_types:["light","push","heavy","dot"],dual_profile:["damage_profile_right","damage_profile_left"],characters:{bw_scholar:"sienna",bw_adept:"sienna",bw_unchained:"sienna",es_mercenary:"kruber",es_huntsman:"kruber",es_knight:"kruber",dr_ranger:"bardin",dr_ironbreaker:"bardin",dr_slayer:"bardin",we_waywatcher:"kerillian",we_maidenguard:"kerillian",we_shade:"kerillian",wh_captain:"saltzpyre",wh_bountyhunter:"saltzpyre",wh_zealot:"saltzpyre"},mob_lookup:{skaven_slave:"infantry",skaven_clan_rat:"infantry",chaos_fanatic:"infantry",chaos_marauder:"infantry",beastmen_gor:"infantry",beastmen_ungor_archer:"infantry",skaven_plague_monk:"berserker",chaos_berzerker:"berserker",skaven_storm_vermin:"armored",beastmen_bestigor:"armored",chaos_raider:"infantry",chaos_warrior:"superarmored",chaos_vortex_sorcerer:"infantry",chaos_corruptor_sorcerer:"infantry",skaven_poison_wind_globadier:"infantry",skaven_gutter_runner:"infantry",skaven_warpfire_thrower:"armored",skaven_ratling_gunner:"armored",skaven_pack_master:"monster",beastmen_standard_bearer:"superarmored"},elites:{beastmen_bestigor:!0,skaven_plague_monk:!0,chaos_berzerker:!0,skaven_storm_vermin:!0,chaos_raider:!0,chaos_warrior:!0},difficulties:{cataclysm:!0,cataclysm_2:!0,cataclysm_3:!0,legend:!0,champion:!0,veteran:!0,recruit:!0}}}var constants=InitConstants(),UID=0;function uniqueID(e){if(e.getAttribute("data-id"))return e.getAttribute("data-id");else{UID++;let t=UID;return e.setAttribute("data-id",t),t}}window.mobilecheck=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},String.prototype.hashCode=function(){var e,t,a=0;if(0===this.length)return a;for(e=0;e<this.length;e++)t=this.charCodeAt(e),a=(a<<5)-a+t,a|=0;return a};let concateObject=function(e){let t="";if("object"==typeof e){let a,n=0;if(e.isArray){n=e.length;for(let e=0;e<n;e++)a[e]=e}else a=Object.keys(e),n=a.length;for(let o=0;o<n;o++)t+=concateObject(e[a[o]])}else t+=e;return t};function pageSelection(e){let t=document.getElementsByClassName(e.getAttribute("data-slot"))[0],a=document.getElementsByClassName("main-page");for(let n=0;n<a.length;n++)a[n]==t?a[n].classList.remove("hide"):a[n].classList.add("hide")}let GenericMath=function(){var e=Math.min;let t={};return t.clamp=function(e,t,a){let n=0;return n=e>=a?a:e<=t?t:e,n},t.getPowerPercentage=function(e){let t=constants.min_power_level,a=constants.max_power_level;return(e-t)/(a-t)},t.scalePower=function(t){let a=verminted.power_level,n=a,o=verminted.difficulty;"deathwish"===o&&(o="legend");let r=constants.difficulty_settings[o],i=r.power_level_cap,s=constants.max_power_level_cap,l=r.power_level_max_target;if(!(i<n))n=e(n,i);else if(l){let e=n-i;n=i+l*e/(s-i)}let p=n;if(constants.min_power_level_cap<=n){let e,a=100,o=10;if(constants.min_power_level_cap+a<=n)e=(n-constants.min_power_level_cap)*(constants.power_level_diff_ratio[t]-1)/(o-1);else{let r=50*((p-200)/a-1);e=(n+r-constants.min_power_level_cap)*(constants.power_level_diff_ratio[t]-1)/(o-1)}p=constants.min_power_level_cap+e}else p=n;return p},t.getPower=function(e,a,n,o,r){let i,s=n.power_multiplier||a.power_multiplier||constants.default_power_multiplier,l=n.power_multiplier_near||a.power_multiplier_near,p=n.power_multiplier_far||a.power_multiplier_far;i=l&&p&&0<=r?0===r?l[e]:p[e]:s[e];let c=t.scalePower(e);return c*i},t.getCleave=function(e,a){let n=t.scalePower("cleave"),o=e.cleave_coefficient||constants.default_cleave_coefficient,r=constants.cleave.max-constants.cleave.min,i=n*o.attack,s=t.getPowerPercentage(i),l=r*s;return verminted.build.weapon[a].multipliers&&(l*=verminted.build.weapon[a].multipliers.power),l},t.getArmorMultiplier=function(e,t,a,n,o,r,i){let s,l,p=a.armor_multiplier||t.armor_multiplier||constants.default_power_multiplier,c=a.armor_multiplier_near||t.armor_multiplier_near,_=a.armor_multiplier_far||t.armor_multiplier_far;return r&&(l=r[e]),s=l&&l[n]?o&&l[o]||l[n]:c&&_&&0<=i?0===i?o&&0<=c[e][o]?c[e][o]:0<=c[e][n]?c[e][n]:1:o&&0<=_[e][o]?_[e][o]:0<=_[e][n]?_[e][n]:1:o&&0<=p[e][o]?p[e][o]:0<=p[e][n]?p[e][n]:1,s},t.getPowerForUnit=function(e,a,n,o,r,i,s,l){let p=e.targets&&e.targets[a]||e.default_target,c=n&&e.critical_multiplier;l&&(i=0,s=0);let _=t.getArmorMultiplier("attack",e,p,i,s,c,r),d=t.getPower("attack",e,p,c,r);d*=_;return d},t},WeaponDamage=function(){var e=Math.floor;let t={},a=GenericMath(),n={},o={};t.getCleave=a.getCleave,a.modifyBoostCurve=function(e,t){let a={};for(let n=0,o=e.length;n<o;n++)a[n]=e[n]*t;return a},a.clampCurveValue=function(e,t){let a=Object.keys(e).length-1;return 0>t?e[0]:t>a?e[a]:e[t]},a.getBoostCurveMultiplier=function(n,o){let r=Object.keys(n).length-1,i=r*o,s=e(i),l=i-e(i),t=a.clampCurveValue(n,s-1),p=a.clampCurveValue(n,s+0),c=a.clampCurveValue(n,s+1),_=a.clampCurveValue(n,s+2);return(-t/2+3*p/2-3*c/2+_/2)*l*l*l+(t-5*p/2+2*c-_/2)*l*l+(-t/2+c/2)*l+p};t.calculateDamage=function(e,t,n,i,s,l,p,c,_,d,m,u,h){let g=data.profiles[e];if(g.no_damage)return 0;let f={headshot:!0,weakspot:!0,protected_weakspot:!0},b=g.targets&&g.targets[m]||g.default_target,w=constants.boost_curves[b.boost_curve_type]||constants.boost_curves["default"],k=constants.damage_output,y=verminted.difficulty,x=0,v=0,C=1,E=1+u;if(f[t]||n||l||p&&1<p){let e=1==_||4==_||5==_?1:_;let o=k.max,r=a.getPowerForUnit(g,m,n,t,s,_,d,e),i=a.getPowerPercentage(r),c=o*i;(f[t]||n)&&(C=.5*c),(l||p&&0<p)&&(x=c)}let L=0,N=""+verminted.difficulty+verminted.power_level+e+m+d+(0+n)+verminted.platform;o[N]?L=o[N]:(L=r.raw(g,m,n,t,s,_,d,k),o[N]=L);let B;i&&(B=x&&L<x&&x*(i-1)||L*(i-1));let A=0,z=0;if(l){A+=[.75,.6,.5,.5,.5,.3][_]}if(p&&0<p){A+=[.75,.3,.75,.5,.5,.2][_]}f[t]&&(0<L?2==_?z+=b&&(b.headshot_boost_boss||b.headshot_boot)||.25:z+=b&&(b.headshot_boost_armor||b.headshot_boost)||.5:5==d&&0==L?z+=b&&(b.headshot_boost_heavy_armor||.25):1==_&&0==L&&(z+=b&&(b.headshot_boost_armor||b.headshot_boost)||.5),"protected_weakspot"==t&&(z*=.25)),"protected_spot"==t&&(A-=.5,z-=.5),g&&g.no_headshot_boost&&(z=0);let P=0;if(n&&(P=g.crit_boost||.5,g.no_crit_boost&&(P=0)),w&&(0<A||0<z||0<P)){let e=b&&b.power_boost_curve_coefficient||1,t=b&&b.boost_curve_coefficient||1;if(p&&0<p&&(e*=p,t*=p),0<A){let t=N+A;o[t]?x=o[t]:(x=r.power_boost(L,x,1,A,w,e),o[t]=x)}if(0<z||0<P){z*=1+h,z=a.clamp(z+P,0,1);let e=N+z+E+x;o[e]?v=o[e]:(v=r.headshot(L,x,C,w,t,z,P,E),o[e]=v)}}return verminted.temp_shade_ult&&2===_&&(L*=.45,x*=.5,v*=.5),L=L+x+v,B&&(L+=B),L},t.compileProfile=function(e,a,o,r,i={}){if("raw"===o)var s=0,l=0,p=0,c=0;else{var s=verminted.build.weapon[o].crit_boost,l=verminted.build.weapon[o].power_boost,p=verminted.build.weapon[o].has_power_boost,c=verminted.build.weapon[o].headshot_multiplier;let e=""+s+l+p+c+verminted.platform+verminted.difficulty.charAt(4)+verminted.power_level,t=(a+e).hashCode();if(n[a]===t)return;n[a]=t}let _=i.source_type,d={},m=constants.armor_types,u=constants.hit_types,h=verminted.max_targets;for(let n=0,l=m.length;n<l;n++){3==n&&(n=4);let e=n,o=n;5==n&&(e=1);let r=m[n];d[r]={};for(let i=0;i<u.length;i++){let l,m,g,f=u[i];if(verminted.temp_shade_ult){let e=data.profiles[a].boost_override;m=4,2==n?(m=2,e&&(m=Math.min(e,m))):e&&(m=e)}let b,w;1==i?(b="headshot",w=!1):2==i?(b=null,w=!0):3==i?(b="headshot",w=!0):(b=null,w=!1);("aoe"===_||"dot"===_)&&(b=null,w=!1),d[r][f]={};for(let n,i=0;i<h;i++)n=t.calculateDamage(a,b,w,l,0,p,m,g,e,o,i,s,c),d[r][f][i]=n}}return"raw"===o?d:void(verminted.profiles[a]=verminted.profiles[a]||{},verminted.profiles[a].crit_boost=s,verminted.profiles[a].power_boost=l,verminted.profiles[a].damage=d)},t.getDamage=function(e,a,n,o,r,i,s){let l,p,c;"object"==typeof o?(l=o.primary_armor||o.armor,p=o.race,c=o.hitzone_armor&&o.hitzone_armor.head&&("headshot"===r||"both"===r)?o.hitzone_armor.head:l):(l=o,c=l,p=void 0),t.compileProfile(e,a,n,0,s);let _=l;"superarmored"===l&&(_="armored");let d=verminted.build.weapon[n].multipliers,m=1;if(d){let t=data.weapons[e].type;m*=d.power,m*=d["power_"+t],m*=d.damage_taken,m*=d[p]||1,m*=d[_]}let u=verminted.profiles[a].damage,h=u[c][r][i]||0;return h*=m,h};let r=function(){var e=Math.max;return{raw:function(e,t,n,o,r,i,s,l){let p=0,c=l,_=c.max-c.min,d=a.getPowerForUnit(e,t,n,o,r,i,s),m=a.getPowerPercentage(d);return p=c.min+_*m,p},power_boost:function(t,n,o,r,i,s){let l=a.modifyBoostCurve(i,s),p=a.clamp(r,0,1),c=a.getBoostCurveMultiplier(l||i,p);return n=e(e(n,t),o)*c,n},headshot:function(t,n,o,r,i,s,l,p){let c=0,_=a.modifyBoostCurve(r,i),d=a.getBoostCurveMultiplier(_||r,s);return c=e(e(n,t),o)*d,0<l&&(c*=p),c}}}();return t},WeaponBreakpoints=function(e){var t=Math.round,a=Math.ceil,o=Math.floor;let r={chain:[],mob_lookup:constants.mob_lookup,damage_profiles:[]},i=function(){},s=function(e){let t=r.chain[e],a=data.weapons[t.weapon].actions[t.action].damage_start+data.weapons[t.weapon].actions[t.action].damage_end;a/=2;let n=t.tts+(a||0);return n/=verminted.build.weapon[t.weapon_index].attack_speed,n},l=function(e,t,n){let o,i=r.chain[t],s=data.weapons[i.weapon].actions[i.action],l=i.weapon_index,p=data.breeds[n];o=s.hit_mass&&constants.hit_mass[s.hit_mass][n]?p.hit_mass_counts&&p.hit_mass_counts[verminted.difficulty]?constants.hit_mass[s.hit_mass][n]*p.hit_mass_counts[verminted.difficulty]:p.hit_mass_count||99:p.hit_mass_counts&&p.hit_mass_counts[verminted.difficulty]?p.hit_mass_counts[verminted.difficulty]:p.hit_mass_count||99,"es_mercenary"===verminted.build.career.name&&(o*=.75);let c=verminted.damage.getCleave(data.profiles[e],l),_=a(c/o);return _},p=function(e,n){let r=0,s=[],l=0;for(let a=0;a<e.length;a++){let o=e[a],i=t(4*e[a])/4;r+=i,s[a]=e[a]/n,l+=s[a]}let p=0,c=0;if(0===r);else if(r>=n)c=1;else{let i,_,d=[];0==n%r?(c=n/r,i=n/r-1,_=n/r/i):(c=a(n/r),i=o(n/r),_=n/r/i);let m=a(4*(n/i))/4;for(let a=0;a<e.length;a++){d[a]=d[a]||{};s[a]*(1/l);d[a].next_bp=e[a]?t(4*(e[a]*_))/4:0}p=_;for(let t=0;;){let a=0,n=[],o=[];for(let t=0;t<d.length;t++)if(0<d[t].next_bp){if(a+=d[t].next_bp,d[t].percent=(d[t].next_bp-1/8)/e[t],!n[0]||d[t].percent>n[0].percent){for(let e=0;e<n.length;e++)n.pop();n[0]={},n[0].percent=d[t].percent,n[0].index=t}else if(d[t].percent===n[0].percent){let e=n.length;n[e]={},n[e].percent=d[t].percent,n[e].index=t}if(!o[0]||d[t].percent<o[0].percent){let e=o.length;for(let t=0;t<e;t++)o.pop();o[0]={},o[0].percent=d[t].percent,o[0].index=t}else if(d[t].percent===o[0].percent){let e=o.length;o[e]={},o[e].percent=d[t].percent,o[e].index=t}}if(t++,100<t)break;if(a>m){let e=4*a-4*m;if(n.length<e)for(let e,t=0;t<n.length;t++)e=n[t].index,d[e].next_bp-=.25;else{p=n[0].percent;break}}else if(a===m){p=n[0].percent;break}else if(a<m)if(o.length)for(let e,t=0;t<o.length;t++)e=o[t].index,d[e].next_bp+=.25;else{break}let r=o.length;for(let e=0;e<r;e++)o.pop()}}let _={ceil:c,percent_needed:p};return _};return r.pullProfiles=function(e,t,a){let n=r.chain[a],o=r.damage_profiles,i=data.weapons[e].actions[t];if(!i)return null;let s=Object.keys(i),p=Object.keys(constants.mob_lookup),c=[];if(i.damage_profile_left&&i.damage_profile_right)c[0]={},c[0].key="damage_profile_left",c[0].value=i.damage_profile_left,c[1]={},c[1].key="damage_profile_right",c[1].value=i.damage_profile_right;else for(let e=0;e<s.length;e++){let t,a,n=s[e];switch(n){case"damage_profile":case"damage_profile_target":t=i[n],a="direct";break;case"damage_profile_aoe":t=i[n],n="damage_profile_knockback_aoe",a="aoe";break;case"aoe":i[n].damage_profile&&(t=i[n].damage_profile,n="damage_profile_aoe",a="aoe");break;default:}if(t){let e=c.length;c[e]={},c[e].key=n,c[e].value=t,c[e].source_type=a}}if(0<c.length){let e={};for(let t=0;t<c.length;t++){let n=c[t],o=n.key,r=n.value,s=n.source_type;e[o]={},e[o].profile_name=r,e[o].source_type=s,e[o].max_targets={};for(let t,n=0;n<p.length;n++)t=p[n],e[o].max_targets[t]=i.damage_profile_target&&"damage_profile"===o?function(){return verminted.max_targets}:function(){return l(r,a,t)};let _=data.profiles[r],d=0;if(_.targets[0]&&_.targets[0].dot||_.default_target.dot){let t;if(t=_.targets[0]&&_.targets[0].dot?_.targets[0].dot:_.default_target.dot,e[o].dot={},e[o].dot.profile_name=t,0===_.targets.length)d=verminted.max_targets;else for(let e,t=0;t<_.targets.length;t++)if(e=_.targets[t],!e.dot){d=t;break}e[o].dot.max_targets=d}}n.damage_profiles=e}},r.getAllDamage=function(e){let t=r.chain,a=[],n=e.target||0;for(let o=0;o<t.length;o++){let e=t[o],r=e.damage_profiles;if(!r)continue;let i=e.weapon_index,l=e.weapon,p=e.action,c=data.weapons[l].actions[p],_=s(o),d=c.damage_start+e.tts,m=c.damage_end+e.tts,u=e.hit_type||4,h=a.length,g=[],f=0,b=[];r.damage_profile_target?0===n?(g[f]=r.damage_profile_target,f++):(g[f]=r.damage_profile,f++):r.damage_profile&&r.damage_profile_aoe?(0===n&&(g[f]=r.damage_profile,f++),g[f]=r.damage_profile_aoe,f++):r.damage_profile_left?(b[f]=r.damage_profile_left.max_targets,g[f]=r.damage_profile_left,f++,b[f]=r.damage_profile_right.max_targets,g[f]=r.damage_profile_right,f++):r.damage_profile&&(b[f]=r.damage_profile.max_targets,g[f]=r.damage_profile,f++);for(let t=0;t<g.length;t++){let o=g[t],r=o.profile_name,s=o.source_type;h=a.length,a[h]={},a[h].profile_name=r,a[h].hit_type=u,a[h].hit_time=_,a[h].tts=e.tts,a[h].damage_start=d,a[h].damage_end=m,a[h].source_type=s,a[h].weapon_index=i,a[h].weapon_name=l,a[h].action_name=p,"object"==typeof b[t]&&(a[h].max_targets=b[t]),data.profiles[r].targets[n]?data.profiles[r].targets[n].dot&&(a[h].dot=data.profiles[r].targets[n].dot):data.profiles[r].default_target&&data.profiles[r].default_target.dot&&(a[h].dot=data.profiles[r].default_target.dot)}}return a},r.buildDamageTicks=function(e,t,a){let n=a.hit,r=a.target,i=constants.hit_types,s=[],l=[],p=[],c={};for(let o,l=0;l<e.length;l++){if(o=e[l],"object"==typeof o.max_targets){let e=o.max_targets[t]();if(r>=e)continue}if("string"==typeof o.dot){let e,a=o.weapon_name,r=o.action_name,s=i[o.hit_type]||n,l=data.dots[o.dot].dot_type;if("poison_dot"===l&&"neither"===n&&"aoe"!==o.source_type){let a=constants.armor_lookup[data.breeds[t].armor],n=data.profiles[o.profile_name].armor_multiplier&&data.profiles[o.profile_name].armor_multiplier.attack||data.profiles[o.profile_name].armor_multiplier_near&&data.profiles[o.profile_name].armor_multiplier_near.attack;e=!!(0<n[a])}else e=!0;if(e){let e=data.dots[o.dot],t=p.length;if(1===e.max_stacks){let n=p[c[l]];if(n&&n.dot_end>o.hit_time){let t=o.hit_time+e.duration;t>n.dot_end&&(n.dot_end=t)}else c[l]=t,p[t]={},p[t].name=e.name,p[t].profile_name=e.damage_profile,p[t].hit_type=0,p[t].tick_rate=e.tick_rate,p[t].dot_start=o.hit_time,p[t].dot_end=o.hit_time+e.duration,p[t].source_type="dot",p[t].weapon_name=a,p[t].action_name=r}else p[t]={},p[t].name=e.name,p[t].profile_name=e.damage_profile,p[t].hit_type=0,p[t].tick_rate=e.tick_rate,p[t].dot_start=o.hit_time,p[t].dot_end=o.hit_time+e.duration,p[t].source_type="dot",p[t].weapon_name=a,p[t].action_name=r}}s[s.length]=e[l]}for(let r=0;r<p.length;r++){let e=p[r],t=e.tick_rate,a=e.dot_end-e.dot_start,n=o(a/t);for(let a=0;a<n;a++){let n=e.dot_start+t*(a+1),o=l.length;l[o]={},l[o].hit_time=n,l[o].damage_start=n-.25*t,l[o].damage_end=n+.25*t,l[o].name=e.name,l[o].profile_name=e.profile_name,l[o].hit_type=0,l[o].tick_rate=e.tick_rate,l[o].dot_start=e.dot_start,l[o].dot_end=e.dot_end,l[o].source_type=e.source_type,l[o].weapon_name=e.weapon_name,l[o].action_name=e.action_name}}if(0<l.length){for(let e,t=0;t<l.length;t++)e=s.length,s[e]=l[t];s.sort(function(e,t){return e.hit_time-t.hit_time})}return s},r.buildBreakpoints=function(n){if(0>n)return;let o=r.chain,s=r.damage_profiles,l=constants.hit_types,c=verminted.difficulty,_=e.container,d=Object.keys(constants.mob_lookup),m={},u=[],h=verminted.max_targets,g=[];for(let e=0;e<h;e++)g[e]=r.getAllDamage({target:e});for(let s=0,_=d.length;s<_;s++){let n=d[s],_=d[s],f=data.breeds[_].max_health[c];verminted.platform&&data.breeds[_].console_max_health&&data.breeds[_].console_max_health[c]&&(f=data.breeds[_].console_max_health[c]),verminted.harder_better&&constants.elites[n]&&(f*=2),m[_]=0;for(let e,t=0;t<o.length;t++){if(e=o[t].damage_profiles,!e)continue;let a=0;e.damage_profile_aoe?a=2:e.damage_profile?a=e.damage_profile.max_targets[_]():e.damage_profile_left&&(e.damage_profile_left.max_targets>e.damage_profile_right.max_targets?a=e.damage_profile_left.max_targets[_]():a=e.damage_profile_right.max_targets[_]()),a>m[_]&&(m[_]=a)}let b=[];for(let n,o=0;o<l.length;o++){n=l[o];for(let c=0;c<h;c++){if(b[c]=b[c]||[],b[c][o]=r.buildDamageTicks(g[c],_,{hit:n,target:c}),c>=m[_]){for(let t=c;t<h;t++)e.breeds[_].targets[t].row.classList.add("hide");break}let i=e.breeds[_].targets[c][l[o]],w=TooltipControl(i),k=`${_}\r\n${l[o]}`,y=e.breeds[_].mob_name,x=_.replace(/_/g," "),v=x.replace(/\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1)});y.textContent=v+" ("+f+")";let C=r.chain[0].weapon_index;for(let e=0;e<b[c][o].length;e++){let t=b[c][o][e],a=t.profile_name,r=t.weapon_name,i=l[t.hit_type]||n,s={source_type:t.source_type};void 0!==t.weapon_index&&(C=t.weapon_index);let p=verminted.damage.getDamage(r,a,C,data.breeds[_],i,c,s);t.damage=p}let E=b[c][o],L=0,N=[];for(let e,a=0;a<E.length;a++){e=E[a],N[a]=E[a].damage;let n=t(4*E[a].damage)/4;L+=n,k+=`\r\n${e.profile_name}: ${n}`}let B=p(N,f),A=B.percent_needed,z=B.ceil,P=i.textContent;0===z?i.textContent=0:1===z&0===A?i.textContent=1:(k+=`\r\n\r\npower needed for next bp: ${a(1e5*(A-1))/1e3}%`,A=a(100*A),100<A&&(A-=100),i.textContent=z+" ("+A+"%)");let D=e.breeds[d[s]].targets[c].row;if(i.textContent!==P)i.classList.remove("damage-change"),u[u.length]=i;else if(D.classList.contains("hide"))for(let e,t=0;t<D.children.length;t++)e=D.children[t],e.classList.remove("damage-change"),window.setTimeout(function(){e.classList.add("damage-change")},0);w.text(k),D.classList.remove("hide")}}for(let t,a=0;a<b.length;a++)t=e.breeds[_].targets[a],t.callback=function(){i(b[a],t.row,_)};let w=e.breeds[n].extra_targets;m[_]>h?(w.textContent="+"+(m[_]-h),w.classList.remove("hide")):w.classList.add("hide")}window.setTimeout(function(){for(let e=0;e<u.length;e++)u[e].classList.add("damage-change")},0),_.classList.remove("hide")},r.clearAttacks=function(){for(let e=0,t=chain.length;e<t;e++)chain.pop()},r.generateCombo=function(){for(let e=0,t=chain.length;e<t;e++);},r},AttackBreakpoints=function(e,t){let a=e.container,n=WeaponBreakpoints(e),o=a.parentNode,r=o.getElementsByClassName("weapon-breakpoints-attacks")[0],s={};s.attacks=[],s.name_div=e.name_div,n.chain[0]={},n.chain[0].weapon_index=t,n.chain[0].tts=0;let l=function(){let e=data.weapons[s.name].actions,t=Object.keys(e).sort(),a=[],n=0;for(let o,r=0;r<t.length;r++)o=e[t[r]],(o.damage_profile||o.damage_profile_left)&&(a[n]=t[r],n++);for(let e,t=0;t<s.attacks.length;t++)e=s.attacks[t],a[t]?(e.textContent=a[t],e.setAttribute("data-action",a[t]),e.classList.remove("hide"),e.classList.remove("not-active-talent")):e.classList.add("hide")},p=function(){},c=function(t){let e=t.target.getAttribute("data-action");n.chain[0].action=e;n.pullProfiles(s.name,e,0),n.buildBreakpoints(0,"raw");for(let e,a=0;a<s.attacks.length;a++)e=s.attacks[a],e===t.target?e.classList.remove("not-active-talent"):e.classList.add("not-active-talent");a.classList.remove("hide")};return n.set=function(e){n.chain[0].weapon=e,s.name=e,s.name_div.textContent=e,o.classList.remove("hide"),p(),l()},n.refresh=function(){let e=n.chain[0];s.name&&e.action&&data.weapons[e.weapon].actions[e.action]&&n.buildBreakpoints(0)},verminted.update_on_build[verminted.update_on_build.length]=n.refresh,function(){for(let e,t=0;10>t;t++)e=document.createElement("div"),e.classList="weapon-attack js-button hide",e.addEventListener("click",c),s.attacks[t]=e,r.appendChild(e)}(),n},ComboBreakpoints=function(e){var t=Math.ceil,a=Math.floor;let n=WeaponBreakpoints(e);n.headshot_chance=0,n.armor_types=constants.armor_types;let o={},r=n.buildBreakpoints,i=document.getElementsByClassName("chain-options-modal")[0],s=i.getElementsByClassName("chain-attack-options")[0],l=i.parentNode.parentNode,p=ModalControl(l,i);p.close=function(){verminted.build.refresh(),l.classList.add("hide"),document.body.removeEventListener("click",p.onClick),document.body.classList.remove("no-scroll")};let c=document.getElementsByClassName("chain-attack-header");for(let t=0,a=c.length;t<a;t++)c[t].addEventListener("click",function(t){p.open(),t.stopPropagation()});document.getElementsByClassName("chain-options-modal-close")[0].addEventListener("click",p.close);let _=i.getElementsByClassName("chain-attack-options")[0],d=function(t){let o=n.chain,r=n.damage_profiles,i=n.armor_types,s=e.info.damage_box,l=e.info.damage_box.dps,p=["skaven_slave","skaven_storm_vermin","skaven_pack_master","","skaven_plague_monk","chaos_warrior"];for(let e=0,r=i.length;e<r;e++){3==e&&(e=4);let r=i[e];if(s.dps[r])var c=s.dps[r];else{var c=document.createElement("div");c.classList.add(n.armor_types[e]),s.dps[n.armor_types[e]]=c,s.container.appendChild(s.dps[n.armor_types[e]])}let l=TooltipControl(c),_=0;if(0<t){let i=n.getAllDamage({target:0,order:"dps"});i=n.buildDamageTicks(i,p[e],{target:0,hit:"neither"});let s=o[0].weapon_index;for(let e,t=0;t<i.length;t++){e=i[t],s=e.weapon_index||s;let a=s,o=n.headshot_chance,l=verminted.build.weapon[a].crit_chance||.05;data.weapons[e.weapon_name].actions[e.action_name]&&data.weapons[e.weapon_name].actions[e.action_name].extra_crit_chance&&(l+=data.weapons[e.weapon_name].actions[e.action_name].extra_crit_chance);let p,c;switch(e.hit_override){case"neither":p=0,l=0,o=0,c=1;break;default:p=o*l,o-=p,l-=p,c=1-(o+l+p);}let d=0,m=0,u=0,h=0;0<c&&(d+=verminted.damage.getDamage(e.weapon_name,e.profile_name,a,r,"neither",0)),0<o&&(m+=verminted.damage.getDamage(e.weapon_name,e.profile_name,a,r,"headshot",0)),0<l&&(u+=verminted.damage.getDamage(e.weapon_name,e.profile_name,a,r,"critical",0)),0<p&&(h+=verminted.damage.getDamage(e.weapon_name,e.profile_name,a,r,"both",0)),d*=c,m*=o,u*=l,h*=p;let g=d+m+u+h;_+=g}_/=t;let d=`DPS against ${r}\r\n${_.toFixed(2)}`;l.text(d),c.textContent=a(10*_)/10}else c.textContent=0}},m=function(){let a=n.chain,o=e.info.attack_speed,r=0,i=!1;if(1<a.length){let e=a.length-1,t=data.weapons[a[e].weapon],n=a[e].weapon_index,o=verminted.build.weapon[n].attack_speed||1;if(a[e].weapon!==a[0].weapon)r+=t.actions[a[e].action].attack_speed.anim_cancel/o,r+=verminted.anim_cancel,i=!0;else if(t.actions[a[e].action]&&t.actions[a[e].action].attack_speed[a[0].action]){let n=t.actions[a[e].action].timeout,s=t.actions[a[e].action].attack_speed[a[0].action]-t.actions.neutral.attack_speed[a[0].action];r+=n&&n<s?n:s/o,i=!0}else if(n!==a[0].weapon_index){let n=t.actions[a[e].action].timeout,s=t.actions[a[e].action].attack_speed.anim_cancel-t.actions.neutral.attack_speed[a[0].action];r+=n&&n<s?n:s/o,i=!0}else if(t.actions.push&&a[0].action===t.actions.push.push_attack){switch(a[e].action){case"anim_cancel":r+=0;break;case"block":r+=0;break;default:let n=t.actions[a[e].action].attack_speed.block,i=t.actions[a[e].action].damage_start+t.actions[a[e].action].damage_end;i/=2,r+=n<i?i/o:n/o;}i=!0}else"anim_cancel"===a[e].action?(r+=verminted.anim_cancel,i=!0):"block"===a[e].action&&(i=!0)}for(let e=0,t=a.length;e<t;e++){let t=a[e].weapon_index,n=verminted.build.weapon[t].attack_speed||1;r+=data.weapons[a[e].weapon].actions[a[e].action]&&data.weapons[a[e].weapon].actions[a[e].action].timeout&&data.weapons[a[e].weapon].actions[a[e].action].timeout<a[e].speed*n?data.weapons[a[e].weapon].actions[a[e].action].timeout:a[e].speed/n}r=t(100*r)/100,o.textContent=r+"s",i&&"number"==typeof r?(o.style.color="black",d(r)):(o.style.color="red",d(0))};n.addAttack=function(e,t,a,s){let l=n.chain,p=n.damage_profiles;if(0===s&&(o={},h(!0)),s<l.length){let e=l[s].profile_length-1;for(let t=p.length;t>e;t--)p[t]=null,p.pop();for(let e=l.length-1;e>s-1;e--)_.removeChild(l[e].options.div),l[e]=null,l.pop()}l[s]={},l[s].weapon=e,l[s].weapon_index=a,l[s].action=t,l[s].speed=0,l[s].hit_type=4,l[s].profile_length=p.length,l[s].options={};let c=document.createElement("div");c.classList="attack-options";let d=document.createElement("div");d.classList="attack-count",d.textContent=s+1;let u=document.createElement("div");u.classList="attack-name-options";let g=document.createElement("p");g.textContent=e;let f=document.createElement("span");f.textContent=t,u.appendChild(g),u.appendChild(f);let b=document.createElement("select");b.classList="attack-option-select js-input",b.addEventListener("change",function(){l[s].hit_type=parseInt(b.value)});let w=document.createElement("option");w.value=4,w.textContent="default",w.setAttribute("selected",!0),b.appendChild(w);for(let n,o=0;o<constants.hit_types.length;o++)n=document.createElement("option"),n.value=o,n.textContent=constants.hit_types[o],b.appendChild(n);c.appendChild(d),c.appendChild(u),c.appendChild(b),_.appendChild(c),l[s].options.div=c;let k=s;if(n.pullProfiles(e,t,s),!data.weapons[e].actions[t]){let e=s-1,a=data.weapons[l[e].weapon],n=a.actions[l[e].action];if("block"===t){let e=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.block,t=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start;t+=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,t/=2,l[s].speed+=e<t?t:e,l[s].speed+=a.block.min_hold}else{let e=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.anim_cancel,t=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start;t=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,t/=2,l[s].speed+=e<t?t:e}--k}else{let a=data.weapons[e];if("melee"!==a.type||t!==a.actions.push.push_attack)0===s?l[s].speed=a.actions.neutral.attack_speed[t]:data.weapons[l[s-1].weapon].actions[l[s-1].action]?l[s].weapon_index===l[s-1].weapon_index?l[s].speed=a.actions[l[s-1].action].attack_speed[t]:(l[s].speed=a.actions.neutral.attack_speed[t],l[s].speed+=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.anim_cancel):l[s].speed=a.actions.neutral.attack_speed[t];else if(l[s].speed=a.actions.push.attack_speed[t],l[s].speed+=a.block.min_hold,0<s)if(e===l[s-1].weapon){let e=0,t=0;data.weapons[l[s-1].weapon].actions[l[s-1].action]&&(e=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.block,t=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start,t+=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,t/=2),l[s].speed+=e<t?t:e}else{let e=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.anim_cancel,t=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start;t+=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,t/=2,l[s].speed+=e<t?t:e}}l[s].tts=0;for(let n=0;n<=s;n++)l[s].tts+=l[n].speed;r(k),m()};let u=!1,h=function(t){u=t||!u,u?(e.container.getElementsByClassName("breakpoint-plate")[0].classList.remove("hide"),e.info.container.classList.remove("hide")):(e.container.getElementsByClassName("breakpoint-plate")[0].classList.add("hide"),e.info.container.classList.add("hide"))};return n.refresh=function(){let e=n.chain;e[0]&&null!==verminted.build.getWeaponIndex(e[0].weapon)&&m(),r(e.length-1)},function(){e.container.getElementsByClassName("attack-combo-title")[0].addEventListener("click",function(){h()})}(),verminted.update_on_build[verminted.update_on_build.length]=n.refresh,n},AttackChain=function(e){let t={anim_cancel:.05,weapon:[]},a={};t.chain=[];let n=document.getElementById("TEMPLATE-CHAIN").content.firstElementChild,o=verminted.combo_breakpoints,r=function(e,o){let r=t.chain,s=[],l=0;for(let r=0,n=t.weapon.length;r<n;r++){let e=t.weapon[r],n=data.weapons[e];if(e&&"melee"===data.weapons[e].type){if(o&&o.weapon===t.weapon[r]&&data.weapons[o.weapon].actions[o.attack]&&o.weapon_index===r){let t=data.weapons[o.weapon].actions,a=t[o.attack].attack_speed,n=Object.keys(a).sort(),i=[],p={};for(let e,a=0;a<n.length;a++)if(e=n[a],t[e]&&(t[e].damage_profile||t[e].damage_profile_left)){let t=i.length;i[t]=e,p[e]=!0}for(let e,t=0;t<n.length;t++)if(e=n[t],!p[e]){let t=i.length;i[t]=e}n=i;for(let t=0,a=n.length;t<a;t++)"block_cancel_end"!==n[t]&&(s[l]={},s[l].name=r+1+" "+n[t],s[l].attack=n[t],s[l].weapon=e,s[l].weapon_index=r,l++)}else{let t=data.weapons[e].actions.neutral.attack_speed,a=Object.keys(t);for(let t=0,n=a.length;t<n;t++)s[l]={},s[l].name=r+1+" "+a[t],s[l].attack=a[t],s[l].weapon=e,s[l].weapon_index=r,l++}let i=Object.keys(a[e].push),p=a[e].block.push;p+=a[e].push[i[0]],s[l]={},s[l].name=r+1+" push_attack",s[l].attack=n.actions.push.push_attack,s[l].weapon=e,s[l].weapon_index=r,l++}else if(e&&"ranged"===data.weapons[e].type)if(o&&o.weapon===t.weapon[r]&&"neutral"!==o.attack){let a,i=0;n.actions[o.attack]?a=n.actions[o.attack].attack_speed:(a=n.actions.neutral.attack_speed,"block"===o.attack?i=n.block.min_hold:"anim_cancel"===o.attack&&(i=t.anim_cancel));let p=Object.keys(a);for(let t=0,a=p.length;t<a;t++)"block_cancel_end"!==p[t]&&(s[l]={},s[l].name=r+1+" "+p[t],s[l].attack=p[t],s[l].weapon=e,s[l].weapon_index=r,l++)}else{let t=data.weapons[e].actions.neutral.attack_speed,a=Object.keys(t);for(let t=0,n=a.length;t<n;t++)s[l]={},s[l].name=r+1+" "+a[t],s[l].attack=a[t],s[l].weapon=e,s[l].weapon_index=r,l++}}for(let t=0,a=s.length;t<a;t++)s[t].node=document.createElement("option"),s[t].node.value=s[t].weapon+","+s[t].attack+","+s[t].weapon_index,s[t].node.textContent=s[t].name,e.appendChild(s[t].node);return s},i=function(a){let s,l=t.chain;if(a.target)s=a.target;else if(a.value)s=a;else throw`next chain had a problem`;let p=s.value.split(/,/),c={};c.weapon=p[0],c.attack=p[1],c.weapon_index=parseInt(p[2],10);let _=parseInt(s.getAttribute("data-count"),10)||0,d=_+1;if(l[d])for(let t=l.length-1;t>=d;t--)e.removeChild(l[t].node),l.pop();l[d-1].weapon=p[0],l[d-1].action=p[1],l[d]={},l[d].node=e.appendChild(n.cloneNode(!0)),l[d].select=l[d].node.getElementsByClassName("chain-attack-dropdown")[0],l[d].select.setAttribute("data-count",d),r(l[d].select,c),l[d].select.addEventListener("change",i),o.addAttack(c.weapon,c.attack,c.weapon_index,_)};return t.refresh=function(){let a=t.chain,o=!1,s=null;for(let n=0,r=a.length;n<r;n++){let r=a[n].select.value.split(/,/),i=r[0];i!==t.weapon[0]&&i!==t.weapon[1]&&(o=!0),o&&(null===s&&(s=n-1),e.removeChild(a[n].node))}for(let t=a.length-1;t>=0;t--)a[t].node.parentNode&&e.removeChild(a[t].node),a.pop();a[0]&&e.removeChild(a[0].node),a[0]=a[0]||{},a[0].node=e.appendChild(n.cloneNode(!0)),a[0].select=a[0].node.getElementsByClassName("chain-attack-dropdown")[0],a[0].select.setAttribute("data-count",0),r(a[0].select),a[0].select.addEventListener("change",i)},t.setWeapon=function(e,n){t.weapon[n]=e,reverseLookup(e),a[e]=data.weapons[e].lookup,t.refresh()},t},WeaponSelection=function(e){let t={},a=verminted.weapon_list,n=verminted.attack_chain;t.update=[];let o=function(t){let a=e.getAttribute("data-weapon-select"),o=verminted.weapon_slot[a];e.textContent=t,e.setAttribute("data-input",t);let r=verminted.update_weapon;for(let e=0,n=r.length;e<n;e++)r[e](t,a,o);n.setWeapon(t,parseInt(e.getAttribute("data-weapon-select"),10))};return e.addEventListener("click",function(t){a.setClickCallback(o);let e=verminted.update_weapon_list;for(let a=0,n=e.length;a<n;a++)e[a](t);a.open()}),t},ModalControl=function(t,a){let n={clickCallback:null,closeCallback:null,modal:t},o=!0;return n.open=function(){t.classList.remove("hide"),n.bind();let e=t.children[0];o?o=!1:e.scrollTo(0,0),document.body.classList.add("no-scroll")},n.setClickCallback=function(e){n.clickCallback=e},n.setCloseCallback=function(e){n.closeCallback=e},n.close=function(){null!==n.closeCallback&&n.closeCallback(),t.classList.add("hide"),document.body.removeEventListener("click",n.onClick),document.body.classList.remove("no-scroll")},n.onClick=function(o){o.stopPropagation();let e=o.target,r=!1;if(a)var i=a;else var i=t;for(;e&&e.classList;){if(e===i||e.classList.contains("weapon-list-holder")){r=!1;break}else if(e===document.body){r=!0;break}e=e.parentNode}r&&n.close()},n.bind=function(){document.body.addEventListener("click",n.onClick)},n},BuildBuild=function(){let e=document.getElementsByClassName("build-modal")[0].parentNode.parentNode,t={};t.career={},t.career.name,t.career.multipliers={},t.items=[],t.weapon=[],t.weapon_lookup={},t.update_on_close=verminted.update_on_build;let a,n={container:document.getElementsByClassName("weapon-list")[0],modal:verminted.weapon_list,lookup:{},weapon:{},property_combos:{}},o=document.getElementsByClassName("buff-container")[0],r=document.getElementsByClassName("weapon-breakpoints-container"),s={},l=[],p=[];for(let e=0;e<data.careers.bw_scholar.talent_tree.length;e++)p[e]={};let c={power_vs_unarmoured:"infantry",power_vs_armoured:"armored",power_vs_large:"monster",power_vs_frenzy:"berserker",power_vs_skaven:"skaven",power_vs_chaos:"chaos",power_level:"power"},_=verminted.compression;t.modal=ModalControl(e,document.getElementsByClassName("build-modal")[0]),document.getElementsByClassName("build-modal-close")[0].addEventListener("click",t.modal.close);let d=function(e){let a=t.items,o=[];o[0]=a[e].property[0].select.value,o[1]=a[e].property[1].select.value;let r=a[e].type,s=n.property_combos[r];for(let t=0,n=a[e].property.length;t<n;t++)for(let n,r=0,i=a[e].property[t].options.length;r<i;r++)n=a[e].property[t].options[r].value,s&&s[o[(t+1)%2]]?s[o[(t+1)%2]][n]?a[e].property[t].options[r].removeAttribute("disabled"):a[e].property[t].options[r].setAttribute("disabled",!0):a[e].property[t].options[r].removeAttribute("disabled")},m=function(e){let a,o,r=t.items;t.career.name?(a=data.careers[t.career.name],o=a.equipment):o=data.careers.dr_ranger.equipment;for(let l,p=0,i=r.length;p<i;p++){l=o[p],"dr_slayer"===t.career.name&&"throwing_axes"===r[p].name&&(l="ranged");let i;if(i=data.weapons[r[p].name]?data.weapons[r[p].name].traits:1==p?"ranged_ammo":o[p],s[a]);else if(r[p].type===l&&r[p].trait_type===i&&!e)continue;else{r[p].type=l,r[p].trait_type=i;for(let e=0,t=r[p].property.length;e<t;e++){for(let t,a=0,n=r[p].property[e].options.length;a<n;a++)t=r[p].property[e].options.length-1,r[p].property[e].select.removeChild(r[p].property[e].options[t]),r[p].property[e].options.pop();let t=l;("ranged_ammo"===t||"ranged_heat"===t)&&(t="ranged");let a=document.createDocumentFragment(),o=Object.keys(n.property_combos[t]).sort(),i=!1;for(let t=0,n=o.length;t<n;t++){let n=o[t],s=document.createElement("option");s.value=n,s.textContent=data.localize[verminted.language][data.item.properties[n].name]||n,r[p].property[e].name&&n===r[p].property[e].name&&(s.setAttribute("selected",!0),i=!0),r[p].property[e].options[t]=s,a.appendChild(s)}!i&&r[p].property[e].name&&(r[p].property[e].name=o[0]),r[p].property[e].select.appendChild(a)}if(-1<p){let e=r[p].trait.options.length;if(0<e)for(let t,a=0;a<e;a++)t=e-1-a,r[p].trait.select.removeChild(r[p].trait.options[t]),r[p].trait.options.pop();let t=document.createDocumentFragment(),a=data.item.trait_combos[i].sort(),n=!1;for(let e=0,o=data.item.trait_combos[i].length;e<o;e++){let o=a[e],i=document.createElement("option");i.value=o,i.textContent=data.localize[verminted.language][data.item.traits[o].name]||o,r[p].trait.name&&o===r[p].trait.name&&(i.setAttribute("selected",!0),n=!0),r[p].trait.options[e]=i,t.appendChild(i)}!n&&r[p].trait.name&&(r[p].trait.name=a[0]),r[p].trait.select.appendChild(t)}}}},u=function(e,a){if(t.career.name=e,t.career.crit_chance=data.careers[e].base_crit_chance,t.career.attack_speed=data.careers[e].base_attack_speed||0,t.career.reload_speed=data.careers[e].base_reload_speed||0,t.career.headshot_multiplier=data.careers[e].base_headshot_multiplier||0,t.career.backstab_multiplier=data.careers[e].base_backstab_multiplier||0,s[e]&&!a);else{m();let t=data.careers[e].talent_tree;for(let e=0;e<t.length;e++){p[e]={};for(let a=0;a<t[e].length;a++){let n=t[e][a],o=data.localize[verminted.language][n.description],r="generated";if(!o&&n.buffs){r="",o="";for(let e=0;e<n.buffs.length;e++){0<e&&(o+="\r\n");let t=n.buffs[e];o+=t.name+"\r\n",t.stat_buff&&(o+="property: "+t.stat_buff+"\r\n"),(t.bonus||t.multiplier)&&(o+="bonus: "+(t.bonus||t.multiplier)+"\r\n"),t.max_stacks&&(o+="max stacks: "+t.max_stacks+"\r\n")}}let i=data.localize[verminted.language][n.name];i||(n.buffs[0]?i=n.buffs[0].name.replace(/_/g," "):i=e+"-"+a),l[e][a].div.classList.remove("not-active-talent"),l[e][a].div.textContent=i;let s=TooltipControl(l[e][a].div);s.text(o,r)}}}y.refresh()},h=function(e,a){let n=t.career.name;if(!n)return;let o={power_level:"power"},r={attack_speed:"attack_speed",reload_speed:"reload_speed",critical_strike_chance:"crit_chance",backstab_multiplier:"backstab_multiplier"},s=data.careers[n].talent_tree;p[e]=s[e][a],p[e].col=a;let c=p[e];if(c.stat_buff&&(c.max_stacks||c.chunk_size));else for(let e=0;6>e;e++){if(!p[e]||!p[e].stat_buff)continue;let a=p[e].stat_buff;o[a]?(0==e&&(t.career.multipliers[o[a]]=0),t.career.multipliers[o[a]]+=p[e].multiplier):r[a]&&(0==e&&(t.career[r[a]]=0),t.career[r[a]]+=p[e].multiplier)}for(let t=0;t<s[e].length;t++)t===a?l[e][t].div.classList.remove("not-active-talent"):l[e][t].div.classList.add("not-active-talent");y.refresh()},g=function(e,a){let n=t.items,o=n[a];o.name=e,verminted.weapon_attack_breakpoints[a].set(e),n[a].weapon.div.textContent=e,m(),verminted.attack_chain.setWeapon(e,a)},f=function(e,a,n){let o=t.items;o[a].property[n].name=e,o[a].property[n].value=data.item.properties[e].value[1],d(a,n)},b=function(e){let a=y.getModifier(e);if(!data.careers[t.career.name])"crit_chance"===e&&(a+=.05);else if(c[e]){for(let t=0;t<p.length;t++)if(p[t].buffs)for(let n,o=0;o<p[t].buffs.length;o++)n=p[t].buffs[o],e!==n.stat_buff||n.max_stacks||(a+=n.multiplier);}else{a+=t.career[e]||0;for(let t=0;t<p.length;t++)if(p[t].buffs)for(let n,o=0;o<p[t].buffs.length;o++)n=p[t].buffs[o],e!==n.stat_buff||n.max_stacks||("crit_chance"===n.stat_buff?a+=n.bonus:a+=n.multiplier)}return a};t.getMultipliers=function(){let e=t.items,a=t.weapon,n=t.weapon_lookup,o=[];for(let t=0,a=e.length;t<a;t++)if("charm"===e[t].type||"trinket"===e[t].type){let a=o.length;o[a]=e[t]}for(let e=0;e<n.length;e++)n.pop();for(let t,r=0,i=e.length;r<i;r++){if(t=e[r].name,a[r]={},!t&&!data.weapons[e[r].name])continue;n[t]=r,a[r].name=t,a[r].multipliers={},a[r].attack_speed=1+b("attack_speed"),a[r].reload_speed=1+b("reload_speed"),a[r].crit_boost=b("crit_boost"),a[r].power_boost=b("power_boost"),a[r].crit_chance=b("crit_chance"),a[r].headshot_multiplier=b("headshot_multiplier"),a[r].backstab_multiplier=b("backstab_multiplier"),a[r].has_power_boost=b("has_power_boost");let i=Object.keys(c);for(let e=0,t=i.length;e<t;e++)a[r].multipliers[c[i[e]]]=1+b(i[e]);data.weapons[t].type;a[r].multipliers.power_melee=1+b("power_level_melee"),a[r].multipliers.power_ranged=1+b("power_level_ranged"),a[r].multipliers.damage_taken=1+b("damage_taken");for(let t=0,n=o.length+1;t<n;t++){let n=o[t]?o[t].property:e[r].property;for(let e,t=0,o=n.length;t<o;t++)e=n[t],c[e.name]?a[r].multipliers[c[e.name]]+=e.value:"attack_speed"===e.name?a[r].attack_speed+=e.value:"crit_boost"===e.name?a[r].crit_boost+=e.value:"crit_chance"===e.name&&(a[r].crit_chance+=e.value)}}return a},t.getWeaponIndex=function(e){let a=t.items,n=t.weapon,o=t.weapon_lookup;return 0<=o[e]?o[e]:(t.getMultipliers(),o[e])},t.refresh=function(){let e=t.weapon;t.getMultipliers();for(let e=0,t=verminted.update_on_build.length;e<t;e++)verminted.update_on_build[e]();for(let t=0;t<e.length;t++)e[t].name&&expandWeaponInfo(e[t].name,t,verminted.weapon_slot[t])};let w=function(){for(let e,n=0;n<a.length;n++)e=a[n],e.value===t.career.name?e.setAttribute("selected",!0):e.removeAttribute("selected",!1);m()};t.encode=function(e){let a={career:t.career,talents:p,items:t.items};if(!a.career||!a.career.name)e.classList.add("failed-copy");else{e.classList.remove("failed-copy");let n=_.encode(a),o="?"+n;e.textContent=o;let r=verminted.link+o,i=document.createElement("textarea");i.classList="hide",i.value=r,e.appendChild(i),i.focus(),i.select(),document.execCommand("copy"),e.removeChild(i);let s=document.createRange();s.selectNodeContents(e);let l=window.getSelection();l.removeAllRanges(),l.addRange(s),n!==t.build_code&&(history.pushState({build:{build_code:n}},"",o),t.build_code=n)}},t.decode=function(e){let a=verminted.compression.decode(e);k(a),t.build_code=e};let k=function(e){u(e.career,!0),g(e.items[0].weapon,0),g(e.items[1].weapon,1);for(let a=0;a<e.items.length;a++)f(e.items[a].properties[0],a,0),f(e.items[a].properties[1],a,1),t.items[a].trait.name=e.items[a].trait;for(let t=0;t<e.talents.length;t++){let a=t,n=e.talents[t];h(a,n)}w(),m(!0)},y=function(e,t){let a={},n={},o={},r=function(t){let a=n[t];if(!a.div){let o=document.createElement("div");o.classList="buff";let r=n[t],i=TooltipControl(o);i.text(t+"\r\n"+a.buff[0].stat_buff+"\r\n"+a.buff[0].value);let s=document.createElement("div");s.classList="buff-name";let l=n[t].sources,p=l.length,c="";for(let e,t=0;t<p;t++){e=l[t],c+=e.name,1<p&&t<p-1&&(c+=",");let a=document.createElement("p");a.textContent=c,s.appendChild(a)}let _=a.max_stacks,d=document.createElement("input");1===_?(d.type="checkbox",d.classList="buff-toggle",o.addEventListener("click",function(){let e=d.checked;e=!e,d.value=e,d.checked=e,a.stacks=e?1:0})):1<_&&(d.type="number",d.max=_,d.min=0,d.classList="buff-input",d.addEventListener("change",function(t){let e=t.target.valueAsNumber;a.stacks=0<e&&e<=_?e:0})),o.appendChild(s),o.appendChild(d),a.div=o,a.source_div=s,e.appendChild(o)}else{a.source_div.innerHTML="";let e=n[t].sources,o=e.length;for(let t=0;t<o;t++){let n="",r=e[t];n+=r.name,1<o&&t<o-1&&(n+=",");let i=document.createElement("p");i.textContent=n,a.source_div.appendChild(i)}}},s=function(t,a,i){let s=a.max_stacks;if(s){let l=i||a.name,p=data.localize[verminted.language][l]||t.replace(/_/g," ");if(!n[t]){let r=a.stat_buff,i=a.bonus||a.multiplier;n[t]={},n[t].sources=[],n[t].sources[0]={},n[t].sources[0].name=p,n[t].sources[0].name_id=l,n[t].source_lookup={},n[t].source_lookup[p]=!0,n[t].buff=[],n[t].buff[0]={},n[t].buff[0].stat_buff=r,n[t].buff[0].value=i,n[t].max_stacks=s,n[t].stacks=0,n[t].remove=function(){n[t].div&&(e.removeChild(n[t].div),delete n[t])},o[r]=o[r]||[];let c=o[r].length;o[r][c]=t}else if(!n[t].source_lookup[p]){let e=n[t].sources.length;n[t].sources[e]={},n[t].sources[e].name=p,n[t].sources[e].name_id=l,n[t].source_lookup[p]=!0}a.stat_buff&&(a.bonus||a.multiplier)&&r(t)}},l=function(){let e=Object.keys(n);for(let t=0;t<e.length;t++)n[e[t]].sources=[],n[e[t]].source_lookup={}};return a.refresh=function(){l();let e=t.items,a=verminted.global_buffs,r=Object.keys(a);for(let e=0;e<r.length;e++)s(r[e],a[r[e]]);if(t.career.name){let e=data.careers[t.career.name].passives;for(let t=0;t<e.length;t++)s(e[t].name,e[t])}for(let e=0;e<p.length;e++)if(p[e]&&"number"==typeof p[e].name)for(let t,a=0;a<p[e].buffs.length;a++)t=p[e].buffs[a],s(t.name,t,p[e].name);for(let t=0;t<e.length;t++)if(e[t].trait.name){let a=data.item.traits[e[t].trait.name];s(e[t].trait.name,a,a.name)}let c={},_=Object.keys(n);for(let e=0;e<_.length;e++){let t=_[e],a=n[t],r=a.sources;if(1>r.length)n[t].remove();else{let e=a.buff[0].stat_buff;c[e]=c[e]||[];let n=c[e].length;if(c[e][n]=t,"ranged_power_vs_armor_type"===e){let e=["power_vs_unarmoured","power_vs_armoured","power_vs_large","power_vs_frenzy"];for(let a,n=0;n<e.length;n++){a=e[n],c[a]=o[a]||[];let r=c[a].length;c[a][r]=t}}}}o=c},a.getModifier=function(e){let t=0;if(o[e])for(let a=0;a<o[e].length;a++){let r=o[e][a],i=n[r];0<i.stacks&&(t+=i.buff[0].value*i.stacks)}return t},a}(e.getElementsByClassName("buff-container")[0],t);return t.test=y,t.modal.setCloseCallback(t.refresh),function(){verminted.update_weapon[verminted.update_weapon.length]=g;let e=n.container,t=Object.keys(data.weapons).sort(),a=document.createDocumentFragment();for(let e=0,o=t.length;e<o;e++){let o=t[e],r=data.weapons[o].type,i=Object.keys(data.weapons[o].career);for(let e=0,t=i.length;e<t;e++){let t=i[e],a=r;"dr_slayer"===t&&"throwing_axes"===o&&(a="melee"),n.lookup[t]=n.lookup[t]||{},n.lookup[t][a]=n.lookup[t][a]||[];let s=n.lookup[t][a].length;n.lookup[t][a][s]=o}let s=document.createElement("div");s.classList="weapon-list-weapon-name js-button",s.setAttribute("data-weapon",o),s.textContent=o,n.weapon[o]={},n.weapon[o].div=s,a.appendChild(s)}e.appendChild(a)}(),function(){let t=e.getElementsByClassName("select-career")[0],n=document.createDocumentFragment(),o=Object.keys(data.careers).sort();for(let e,t=0,a=o.length;t<a;t++)e=document.createElement("option"),e.textContent=data.localize[verminted.language][data.careers[o[t]].name]||o[t],e.value=o[t],n.appendChild(e);t.appendChild(n),t.addEventListener("change",function(t){u(t.target.value)}),a=t}(),function(){let a=e.getElementsByClassName("career-and-gear")[0],n=t.items;n[0]={},n[0].container=a.getElementsByClassName("item-container")[0];let o=n[0].container.cloneNode(!0),r=0;for(;5>n.length;){0!==r&&(n[r]={},n[r].container=n[r].container||o.cloneNode(!0),1<r&&(n[r].container.textContent=data.careers.dr_ranger.equipment[r]),4===r&&n[r].container.classList.add("item-container-last")),n[r].property=[];for(let e,t=0;2>t;t++)e=document.createElement("select"),e.classList="select-property js-input",e.setAttribute("data-item-slot",r),e.setAttribute("data-property-slot",t),e.innerHTML=`<option selected disabled hidden>Property</option>`,e.addEventListener("change",function(t){let e=t.target.getAttribute("data-item-slot"),a=t.target.getAttribute("data-property-slot"),n=t.target.value;f(n,e,a)}),n[r].property[t]={},n[r].property[t].select=e,n[r].property[t].options=[],n[r].container.appendChild(e);for(let e,t=0;1>t;t++){e=document.createElement("select"),e.classList="select-trait js-input",e.innerHTML=`<option selected disabled hidden>Trait</option>`,n[r].trait={},n[r].trait.select=e,n[r].trait.options=[],n[r].trait.name=null;let t=n[r].trait;e.addEventListener("change",function(a){let e=a.target.value;t.name=e;data.item.traits[e];y.refresh()}),n[r].container.appendChild(e)}a.appendChild(n[r].container),r++}for(let e,t=0;2>t;t++)e=document.createElement("div"),e.classList="select-weapon js-button",e.setAttribute("data-weapon-select",t),n[t].weapon={},n[t].weapon.div=e,n[t].weapon.div.textContent=`Weapon ${t+1}`,n[t].container.classList.add("item-weapon"),n[t].container.prepend(e)}(),function(){let t=e.getElementsByClassName("talent-tree")[0],a=document.createDocumentFragment(),n=data.careers.dr_ranger.talent_tree.length;for(let e=0;e<n;e++){l[e]=[];let t=document.createElement("div");t.classList="talent-row";for(let a,n=0;3>n;n++)a=document.createElement("div"),a.classList="talent js-button",l[e][n]={},l[e][n].div=a,t.appendChild(a),a.addEventListener("mousedown",function(){h(e,n)});a.appendChild(t)}t.appendChild(a)}(),function(){let e=document.getElementsByClassName("copy-build")[0];e.addEventListener("click",function(){t.encode(e)});let a=TooltipControl(e);a.text`Copies a url for this build containing\r\nselected career, items, and talents.\r\n\r\nOnly works with valid combinations.`}(),function(){let e={},t=Object.keys(data.item.property_combos);for(let a=0,n=t.length;a<n;a++){e[t[a]]={};let n=data.item.property_combos[t[a]];for(let o=0,r=n.length;o<r;o++)e[t[a]][n[o][0]]=e[t[a]][n[o][0]]||{},e[t[a]][n[o][0]][n[o][1]]=!0,e[t[a]][n[o][1]]=e[t[a]][n[o][1]]||{},e[t[a]][n[o][1]][n[o][0]]=!0}n.property_combos=e}(),y.refresh(),m(),t.getMultipliers(),verminted.refresh[verminted.refresh.length]=t.refresh,verminted.update_weapon_list[verminted.update_weapon_list.length]=function(a){let e=t.career.name,o=Object.keys(n.weapon),r={};if(e){let t=a.target.getAttribute("data-weapon-select"),o=e,i=data.careers[o].equipment[t],s=n.lookup[o][i];for(let e=0,t=s.length;e<t;e++)r[s[e]]=!0}else for(let e=0,t=o.length;e<t;e++)r[o[e]]=!0;for(let e=0,t=o.length;e<t;e++)r[o[e]]?n.weapon[o[e]].div.classList.remove("hide"):n.weapon[o[e]].div.classList.add("hide")},verminted.do_not_open_build?window.setTimeout(function(){t.refresh()},100):t.modal.open(),t},WeaponListModal=function(){let t=ModalControl(document.getElementsByClassName("weapon-list-holder")[0]);return t.onClick=function(a){a.stopPropagation();let e=a.target,n=!0;for(;e&&e.classList;){if(e.classList.contains("weapon-list-holder")){n=!1;break}else if(e.getAttribute("data-weapon")){let a=e.getAttribute("data-weapon");t.clickCallback(a),n=!0;break}else e.classList.contains("select-weapon")&&(n=!1);e=e.parentNode}n&&t.close()},t},TooltipControl=function(e){if(verminted.tooltips[uniqueID(e)])return verminted.tooltips[uniqueID(e)];let t={},a=null,n=verminted.tooltip,o=n.children[0],r="pre",i=null;return t.open=function(){let t=e.getBoundingClientRect();o.textContent=i,o.style=`white-space: ${r};`,n.style.display="inline-block",n.style.left=t.right+n.offsetWidth+2>window.innerWidth?window.innerWidth-(n.offsetWidth+2)+"px":t.right-0+"px",n.style.top=t.bottom+"px"},t.close=function(){n&&(n.style.display="none"),clearTimeout(a)},t.bind=function(){e.addEventListener("mouseover",t.startTimer),e.addEventListener("mouseout",t.close)},t.startTimer=function(){verminted.mobile=window.mobilecheck(),verminted.mobile||(a=setTimeout(function(){t.open()},400))},t.text=function(e,t){"generated"===t&&(r="normal"),i=e},t.bind(),verminted.tooltips[uniqueID(e)]=t},compareConsole=function(t){var i=Math.round;function e(e){for(let t,n=0;n<e.length;n++)if(t=e[n].split`,`,c[t[0]]){let o=t[0],r=c[o];l[r]={};for(let t,o="infantry";n<e.length;){if(t=e[n].split`,`,"infantry"===o&&""===t[2]){o="armored",n++;continue}else if("armored"===o&&""===t[2])break;let i=a(r,t[1]);"hevay attack 3"===t[1]&&(i="heavy_attack_right_up"),l[r][i]=l[r][i]||{},l[r][i][o]=l[r][i][o]||{},l[r][i][o].neither=l[r][i][o].neither||0,l[r][i][o].headshot=l[r][i][o].headshot||0,l[r][i][o].critical=l[r][i][o].critical||0,l[r][i][o].both=l[r][i][o].both||0,l[r][i][o].neither+=parseFloat(t[3]),l[r][i][o].headshot+=parseFloat(t[4]),l[r][i][o].critical+=parseFloat(t[5]),l[r][i][o].both+=parseFloat(t[6]),n++}}}function a(e,t){t=t.toLowerCase(0);let a,n=data.weapons[e].actions,o=function(e,t){let a="neutral",o=0;for(;o<t;){let t=n[a].attack_speed,r=Object.keys(t).sort();for(let t=0;t<r.length;t++)if(0<=r[t].search(e)){if("heavy"===e&&0<=r[t].search("heavy_attack_charged"))continue;a=r[t]}o++}return a};if(0<=t.search("push"))a=n.push.push_attack;else if(0<=t.search("light")){let e=parseInt(t.charAt(t.search(/[0-9]/)),10);a=o("light",e)}else if(0<=t.search("charged")){let e=parseInt(t.charAt(t.search(/[0-9]/)),10)||1;a=o("heavy_attack_charged",e)}else if(0<=t.search("heavy")){let e=parseInt(t.charAt(t.search(/[0-9]/)),10)||1;a=o("heavy",e)}return a}function n(){let e=Object.keys(l);for(let t,a=0;a<e.length;a++){t=e[a],p[t]={};let n=Object.keys(l[t]);for(let e=0;e<n.length;e++){let a=n[e],o=data.weapons[t].actions[a];if(!o)continue;let r={},s=[];o.damage_profile_left?(s[0]=o.damage_profile_left,s[1]=o.damage_profile_right):s[0]=o.damage_profile_target||o.damage_profile;for(let e=0;e<s.length;e++){let a=s[e],n=verminted.damage.compileProfile(t,a,"raw");for(let e,t=0;t<_.length;t++)e=_[t],r[e]=r[e]||{},r[e].neither=r[e].neither||0,r[e].headshot=r[e].headshot||0,r[e].critical=r[e].critical||0,r[e].both=r[e].both||0,r[e].neither+=i(4*n[e].neither[0])/4,r[e].headshot+=i(4*n[e].headshot[0])/4,r[e].critical+=i(4*n[e].critical[0])/4,r[e].both+=i(4*n[e].both[0])/4}p[t][a]=r}}r(o)}function o(e,t){let a=document.createElement("div");if(a.textContent=e,a.classList="js-button",0===t.length)a.classList.add("console-compare-weapon-passed");else{a.classList.add("console-compare-weapon-failed");let e=document.createElement("div");e.classList="console-compare-weapon-container hide";for(let a=0;a<t.length;a++){let n=t[a],o=document.createElement("div");o.textContent=n.action+" "+n.armor+" "+n.hit+" - estimate: "+n.estimate+" / actual: "+n.actual,e.appendChild(o)}a.appendChild(e),a.addEventListener("click",function(){e.classList.toggle("hide")})}return a}function r(e){let t=document.getElementById("SPA"),a=document.getElementsByClassName("console-compare");for(let n=0;n<a.length;n++)t.removeChild(a[n]);let n=document.createElement("div");n.classList="console-compare";let o=Object.keys(p);for(let t=0;t<o.length;t++){let a=o[t],r=[],i=Object.keys(p[a]);for(let e,t=0;t<i.length;t++){e=i[t];for(let t,n=0;n<_.length;n++){t=_[n];for(let n=0;n<constants.hit_types.length;n++){let o=constants.hit_types[n],i=p[a][e][t][o],s=l[a][e][t][o];if(s!==i){passed=!1;let a=r.length;r[a]={},r[a].estimate=i,r[a].actual=s,r[a].action=e,r[a].armor=t,r[a].hit=o}}}}n.appendChild(e(a,r))}let r=document.createElement("div");r.classList="console-compare-close-button js-button",r.textContent="Close",n.appendChild(r),t.appendChild(n),r.addEventListener("click",function(){document.getElementById("SPA").removeChild(n)})}verminted.platform=!0,verminted.difficulty="legend",verminted.power_level=785;let s=t.target.files[0],l={},p={},c={Axe:"1h_axe","Axe and Falchion":"axe_and_falchion",Falchion:"falchion",Flail:"flail",Rapier:"rapier","Two-handed Sword":"2h_sword",Crowbill:"crowbill",Dagger:"dagger","Fire Sword":"flame_sword",Mace:"mace",Sword:"1h_sword"},_=["infantry","armored"],d=new FileReader;d.onload=function(){e(d.result.split(/\r\n/g)),n()},d.readAsText(s)};function reverseLookup(e){if(data.weapons[e].lookup)return!1;let t={},a=data.weapons[e].actions,n=Object.keys(a),o={};o.lookup={},o.lookup["default"]=!0,o.current=0,o.buffer=[],o.buffer[0]="default",o.future=o.current+1;let r=function(s){t[s]={};for(let e,r=0,i=n.length;r<i;r++){if(e=a[n[r]],e.attack_speed&&e.attack_speed.parent){let a=Object.keys(e.attack_speed.parent);for(let i=0,l=a.length;i<l;i++)o.lookup[a[i]]||(o.lookup[a[i]]=!0,o.buffer[o.future]=a[i],o.future++),s===a[i]&&(t[s][n[r]]=e.attack_speed.parent[a[i]])}if(e.attack_speed.child){let t=Object.keys(e.attack_speed.child);for(let e=0,a=t.length;e<a;e++)o.lookup[t[e]]||(o.lookup[t[e]]=!0,o.buffer[o.future]=t[e],o.future++)}}o.current++,o.buffer[o.current]?(s=o.buffer[o.current],r(s)):data.weapons[e].block&&(t.block=t.block||{},t.block.push=data.weapons[e].block.min_hold,data.weapons[e].push&&(t.push=t.push||{}),t.block_cancel_end&&delete t.block_cancel_end,t.anim_cancel&&delete t.anim_cancel)};return r(o.buffer[0]),data.weapons[e].lookup=t,!0}function expandWeaponInfo(e,t,a){var n=Math.round;let o=constants.hit_types,r=constants.armor_types,i=(""+verminted.platform+t+concateObject(verminted.build.weapon[t])).hashCode(),s=a.getAttribute("data-hash");if(i===s)return;a.setAttribute("data-hash",i);let l={neither:"normal",headshot:"headshot",critical:"critical",both:"both"},p=a;p.getElementsByClassName("weapon-title")[0].textContent=e;let c=data.weapons[e],_=Object.keys(c.actions).sort(),d=p.getElementsByClassName("attack"),m=verminted.damage,u=-1;"ranged"===data.weapons[e].type&&(u=0);for(let s=0,i=d.length;s<i;s++)if(s<_.length){let a=c.actions[_[s]].attack_speed,i=d[s].getElementsByClassName("attack-modifiers")[0];if(d[s].getElementsByClassName("weapon-attack-name")[0].textContent=_[s],i.textContent="",a){let e=d[s].getElementsByClassName("svg-attack-speed")[0],t=e.getElementsByTagName("use")[0],o=TooltipControl(t),r="Chain to:",i=Object.keys(a).sort().reverse();for(let e,t=0,o=i.length;t<o;t++)e=a[i[t]],e=n(100*e)/100,r+="\r\n"+e+"\t"+i[t];o.text(r)}let p={},u=d[s].getElementsByClassName("damage-table")[0];c.actions[_[s]].damage_profile?p[0]=c.actions[_[s]].damage_profile:(p[0]=c.actions[_[s]].damage_profile_left,p[1]=c.actions[_[s]].damage_profile_right);for(let a=0;6>a;a++){3==a&&(a=4);let i=a,s=a;5==a&&(i=1,s=5);for(let i=0;4>i;i++){let s,c;s=1==i||3==i?"headshot":null,c=!!(1<i);let _=!1,d=[],h=null,g=u.getElementsByClassName(constants.armor_types[a]+" "+constants.hit_types[i])[0],f=TooltipControl(g);for(let s,c=0;5>c;c++){s=0;for(let l=0,_=Object.keys(p).length;l<_;l++){if(data.profiles[p[l]]){let _=m.getDamage(e,p[l],t,r[a],o[i],c);s+=n(4*_)/4}d[c]=s}let u;!0==_||0<c&&d[c]>d[c-1]?(u=0,_=!0):0<d[c]%1?u=d[c].toFixed(2):u=d[c],0==c&&(g.textContent=d[0],h=constants.armor_types[a]+" - "+l[constants.hit_types[i]],h+="\r\nTargets:"),0<u&&(h+="\r\n  "+(c+1)+": "+u)}f.text(h)}}d[s].classList.remove("hide")}else d[s].classList.add("hide")}function assembleDiv(e,t,a,n){let o=n?document.createElement(n):document.createElement("div");return o.classList=e,a&&(o.textContent=a),t.appendChild(o),o}function assembleWeaponSheet(){var e={};e.table=document.createElement("div"),e.table.id="weapon-data",e.table.classList="hide",e.attack={};for(var t=0;16>t;t++){let a=assembleDiv("attack-container",e.table);e.attack[t]=assembleDiv("attack-type",a).textContent;let n=assembleDiv("damage-table",a);e.damage={};for(let t=0;5>t;t++){e.damage[constants.armor_types[t]]={};for(let a,o=0;4>o;o++)a=assembleDiv(constants.armor_types[t]+" "+constants.hit_types[o],n).textContent,e.damage[constants.armor_types[t]][constants.hit_types[o]]=a}}return e}function assembleWeapon(e,t,a,n,o){var r=o.weapons[t[n]],i="weapon-name";"ranged"===r.type&&(i="weapon-name weapon-ranged");var s=assembleDiv(i+" weapon-holder",e,t[n]);if(s.setAttribute("data-weapon",t[n]),r.career){let e=Object.keys(r.career),t=constants.characters,a={},n=!1;for(let o,r=0,i=e.length;r<i;r++)o=t[e[r]],o&&!a[o]&&(n?n+=","+o:n=o,a[o]=!0);s.setAttribute("data-character",n)}return s}function populateElements(){var e=document.createDocumentFragment(),t=document.getElementsByClassName("weapon-list")[0],a=Object.keys(data.weapons).sort(),n=constants.characters;let o=document.getElementsByClassName("attack")[0];for(let e=0;2>e;e++){let t="[data-weapon-slot='"+e+"']",a=document.querySelector(t).getElementsByClassName("attacks-container")[0];for(let t,n=0;n<9+e;n++)t=o.cloneNode(!0),a.appendChild(t)}}function populateAttackCombo(){let e={},t=Object.keys(constants.mob_lookup),a=constants.hit_types,n=constants.armor_types,o=verminted.max_targets,r=function(e,t){let n={},r=document.createElement("div"),i=document.createElement("div");i.classList.add("mob-name"),i.textContent=e,n.mob_name=i,r.appendChild(i),n.targets=[];for(let i,s=0;s<o;s++){i=document.createElement("div"),i.classList.add("breakpoint-row"),n.targets[s]={},n.targets[s].row=i,n.targets[s].callback=void 0,i.addEventListener("click",function(){"function"==typeof n.targets[s].callback&&n.targets[s].callback()});for(let e=0;e<a.length;e++){let t=a[e],o=document.createElement("div");o.classList.add(t),n.targets[s][t]=o,i.appendChild(o)}r.appendChild(i)}let s=document.createElement("div");s.classList="extra-target-row hide",n.extra_targets=s,r.appendChild(s),n.container=r;let l=verminted.callback_on_data.length;return verminted.callback_on_data[l]=function(){let o,i=data.breeds,s=data.breeds[e],l=s.primary_armor||s.armor;o=s.hitzone_primary_armor?s.hitzone_primary_armor.head:s.hitzone_armor?s.hitzone_armor.head:l;for(let e=0;e<n.targets.length;e++){n.targets[e].row;for(let t=0;t<a.length;t++){let r,i=a[t],s=n.targets[e][i];r="headshot"===i||"both"===i?o:l,s.classList.add(r)}}t.appendChild(r)},n};e.weapon=[];let s=document.getElementsByClassName("weapon-breakpoints-container");for(let a,n=0;n<s.length;n++){a=s[n].getElementsByClassName("weapon-breakpoints")[0],e.weapon[n]={},e.weapon[n].container=a,e.weapon[n].name_div=s[n].getElementsByClassName("weapon-name")[0];let o=document.createElement("div");o.classList.add("breakpoint-plate");let i={};for(let e,a=0,n=t.length;a<n;a++)e=r(t[a],o),i[t[a]]=e;e.weapon[n].breeds=i;let l=s[n].getElementsByClassName("weapon-breakpoints-attacks")[0],p=!0;e.weapon[n].name_div.addEventListener("click",function(){p=!p,p?(l.classList.remove("hide"),o.classList.remove("hide")):(l.classList.add("hide"),o.classList.add("hide"))}),a.appendChild(o)}e.combo={},e.combo.container=document.getElementsByClassName("attack-combo")[0],e.combo.info={},e.combo.info.container=document.createElement("div"),e.combo.info.container.classList="combo-info hide",e.combo.info.attack_speed=document.createElement("div"),e.combo.info.damage_box={},e.combo.info.damage_box.container=document.createElement("div"),e.combo.info.damage_box.dps={},e.combo.info.damage_box.container.classList.add("combo-damage-box"),e.combo.info.container.appendChild(e.combo.info.attack_speed),e.combo.info.container.appendChild(e.combo.info.damage_box.container),e.combo.breeds={};let l=document.createElement("div");l.classList="breakpoint-plate hide";let p={};for(let e,a=0,n=t.length;a<n;a++)e=r(t[a],l),p[t[a]]=e;return e.combo.breeds=p,e.combo.container.appendChild(e.combo.info.container),e.combo.container.appendChild(l),e}let VermBigInt=function(){var e=Math.ceil,t=Math.floor;let a={};const n=1e5;a.printraw=function(e){let t="";for(let a,n=0;n<e.length;n++){for(a=""+e[n];5>a.length&&n<e.length-1;)a="0"+a;t=a+t}console.log(t)};let o=function(e,t){let a,o,r=[];e.length>t.length?(a=e,o=t):(o=e,a=t);let s=0;for(let l,p=0;p<a.length||0<s;p++)l=(a[p]||0)+(o[p]||0)+s,l>=n?(s=1,l-=100000*s,r[p]=l):(s=0,r[p]=l);return r},r=function(e,t){let a,n,o=[];e.length>=t.length?(a=e,n=t):(n=e,a=t);let r=0;for(let n,s=0;s<a.length;s++)n=(e[s]||0)-((t[s]||0)+r),0>n?"number"==typeof e[s+1]&&(r=1,n+=100000,o[s]=n):0<n?(r=0,o[s]=n):e[s+1]?(r=0,o[s]=0):r=0;return o},i=function(e,t){if(e.length>t.length)return!0;if(e.length===t.length){for(let a=0;a<e.length;a++){let n=e.length-1-a,o=e[n],r=t[n];if(o>r)return!0;if(o<r)return!1}return!0}return!1},s=function(e,a){let o=[0],r=0,s=0;for(let l=0;l<e.length;l++){let i=e.length-1-l,p=e[i],c=p/a,_=r;if(s=c%1+_%1,r=s*n,r>n){let e=t(r/n);r-=e*n,s-=e,_+=e}let d=c-c%1+(_-_%1);0<d&&(o[i]=d)}return[o,s]};return a.new=function(e){let a=t(e),o=[],r=function(e,a,o){for(;;)if(a>=n){let i=t(a/n),s=r(e,i,o+1);a-=100000*s}else{return e[o]=a,a}};return r(o,a,0),o},a.add=function(e,t){let a=o(e,t);return a},a.sub=function(e,t){let a=r(e,t);return a},a.mul=function(e,t){let a=e;for(let n=1;n<t;n++)a=o(a,e);return(0===a.length||0===t)&&(a=[],a[0]=0),a},a.div=function(t,a){let n=0,o=t;if("object"==typeof a)for(;i(o,a)&&30>n;)o=r(o,a),n++;else{let r=s(t,a);o=r[0],n=e(r[1]*a)%a}return[o,n]},a};function VermintedCompress(){let e={},t={career:15,talent1:3,talent2:3,talent3:3,talent4:3,talent5:3,talent6:3,wep1:10,wep2:8,wep1props:27,wep2props:27,neckprops:20,charmprops:25,trinketprops:21,wep1traits:7,wep2traits:7,necktraits:5,charmtraits:5,trinkettraits:3},a=["career","talent1","talent2","talent3","talent4","talent5","talent6","wep1","wep2","wep1props","wep2props","neckprops","charmprops","trinketprops","wep1traits","wep2traits","necktraits","charmtraits","trinkettraits"],n=VermBigInt();try{BigInt(4),e.big_int=!0}catch{e.big_int=!1,BigInt=function(e){return e}}var o={_Rixits:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_",toNumber:function(t){var a=0;t=t.split("");for(var n=0;n<t.length;n++)a=64*a+this._Rixits.indexOf(t[n]);return a},fromBigInt:function(e){for(var t,a="",n=e;t=+(n%BigInt(64)),a=this._Rixits.charAt(t)+a,n/=BigInt(64),n!=BigInt(0););return a},fromVBI:function(e){var t,a="";let o=0;for(var r=e;;){let e=n.div(r,64);if(t=e[1],a=this._Rixits.charAt(t)+a,r=e[0],1===r.length&&0===r[0]||0===r.length||15<o)break;o++}return a},toBigInt:function(t){var a=BigInt(0);t=t.split("");for(var n=0;n<t.length;n++)a=a*BigInt(64)+BigInt(this._Rixits.indexOf(t[n]));return a},toVBI:function(t){var a=[0];t=t.split("");for(var o=0;o<t.length;o++)a=n.add(n.mul(a,64),[this._Rixits.indexOf(t[o])]);return a}};let r=function(r){let s=10,l="";if(e.big_int){let e=BigInt(1),n=BigInt(0);for(let o=0;o<a.length;o++)n+=e*BigInt(r[o]),e*=BigInt(t[a[o]]);l=o.fromBigInt(n);let p=l.length;for(let e=0;e<s-p;e++)l="0"+l}else{let e=[1],p=[0];for(let o,s=0;s<a.length;s++){o=n.mul(e,r[s]),p=n.add(p,o);let i=n.mul(e,t[a[s]]);e=i}l=o.fromVBI(p);let c=l.length;for(let e=0;e<s-c;e++)l="0"+l}return l},i=function(r){let s=Array(a.length);if(e.big_int){let e=o.toBigInt(r),n=BigInt(1);for(let e=0;e<a.length;e++)n*=BigInt(t[a[e]]);for(let o,r=0;r<a.length;r++){o=a.length-1-r,n/=BigInt(t[a[o]]);let i=e/n%BigInt(t[a[o]]);s[o]=+i,e%=n}}else{let e=o.toVBI(r),l=[[1]],p=[1];for(let e=0;e<a.length;e++)p=n.mul(p,t[a[e]]),l[e+1]=p;for(let t,o=0;o<a.length;o++){t=a.length-1-o,e=n.div(e,l[t]);let r=e[1];s[t]=r,e=e[0]}}return s};return e.encode=function(e){let t=vermintedLookup(63),a=e.career.name,n=[],o=[],s=[];for(let t=0;t<e.items.length;t++)o[t]=e.items[t].type,s[t]="dr_slayer"===a&&"throwing_axes"===e.items[t].name?"melee":o[t];n[0]=t.careers[a],n[1]=e.talents[0].col,n[2]=e.talents[1].col,n[3]=e.talents[2].col,n[4]=e.talents[3].col,n[5]=e.talents[4].col,n[6]=e.talents[5].col,n[7]=t.weapons[a][s[0]][e.items[0].name],n[8]=t.weapons[a][s[1]][e.items[1].name],n[9]=t.properties[o[0]][e.items[0].property[0].name][e.items[0].property[1].name],n[10]=t.properties[o[1]][e.items[1].property[0].name][e.items[1].property[1].name],n[11]=t.properties[o[2]][e.items[2].property[0].name][e.items[2].property[1].name],n[12]=t.properties[o[3]][e.items[3].property[0].name][e.items[3].property[1].name],n[13]=t.properties[o[4]][e.items[4].property[0].name][e.items[4].property[1].name],n[14]=t.traits[e.items[0].trait_type][e.items[0].trait.name],n[15]=t.traits[e.items[1].trait_type][e.items[1].trait.name],n[16]=t.traits[e.items[2].trait_type][e.items[2].trait.name],n[17]=t.traits[e.items[3].trait_type][e.items[3].trait.name],n[18]=t.traits[e.items[4].trait_type][e.items[4].trait.name];let l=r(n);return l},e.decode=function(e){let t=vermintedLookup(63),a=t.index;for(let t=0;t<e.length;t++)e.charAt(t);let n=i(e),o={};o.talents=[],o.items=[];let r=a.careers[n[0]],s=[],l=[],p=data.careers[r].equipment;for(let t=0;t<p.length;t++)l[t]=p[t],o.items[t]={};let c=a.weapons[r][l[0]].length;s[0]=a.weapons[r][l[0]][n[7]%c],c=a.weapons[r][l[1]].length,s[1]=a.weapons[r][l[1]][n[8]%c];let _=[];for(let t=0;t<p.length;t++)_[t]=data.weapons[s[t]]?data.weapons[s[t]].traits:l[t];o.career=r,o.talents[0]=n[1],o.talents[1]=n[2],o.talents[2]=n[3],o.talents[3]=n[4],o.talents[4]=n[5],o.talents[5]=n[6],o.items[0].weapon=s[0],o.items[1].weapon=s[1];let d=9;for(let t=0;5>t;t++){let e=t+d,i=a.properties[l[t]].length,p=l[t];"dr_slayer"===r&&"throwing_axes"===s[t]&&(p="ranged"),o.items[t].properties=a.properties[p][n[e]%i]}d=14;for(let t=0;5>t;t++){let e=t+d,r=a.traits[_[t]].length;o.items[t].trait=a.traits[_[t]][n[e]%r]}return o},e}function vermintedLookup(e){let t={},a={};var n=Object.keys(data.careers).sort(),o=Object.keys(data.weapons).sort(),r=Object.keys(data.item.property_combos),s=Object.keys(data.item.trait_combos);t.careers={},a.careers=[];for(let o=0;o<n.length;o++)t.careers[n[o]]=o,a.careers[o]=n[o];t.weapons={},a.weapons={};for(let n,r=0;r<o.length;r++){if(n=data.weapons[o[r]].type,1>e)var l=Object.keys(data.weapons[o[r]].career);else var l=Object.keys(data.weapons[o[r]].career).sort();for(let e=0;e<l.length;e++){let i=l[e],s=n;"dr_slayer"===i&&"throwing_axes"===o[r]&&(s="melee"),t.weapons[i]=t.weapons[i]||{},a.weapons[i]=a.weapons[i]||{},t.weapons[i][s]=t.weapons[i][s]||{},a.weapons[i][s]=a.weapons[i][s]||[];let p=Object.keys(t.weapons[i][s]).length;t.weapons[i][s][o[r]]=p,a.weapons[i][s][p]=o[r]}}t.properties={},a.properties={};for(let n,o=0;o<r.length;o++){n=r[o],t.properties[n]={},a.properties[n]=[];let e=data.item.property_combos[r[o]];for(let o=0;o<e.length;o++)t.properties[n][e[o][0]]=t.properties[n][e[o][0]]||{},t.properties[n][e[o][0]][e[o][1]]=o,t.properties[n][e[o][1]]=t.properties[n][e[o][1]]||{},t.properties[n][e[o][1]][e[o][0]]=o,a.properties[n][o]=[e[o][0],e[o][1]]}t.traits={},a.traits={};for(let n=0;n<s.length;n++){t.traits[s[n]]={},a.traits[s[n]]=[];let o=data.item.trait_combos[s[n]].sort();1>e&&(o=data.item.trait_combos[s[n]]);for(let e=0;e<o.length;e++)t.traits[s[n]][o[e]]=e,a.traits[s[n]][e]=o[e]}return t.index=a,t}function VermintedStorage(){let e,t={};return t.init=function(){e=JSON.parse(localStorage.getItem("vermintools")),e||(e={},e.builds=[])},t.get=function(){return e},t}function prepPage(){constants=InitConstants();let e=document.getElementsByClassName("appended-link");for(let t,a=0;a<e.length;a++)t=e[a].href.split("?")[1],e[a].href=window.location.search+"?"+t;let t=document.getElementsByClassName("select-difficulty")[0],a=document.createDocumentFragment(),n=Object.keys(constants.difficulties);for(let e=0;e<n.length;e++){let t=n[e],o=document.createElement("option");o.textContent=t,o.value=t,t===verminted.difficulty&&o.setAttribute("selected",!0),a.appendChild(o)}t.appendChild(a),t.addEventListener("change",verminted.set_difficulty),verminted.callback_on_data=[],verminted.update_weapon_list=[],verminted.update_weapon=[],verminted.update_on_build=[],verminted.tooltip=document.getElementsByClassName("tooltip")[0],verminted.tooltips={},verminted.weapon_buttons={},verminted.weapon_slot={};let o=document.getElementsByClassName("select-page");for(let e=0,t=o.length;e<t;e++)o[e].addEventListener("click",function(t){pageSelection(t.target)});let r=document.getElementsByClassName("build-button");for(let e=0,t=r.length;e<t;e++)r[e].addEventListener("click",function(t){verminted.build.modal.open(),t.stopPropagation()});let s=document.getElementsByClassName("toggle-hbfs");for(let e=0;e<s.length;e++){s[e].addEventListener("change",verminted.set_harder_better);let t=TooltipControl(s[e]);t.text`Harder, Better, Faster, Stronger\r\ndoubles elites' hp`}let l=document.getElementsByClassName("select-headshot-percent")[0];l.addEventListener("change",function(t){let e=t.target.valueAsNumber;e=100<e?100:0<e?e:0,l.value=e,verminted.combo_breakpoints.headshot_chance=e/100,verminted.build.refresh()});let p=TooltipControl(l);p.text`Percentage of hits that\r\nare headshots for DPS`;let c=document.getElementsByClassName("resource-title");for(let e=0;e<c.length;e++){let t=c[e],a=function(){let e=t.parentNode,a=t.parentNode.parentNode.children;for(let t,n=0;n<a.length;n++)t=a[n],t!==e&&t.classList.toggle("hide")};a(),t.addEventListener("click",a)}let _=populateAttackCombo();verminted.combo_breakpoint_table=_.combo,verminted.weapon_breakpoint_table=[],verminted.weapon_breakpoint_table[0]=_.weapon[0],verminted.weapon_breakpoint_table[1]=_.weapon[1],verminted.weapon_attack_breakpoints=[];for(let e=0;e<verminted.weapon_breakpoint_table.length;e++)verminted.weapon_attack_breakpoints[e]=AttackBreakpoints(verminted.weapon_breakpoint_table[e],e);verminted.combo_breakpoints=ComboBreakpoints(verminted.combo_breakpoint_table),waitForData()}function waitForData(){verminted.finished_loading?finishPage():setTimeout(waitForData,5)}function finishPage(){document.getElementById("build").prepend(data.vermintide+" ");for(let e=0;e<verminted.callback_on_data.length;e++)verminted.callback_on_data[e]();verminted.compression=VermintedCompress();let e=window.location.search;if(e){let a=e.split("?");for(let e,n=0;n<a.length;n++){e=a[n];var t;"shadeult"===e?(verminted.temp_shade_ult=!0,pageSelection(document.getElementsByClassName("select-page")[1])):"compareconsole"===e?(document.getElementsByClassName("select-file")[0].addEventListener("change",compareConsole),document.getElementsByClassName("select-file")[0].classList.remove("hide")):"dontopenbuild"===e?verminted.do_not_open_build=!0:10===e.length&&(t=a[n])}}verminted.global_buffs={witch_hunter_captain_ultimate:{name:"witch_hunter_captain_ultimate",stat_buff:"crit_chance",max_stacks:1,bonus:.25},markus_mercenary_passive:data.careers.es_mercenary.passives[0],markus_huntsman_passive_crit_aura:data.careers.es_huntsman.passives[3],trinket_grenade_damage_taken:data.item.traits.trinket_grenade_damage_taken,defence_debuff_enemies:data.careers.dr_slayer.talent_tree[1][2].buffs[0],strength_potion:{name:"strength_potion",stat_buff:"has_power_boost",max_stacks:1,multiplier:1},speed_potion:{name:"speed_potion",stat_buff:"attack_speed",max_stacks:1,multiplier:.5}};let a=Object.keys(data.globals);for(let e=0,t=a.length;e<t;e++)constants[a[e]]=data.globals[a[e]];let n=document.getElementsByClassName("input-power-level");for(let e=0;e<n.length;e++)n[e].value=verminted.power_level-constants.starting_power_level,n[e].addEventListener("change",verminted.set_power_level);populateElements(),verminted.weapon_list=WeaponListModal(),verminted.damage=WeaponDamage(),verminted.attack_chain=AttackChain(document.getElementsByClassName("chain-attack-container")[0]),verminted.build=BuildBuild();let o=document.getElementsByClassName("select-weapon");for(let e=0,t=o.length;e<t;e++){let t=uniqueID(o[e]),a=verminted.tooltips[t];verminted.weapon_buttons[t]=WeaponSelection(o[e]),verminted.weapon_slot[e]=document.getElementsByClassName("weapon-attacks")[e],verminted.tooltips[t]=TooltipControl(o[e]),verminted.tooltips[t].text("Weapon "+(e+1))}verminted.update_weapon[verminted.update_weapon.length]=expandWeaponInfo,t&&verminted.build.decode(t);let r=["skaven_slave","skaven_clan_rat","chaos_fanatic","chaos_marauder","beastmen_gor","beastmen_ungor_archer","skaven_plague_monk","chaos_berzerker","skaven_storm_vermin","beastmen_bestigor","chaos_raider","chaos_warrior","chaos_vortex_sorcerer","chaos_corruptor_sorcerer","skaven_poison_wind_globadier","skaven_gutter_runner","skaven_warpfire_thrower","skaven_ratling_gunner","skaven_pack_master","beastmen_standard_bearer","skaven_rat_ogre","skaven_stormfiend","chaos_spawn","chaos_troll","chaos_exalted_champion_warcamp","skaven_storm_vermin_warlord","chaos_exalted_sorcerer","chaos_exalted_champion_norsca","chaos_spawn_exalted_champion_norsca","skaven_stormfiend_boss","skaven_grey_seer"],i=["recruit","veteran","champion","legend","cataclysm","cataclysm_2","cataclysm_3"],s=document.getElementsByClassName("mob-hp-list")[0];for(let e,t=0;t<r.length;t++){e=document.createElement("p"),e.style="display:inline-block;white-space:pre-wrap;";let a="",o=data.breeds[r[t]];for(let e=0;e<i.length;e++)if("number"==typeof o.max_health[i[e]]){let t=o.max_health[i[e]].toString(),n=t.replace(".","").length,r="";r+=t+"&#09;",4>n&&(r+="&#09;"),a+=r}e.innerHTML=a,e.textContent+=" // "+r[t],s.appendChild(e)}}window.onpopstate=function(e){let t=e.state,a=t.build.build_code;a&&verminted.build.decode(t.build.build_code)};