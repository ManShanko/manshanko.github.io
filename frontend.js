"use strict";function DefaultSettings(){var t={},a=function(){var e={power_level:t.power_level,difficulty:t.difficulty,language:t.language},a=JSON.parse(localStorage.getItem("vermintools"))||{};a.settings=e,localStorage.setItem("vermintools",JSON.stringify(a))},n=JSON.parse(localStorage.getItem("vermintools"))||{},o=n.settings||{};t.refresh=[];var r=function(){for(var e=0;e<t.refresh.length;e++)t.refresh[e]()};return t.max_targets=5,t.anim_cancel=.05,t.power_level=o.power_level||835,t.set_power_level=function(n){var e=n.target,o=e.valueAsNumber;if(isNaN(o))throw"power_level is NaN!";600<o?(o=600,e.value=600):15>o&&(o=15,e.value=15),t.power_level=o+constants.starting_power_level,r(),a()},t.difficulty=o.difficulty||"cataclysm",t.set_difficulty=function(n){var e=n.target,o=e.value;if(!constants.difficulties[o])throw"difficulty is not registered!";else t.difficulty=o,r();a()},t.harder_better=!1,t.set_harder_better=function(a){var e=!t.harder_better;a.target.value=e,t.harder_better=e,r()},t.platform=!1,t.set_platform=function(a){var e=a.target,n=e.value;t.platform="console"==n,t.difficulty="legend",r()},t.profiles={},t.language="en",t.set_language=function(n){var e=n.target.value;t.language=e,a(),location.reload()},t.link="manshanko.github.io",t}var verminted=DefaultSettings();function InitConstants(){return{armor_types:["infantry","armored","monster","friendly_fire","berserker","superarmored"],armor_lookup:{infantry:0,armored:1,monster:2,friendly_fire:3,berserker:4,superarmored:5},hit_types:["neither","headshot","critical","both"],attack_types:["light","push","heavy","dot"],dual_profile:["damage_profile_right","damage_profile_left"],characters:{bw_scholar:"sienna",bw_adept:"sienna",bw_unchained:"sienna",es_mercenary:"kruber",es_huntsman:"kruber",es_knight:"kruber",dr_ranger:"bardin",dr_ironbreaker:"bardin",dr_slayer:"bardin",we_waywatcher:"kerillian",we_maidenguard:"kerillian",we_shade:"kerillian",wh_captain:"saltzpyre",wh_bountyhunter:"saltzpyre",wh_zealot:"saltzpyre"},mob_lookup:{skaven_slave:"infantry",skaven_clan_rat:"infantry",chaos_fanatic:"infantry",chaos_marauder:"infantry",beastmen_gor:"infantry",beastmen_ungor_archer:"infantry",skaven_plague_monk:"berserker",chaos_berzerker:"berserker",skaven_storm_vermin:"armored",beastmen_bestigor:"armored",chaos_raider:"infantry",chaos_warrior:"superarmored",chaos_vortex_sorcerer:"infantry",chaos_corruptor_sorcerer:"infantry",skaven_poison_wind_globadier:"infantry",skaven_gutter_runner:"infantry",skaven_warpfire_thrower:"armored",skaven_ratling_gunner:"armored",skaven_pack_master:"monster",beastmen_standard_bearer:"superarmored"},elites:{beastmen_bestigor:!0,skaven_plague_monk:!0,chaos_berzerker:!0,skaven_storm_vermin:!0,chaos_raider:!0,chaos_warrior:!0},difficulties:{cataclysm:!0,cataclysm_2:!0,cataclysm_3:!0,legend:!0,champion:!0,veteran:!0,recruit:!0}}}var constants=InitConstants(),UID=0;function uniqueID(e){if(e.getAttribute("data-id"))return e.getAttribute("data-id");UID++;var t=UID;return e.setAttribute("data-id",t),t}window.mobilecheck=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},String.prototype.hashCode=function(){var e,t,a=0;if(0===this.length)return a;for(e=0;e<this.length;e++)t=this.charCodeAt(e),a=(a<<5)-a+t,a|=0;return a};var concateObject=function(e){var t="";if("object"==typeof e){var a,n=0;if(e.isArray){n=e.length;for(var o=0;o<n;o++)a[o]=o}else a=Object.keys(e),n=a.length;for(var o=0;o<n;o++)t+=concateObject(e[a[o]])}else t+=e;return t};function pageSelection(e){for(var t=document.getElementsByClassName(e.getAttribute("data-slot"))[0],a=document.getElementsByClassName("main-page"),n=0;n<a.length;n++)a[n]==t?a[n].classList.remove("hide"):a[n].classList.add("hide")}var GenericMath=function(){var e=Math.min,t={};return t.clamp=function(e,t,a){var n=0;return n=e>=a?a:e<=t?t:e,n},t.getPowerPercentage=function(e){var t=constants.min_power_level,a=constants.max_power_level;return(e-t)/(a-t)},t.scalePower=function(t){var a=verminted.power_level,n=a,o=verminted.difficulty;"deathwish"===o&&(o="legend");var r=constants.difficulty_settings[o],i=r.power_level_cap,s=constants.max_power_level_cap,l=r.power_level_max_target;if(!(i<n))n=e(n,i);else if(l){var p=n-i;n=i+l*p/(s-i)}var c=n;if(constants.min_power_level_cap<=n){var d,_=100,m=10;if(constants.min_power_level_cap+_<=n)d=(n-constants.min_power_level_cap)*(constants.power_level_diff_ratio[t]-1)/(m-1);else{var u=50*((c-200)/_-1);d=(n+u-constants.min_power_level_cap)*(constants.power_level_diff_ratio[t]-1)/(m-1)}c=constants.min_power_level_cap+d}else c=n;return c},t.getPower=function(e,a,n,o,r){var i,s=n.power_multiplier||a.power_multiplier||constants.default_power_multiplier,l=n.power_multiplier_near||a.power_multiplier_near,p=n.power_multiplier_far||a.power_multiplier_far;i=l&&p&&0<=r?0===r?l[e]:p[e]:s[e];var c=t.scalePower(e);return c*i},t.getCleave=function(e,a){var n=t.scalePower("cleave"),o=e.cleave_coefficient||constants.default_cleave_coefficient,r=constants.cleave.max-constants.cleave.min,i=n*o.attack,s=t.getPowerPercentage(i),l=r*s;return verminted.build.weapon[a].multipliers&&(l*=verminted.build.weapon[a].multipliers.power),l},t.getArmorMultiplier=function(e,t,a,n,o,r,i){var s,l,p=a.armor_multiplier||t.armor_multiplier||constants.default_power_multiplier,c=a.armor_multiplier_near||t.armor_multiplier_near,d=a.armor_multiplier_far||t.armor_multiplier_far;return r&&(l=r[e]),s=l&&l[n]?o&&l[o]||l[n]:c&&d&&0<=i?0===i?o&&0<=c[e][o]?c[e][o]:0<=c[e][n]?c[e][n]:1:o&&0<=d[e][o]?d[e][o]:0<=d[e][n]?d[e][n]:1:o&&0<=p[e][o]?p[e][o]:0<=p[e][n]?p[e][n]:1,s},t.getPowerForUnit=function(e,a,n,o,r,i,s,l){var p=e.targets&&e.targets[a]||e.default_target,c=n&&e.critical_multiplier;l&&(i=0,s=0);var d=t.getArmorMultiplier("attack",e,p,i,s,c,r),_=t.getPower("attack",e,p,c,r);_*=d;return _},t},WeaponDamage=function(){var e=Math.floor,t=Math.min,a={},n=GenericMath(),o={},r={};a.getCleave=n.getCleave,n.modifyBoostCurve=function(e,t){for(var a={},n=0,o=e.length;n<o;n++)a[n]=e[n]*t;return a},n.clampCurveValue=function(e,t){var a=Object.keys(e).length-1;return 0>t?e[0]:t>a?e[a]:e[t]},n.getBoostCurveMultiplier=function(a,o){var r=Object.keys(a).length-1,i=r*o,s=e(i),l=i-e(i),t=n.clampCurveValue(a,s-1),p=n.clampCurveValue(a,s+0),c=n.clampCurveValue(a,s+1),d=n.clampCurveValue(a,s+2);return(-t/2+3*p/2-3*c/2+d/2)*l*l*l+(t-5*p/2+2*c-d/2)*l*l+(-t/2+c/2)*l+p};a.calculateDamage=function(e,t,a,o,s,l,p,c,d,_,m,u,h){var g=data.profiles[e];if(g.no_damage)return 0;var f={headshot:!0,weakspot:!0,protected_weakspot:!0},b=g.targets&&g.targets[m]||g.default_target,w=constants.boost_curves[b.boost_curve_type]||constants.boost_curves["default"],k=constants.damage_output,y=verminted.difficulty,x=0,v=0,C=1,E=1+u;if(f[t]||a||l||p&&1<p){var L=1==d||4==d||5==d?1:d;var N=k.max,B=n.getPowerForUnit(g,m,a,t,s,d,_,L),A=n.getPowerPercentage(B),P=N*A;(f[t]||a)&&(C=.5*P),(l||p&&0<p)&&(x=P)}var z=0,D=""+verminted.difficulty+verminted.power_level+e+m+_+(0+a)+verminted.platform;r[D]?z=r[D]:(z=i.raw(g,m,a,t,s,d,_,k),r[D]=z);var T;o&&(T=x&&z<x&&x*(o-1)||z*(o-1));var I=0,M=0;if(l){var F=[.75,.6,.5,.5,.5,.3];I+=F[d]}if(p&&0<p){var F=[.75,.3,.75,.5,.5,.2];I+=F[d]}f[t]&&(0<z?2==d?M+=b&&(b.headshot_boost_boss||b.headshot_boot)||.25:M+=b&&(b.headshot_boost_armor||b.headshot_boost)||.5:5==_&&0==z?M+=b&&(b.headshot_boost_heavy_armor||.25):1==d&&0==z&&(M+=b&&(b.headshot_boost_armor||b.headshot_boost)||.5),"protected_weakspot"==t&&(M*=.25)),"protected_spot"==t&&(I-=.5,M-=.5),g&&g.no_headshot_boost&&(M=0);var j=0;if(a&&(j=g.crit_boost||.5,g.no_crit_boost&&(j=0)),w&&(0<I||0<M||0<j)){var S=b&&b.power_boost_curve_coefficient||1,q=b&&b.boost_curve_coefficient||1;if(p&&0<p&&(S*=p,q*=p),0<I){var R=D+I;r[R]?x=r[R]:(x=i.power_boost(z,x,1,I,w,S),r[R]=x)}if(0<M||0<j){M*=1+h,M=n.clamp(M+j,0,1);var W=D+M+E+x;r[W]?v=r[W]:(v=i.headshot(z,x,C,w,q,M,j,E),r[W]=v)}}return verminted.temp_shade_ult&&2===d&&(z*=.45,x*=.5,v*=.5),z=z+x+v,T&&(z+=T),z},a.compileProfile=function(e,n,r,s,l){if(l=l||{},"raw"===r)var p=0,c=0,d=0,_=0;else{var p=verminted.build.weapon[r].crit_boost,c=verminted.build.weapon[r].power_boost,d=verminted.build.weapon[r].has_power_boost,_=verminted.build.weapon[r].headshot_multiplier,m=""+p+c+d+_+verminted.platform+verminted.difficulty.charAt(4)+verminted.power_level,u=(n+m).hashCode();if(o[n]===u)return;o[n]=u}for(var h=l.source_type,g={},f=constants.armor_types,b=constants.hit_types,w=verminted.max_targets,k=0,y=f.length;k<y;k++){3==k&&(k=4);var v=k,C=k;5==k&&(v=1);var E=f[k];g[E]={};for(var L=0;L<b.length;L++){var N,B,A,P=b[L];if(verminted.temp_shade_ult){var z=data.profiles[n].boost_override;B=4,2==k?(B=2,z&&(B=t(z,B))):z&&(B=z)}var D,T;1==L?(D="headshot",T=!1):2==L?(D=null,T=!0):3==L?(D="headshot",T=!0):(D=null,T=!1),("aoe"===h||"dot"===h)&&(D=null,T=!1),g[E][P]={};for(var I,M=0;M<w;M++)I=a.calculateDamage(n,D,T,N,0,d,B,A,v,C,M,p,_),g[E][P][M]=I}}return"raw"===r?g:void(verminted.profiles[n]=verminted.profiles[n]||{},verminted.profiles[n].crit_boost=p,verminted.profiles[n].power_boost=c,verminted.profiles[n].damage=g)},a.getDamage=function(e,t,n,o,r,i,s){var l,p,c;"object"==typeof o?(l=o.primary_armor||o.armor,p=o.race,c=o.hitzone_armor&&o.hitzone_armor.head&&("headshot"===r||"both"===r)?o.hitzone_armor.head:l):(l=o,c=l,p=void 0),a.compileProfile(e,t,n,0,s);var d=l;"superarmored"===l&&(d="armored");var _=verminted.build.weapon[n].multipliers,m=1;if(_){var u=data.weapons[e].type;m*=_.power,m*=_["power_"+u],m*=_.damage_taken,m*=_[p]||1,m*=_[d]}var h=verminted.profiles[t].damage,g=h[c][r][i]||0;return g*=m,g};var i=function(){var e=Math.max;return{raw:function(e,t,a,o,r,i,s,l){var p=0,c=l,d=c.max-c.min,_=n.getPowerForUnit(e,t,a,o,r,i,s),m=n.getPowerPercentage(_);return p=c.min+d*m,p},power_boost:function(t,a,o,r,i,s){var l=n.modifyBoostCurve(i,s),p=n.clamp(r,0,1),c=n.getBoostCurveMultiplier(l||i,p);return a=e(e(a,t),o)*c,a},headshot:function(t,a,o,r,i,s,l,p){var c=0,d=n.modifyBoostCurve(r,i),_=n.getBoostCurveMultiplier(d||r,s);return c=e(e(a,t),o)*_,0<l&&(c*=p),c}}}();return a},WeaponBreakpoints=function(e){var t=Math.round,a=Math.ceil,o=Math.floor,r={chain:[],mob_lookup:constants.mob_lookup,damage_profiles:[]},i=function(){},s=function(e){var t=r.chain[e],a=data.weapons[t.weapon].actions[t.action].damage_start+data.weapons[t.weapon].actions[t.action].damage_end;a/=2;var n=t.tts+(a||0);return n/=verminted.build.weapon[t.weapon_index].attack_speed,n},l=function(e,t,n){var o,i=r.chain[t],s=data.weapons[i.weapon].actions[i.action],l=i.weapon_index,p=data.breeds[n];o=s.hit_mass&&constants.hit_mass[s.hit_mass][n]?p.hit_mass_counts&&p.hit_mass_counts[verminted.difficulty]?constants.hit_mass[s.hit_mass][n]*p.hit_mass_counts[verminted.difficulty]:p.hit_mass_count||99:p.hit_mass_counts&&p.hit_mass_counts[verminted.difficulty]?p.hit_mass_counts[verminted.difficulty]:p.hit_mass_count||99,"es_mercenary"===verminted.build.career.name&&(o*=.75);var c=verminted.damage.getCleave(data.profiles[e],l),d=a(c/o);return d},p=function(e,n){for(var r=0,s=[],l=0,p=0;p<e.length;p++){var c=e[p],d=t(4*e[p])/4;r+=d,s[p]=e[p]/n,l+=s[p]}var _=0,m=0;if(0==r);else if(r>=n)m=1;else{var u,h,g=[];0==n%r?(m=n/r,u=n/r-1,h=n/r/u):(m=a(n/r),u=o(n/r),h=n/r/u);for(var f=a(4*(n/u))/4,p=0;p<e.length;p++)g[p]=g[p]||{},s[p]*(1/l),g[p].next_bp=e[p]?t(4*(e[p]*h))/4:0;_=h;for(var b=0;;){for(var w=0,k=[],y=[],p=0;p<g.length;p++)if(0<g[p].next_bp){if(w+=g[p].next_bp,g[p].percent=(g[p].next_bp-1/8)/e[p],!k[0]||g[p].percent>k[0].percent){for(var v=0;v<k.length;v++)k.pop();k[0]={},k[0].percent=g[p].percent,k[0].index=p}else if(g[p].percent===k[0].percent){var b=k.length;k[b]={},k[b].percent=g[p].percent,k[b].index=p}if(!y[0]||g[p].percent<y[0].percent){for(var C=y.length,v=0;v<C;v++)y.pop();y[0]={},y[0].percent=g[p].percent,y[0].index=p}else if(g[p].percent===y[0].percent){var b=y.length;y[b]={},y[b].percent=g[p].percent,y[b].index=p}}if(b++,100<b)break;if(w>f){var E=4*w-4*f;if(k.length<E)for(var L,p=0;p<k.length;p++)L=k[p].index,g[L].next_bp-=.25;else{_=k[0].percent;break}}else if(w===f){_=k[0].percent;break}else if(w<f)if(y.length)for(var L,p=0;p<y.length;p++)L=y[p].index,g[L].next_bp+=.25;else break;for(var N=y.length,p=0;p<N;p++)y.pop()}}var B={ceil:m,percent_needed:_};return B};return r.pullProfiles=function(e,t,a){var n=r.chain[a],o=r.damage_profiles,s=data.weapons[e].actions[t];if(!s)return null;var p=Object.keys(s),c=Object.keys(constants.mob_lookup),d=[];if(s.damage_profile_left&&s.damage_profile_right)d[0]={},d[0].key="damage_profile_left",d[0].value=s.damage_profile_left,d[1]={},d[1].key="damage_profile_right",d[1].value=s.damage_profile_right;else for(var _=0;_<p.length;_++){var m,u,h=p[_];switch(h){case"damage_profile":case"damage_profile_target":m=s[h],u="direct";break;case"damage_profile_aoe":m=s[h],h="damage_profile_knockback_aoe",u="aoe";break;case"aoe":s[h].damage_profile&&(m=s[h].damage_profile,h="damage_profile_aoe",u="aoe");break;default:}if(m){var g=d.length;d[g]={},d[g].key=h,d[g].value=m,d[g].source_type=u}}if(0<d.length){for(var f={},_=0;_<d.length;_++){var b=d[_],w=b.key,y=b.value,u=b.source_type;f[w]={},f[w].profile_name=y,f[w].source_type=u,f[w].max_targets={};for(var x,v=0;v<c.length;v++)x=c[v],f[w].max_targets[x]=s.damage_profile_target&&"damage_profile"===w?function(){return verminted.max_targets}:function(){return l(y,a,x)};var C=data.profiles[y],E=0;if(C.targets[0]&&C.targets[0].dot||C.default_target.dot){var L;if(L=C.targets[0]&&C.targets[0].dot?C.targets[0].dot:C.default_target.dot,f[w].dot={},f[w].dot.profile_name=L,0===C.targets.length)E=verminted.max_targets;else for(var N,v=0;v<C.targets.length;v++)if(N=C.targets[v],!N.dot){E=v;break}f[w].dot.max_targets=E}}n.damage_profiles=f}},r.getAllDamage=function(e){for(var t=r.chain,a=[],n=e.target||0,o=0;o<t.length;o++){var i=t[o],l=i.damage_profiles;if(l){var p=i.weapon_index,c=i.weapon,d=i.action,_=data.weapons[c].actions[d],m=s(o),u=_.damage_start+i.tts,h=_.damage_end+i.tts,g=i.hit_type||4,f=a.length,b=[],w=0,k=[];l.damage_profile_target?0===n?(b[w]=l.damage_profile_target,w++):(b[w]=l.damage_profile,w++):l.damage_profile&&l.damage_profile_aoe?(0===n&&(b[w]=l.damage_profile,w++),b[w]=l.damage_profile_aoe,w++):l.damage_profile_left?(k[w]=l.damage_profile_left.max_targets,b[w]=l.damage_profile_left,w++,k[w]=l.damage_profile_right.max_targets,b[w]=l.damage_profile_right,w++):l.damage_profile&&(k[w]=l.damage_profile.max_targets,b[w]=l.damage_profile,w++);for(var y=0;y<b.length;y++){var x=b[y],v=x.profile_name,C=x.source_type;f=a.length,a[f]={},a[f].profile_name=v,a[f].hit_type=g,a[f].hit_time=m,a[f].tts=i.tts,a[f].damage_start=u,a[f].damage_end=h,a[f].source_type=C,a[f].weapon_index=p,a[f].weapon_name=c,a[f].action_name=d,"object"==typeof k[y]&&(a[f].max_targets=k[y]),data.profiles[v].targets[n]?data.profiles[v].targets[n].dot&&(a[f].dot=data.profiles[v].targets[n].dot):data.profiles[v].default_target&&data.profiles[v].default_target.dot&&(a[f].dot=data.profiles[v].default_target.dot)}}}return a},r.buildDamageTicks=function(e,t,a){for(var r,s=a.hit,l=a.target,p=constants.hit_types,c=[],d=[],_=[],m={},u=0;u<e.length;u++){if(r=e[u],"object"==typeof r.max_targets){var h=r.max_targets[t]();if(l>=h)continue}if("string"==typeof r.dot){var g,f=r.weapon_name,b=r.action_name,w=p[r.hit_type]||s,k=data.dots[r.dot].dot_type;if("poison_dot"===k&&"neither"===s&&"aoe"!==r.source_type){var y=constants.armor_lookup[data.breeds[t].armor],x=data.profiles[r.profile_name].armor_multiplier&&data.profiles[r.profile_name].armor_multiplier.attack||data.profiles[r.profile_name].armor_multiplier_near&&data.profiles[r.profile_name].armor_multiplier_near.attack;g=!!(0<x[y])}else g=!0;if(g){var v=data.dots[r.dot],C=_.length;if(1===v.max_stacks){var E=_[m[k]];if(E&&E.dot_end>r.hit_time){var L=r.hit_time+v.duration;L>E.dot_end&&(E.dot_end=L)}else m[k]=C,_[C]={},_[C].name=v.name,_[C].profile_name=v.damage_profile,_[C].hit_type=0,_[C].tick_rate=v.tick_rate,_[C].dot_start=r.hit_time,_[C].dot_end=r.hit_time+v.duration,_[C].source_type="dot",_[C].weapon_name=f,_[C].action_name=b}else _[C]={},_[C].name=v.name,_[C].profile_name=v.damage_profile,_[C].hit_type=0,_[C].tick_rate=v.tick_rate,_[C].dot_start=r.hit_time,_[C].dot_end=r.hit_time+v.duration,_[C].source_type="dot",_[C].weapon_name=f,_[C].action_name=b}}c[c.length]=e[u]}for(var u=0;u<_.length;u++)for(var v=_[u],N=v.tick_rate,B=v.dot_end-v.dot_start,A=o(B/N),P=0;P<A;P++){var z=v.dot_start+N*(P+1),C=d.length;d[C]={},d[C].hit_time=z,d[C].damage_start=z-.25*N,d[C].damage_end=z+.25*N,d[C].name=v.name,d[C].profile_name=v.profile_name,d[C].hit_type=0,d[C].tick_rate=v.tick_rate,d[C].dot_start=v.dot_start,d[C].dot_end=v.dot_end,d[C].source_type=v.source_type,d[C].weapon_name=v.weapon_name,d[C].action_name=v.action_name}if(0<d.length){for(var D,u=0;u<d.length;u++)D=c.length,c[D]=d[u];c.sort(function(e,t){return e.hit_time-t.hit_time})}return c},r.buildBreakpoints=function(n){if(!(0>n)){for(var o=r.chain,s=r.damage_profiles,l=constants.hit_types,c=verminted.difficulty,d=e.container,_=Object.keys(constants.mob_lookup),m={},u=[],h=verminted.max_targets,g=[],f=0;f<h;f++)g[f]=r.getAllDamage({target:f});for(var b=0,w=_.length;b<w;b++){var k=_[b],v=_[b],C=data.breeds[v].max_health[c];verminted.platform&&data.breeds[v].console_max_health&&data.breeds[v].console_max_health[c]&&(C=data.breeds[v].console_max_health[c]),verminted.harder_better&&constants.elites[k]&&(C*=2),m[v]=0;for(var E,L=0;L<o.length;L++)if(E=o[L].damage_profiles,!!E){var N=0;E.damage_profile_aoe?N=2:E.damage_profile?N=E.damage_profile.max_targets[v]():E.damage_profile_left&&(E.damage_profile_left.max_targets>E.damage_profile_right.max_targets?N=E.damage_profile_left.max_targets[v]():N=E.damage_profile_right.max_targets[v]()),N>m[v]&&(m[v]=N)}for(var B,A=[],P=0;P<l.length;P++){B=l[P];for(var D=0;D<h;D++){if(A[D]=A[D]||[],A[D][P]=r.buildDamageTicks(g[D],v,{hit:B,target:D}),D>=m[v]){for(var f=D;f<h;f++)e.breeds[v].targets[f].row.classList.add("hide");break}var T=e.breeds[v].targets[D][l[P]],I=TooltipControl(T),M=v+"\r\n"+l[P],F=e.breeds[v].mob_name,S=v.replace(/_/g," "),q=S.replace(/\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1)});F.textContent=q+" ("+C+")";for(var R=r.chain[0].weapon_index,f=0;f<A[D][P].length;f++){var W=A[D][P][f],V=W.profile_name,H=W.weapon_name,O=l[W.hit_type]||B,U={source_type:W.source_type};void 0!==W.weapon_index&&(R=W.weapon_index);var Q=verminted.damage.getDamage(H,V,R,data.breeds[v],O,D,U);W.damage=Q}for(var W,K=A[D][P],J=0,X=[],f=0;f<K.length;f++){W=K[f],X[f]=K[f].damage;var Y=t(4*K[f].damage)/4;J+=Y,M+="\r\n"+W.profile_name+": "+Y}var Z=p(X,C),G=Z.percent_needed,$=Z.ceil,ee=T.textContent;0===$?T.textContent=0:1===$&0===G?T.textContent=1:(M+="\r\n\r\npower needed for next bp: "+a(1e5*(G-1))/1e3,G=a(100*G),100<G&&(G-=100),T.textContent=$+" ("+G+"%)");var te=e.breeds[_[b]].targets[D].row;if(T.textContent!==ee)T.classList.remove("damage-change"),u[u.length]=T;else if(te.classList.contains("hide"))for(var ae,ne=0;ne<te.children.length;ne++)ae=te.children[ne],ae.classList.remove("damage-change"),window.setTimeout(function(){ae.classList.add("damage-change")},0);I.text(M),te.classList.remove("hide")}}for(var oe,re=0;re<A.length;re++)oe=e.breeds[v].targets[re],oe.callback=function(){i(A[re],oe.row,v)};var ie=e.breeds[k].extra_targets;m[v]>h?(ie.textContent="+"+(m[v]-h),ie.classList.remove("hide")):ie.classList.add("hide")}window.setTimeout(function(){for(var e=0;e<u.length;e++)u[e].classList.add("damage-change")},0),d.classList.remove("hide")}},r.clearAttacks=function(){for(var e=0,t=chain.length;e<t;e++)chain.pop()},r.generateCombo=function(){for(var e=0,t=chain.length;e<t;e++);},r},AttackBreakpoints=function(e,t){var a=e.container,n=WeaponBreakpoints(e),o=a.parentNode,r=o.getElementsByClassName("weapon-breakpoints-attacks")[0],s={};s.attacks=[],s.name_div=e.name_div,n.chain[0]={},n.chain[0].weapon_index=t,n.chain[0].tts=0;var l=function(){for(var e,t=data.weapons[s.name].actions,a=Object.keys(t).sort(),n=[],o=0,r=0;r<a.length;r++)e=t[a[r]],(e.damage_profile||e.damage_profile_left)&&(n[o]=a[r],o++);for(var l,r=0;r<s.attacks.length;r++)l=s.attacks[r],n[r]?(l.textContent=n[r],l.setAttribute("data-action",n[r]),l.classList.remove("hide"),l.classList.remove("not-active-talent")):l.classList.add("hide")},p=function(){},c=function(t){var e=t.target.getAttribute("data-action");n.chain[0].action=e;n.pullProfiles(s.name,e,0),n.buildBreakpoints(0,"raw");for(var o,r=0;r<s.attacks.length;r++)o=s.attacks[r],o===t.target?o.classList.remove("not-active-talent"):o.classList.add("not-active-talent");a.classList.remove("hide")};return n.set=function(e){n.chain[0].weapon=e,s.name=e,s.name_div.textContent=e,o.classList.remove("hide"),p(),l()},n.refresh=function(){var e=n.chain[0];s.name&&e.action&&data.weapons[e.weapon].actions[e.action]&&n.buildBreakpoints(0)},verminted.update_on_build[verminted.update_on_build.length]=n.refresh,function(){for(var e,t=0;10>t;t++)e=document.createElement("div"),e.classList.add("weapon-attack"),e.classList.add("js-button"),e.classList.add("hide"),e.addEventListener("click",c),s.attacks[t]=e,r.appendChild(e)}(),n},ComboBreakpoints=function(e){var t=Math.ceil,a=Math.floor,n=WeaponBreakpoints(e);n.headshot_chance=0,n.armor_types=constants.armor_types;var o={},r=n.buildBreakpoints,s=document.getElementsByClassName("chain-options-modal")[0],l=s.getElementsByClassName("chain-attack-options")[0],p=s.parentNode.parentNode,c=ModalControl(p,s);c.close=function(){verminted.build.refresh(),p.classList.add("hide"),document.body.removeEventListener("click",c.onClick),document.body.classList.remove("no-scroll")};for(var d=document.getElementsByClassName("chain-attack-header"),_=0,m=d.length;_<m;_++)d[_].addEventListener("click",function(t){c.open(),t.stopPropagation()});document.getElementsByClassName("chain-options-modal-close")[0].addEventListener("click",c.close);var u=s.getElementsByClassName("chain-attack-options")[0],h=function(t){for(var o=n.chain,r=n.damage_profiles,i=n.armor_types,s=e.info.damage_box,l=e.info.damage_box.dps,p=["skaven_slave","skaven_storm_vermin","skaven_pack_master","","skaven_plague_monk","chaos_warrior"],c=0,d=i.length;c<d;c++){3==c&&(c=4);var _=i[c];if(s.dps[_])var m=s.dps[_];else{var m=document.createElement("div");m.classList.add(n.armor_types[c]),s.dps[n.armor_types[c]]=m,s.container.appendChild(s.dps[n.armor_types[c]])}var u=TooltipControl(m),h=0;if(0<t){var g=n.getAllDamage({target:0,order:"dps"});g=n.buildDamageTicks(g,p[c],{target:0,hit:"neither"});for(var f,b=o[0].weapon_index,w=0;w<g.length;w++){f=g[w],b=f.weapon_index||b;var k=b,y=n.headshot_chance,v=verminted.build.weapon[k].crit_chance||.05;data.weapons[f.weapon_name].actions[f.action_name]&&data.weapons[f.weapon_name].actions[f.action_name].extra_crit_chance&&(v+=data.weapons[f.weapon_name].actions[f.action_name].extra_crit_chance);var C,E;switch(f.hit_override){case"neither":C=0,v=0,y=0,E=1;break;default:C=y*v,y-=C,v-=C,E=1-(y+v+C);}var L=0,N=0,B=0,A=0;0<E&&(L+=verminted.damage.getDamage(f.weapon_name,f.profile_name,k,_,"neither",0)),0<y&&(N+=verminted.damage.getDamage(f.weapon_name,f.profile_name,k,_,"headshot",0)),0<v&&(B+=verminted.damage.getDamage(f.weapon_name,f.profile_name,k,_,"critical",0)),0<C&&(A+=verminted.damage.getDamage(f.weapon_name,f.profile_name,k,_,"both",0)),L*=E,N*=y,B*=v,A*=C;var P=L+N+B+A;h+=P}h/=t;var z="DPS against "+_+"\r\n"+h.toFixed(2);u.text(z),m.textContent=a(10*h)/10}else m.textContent=0}},g=function(){var a=n.chain,o=e.info.attack_speed,r=0,s=!1;if(1<a.length){var l=a.length-1,p=data.weapons[a[l].weapon],c=a[l].weapon_index,d=verminted.build.weapon[c].attack_speed||1;if(a[l].weapon!==a[0].weapon)r+=p.actions[a[l].action].attack_speed.anim_cancel/d,r+=verminted.anim_cancel,s=!0;else if(p.actions[a[l].action]&&p.actions[a[l].action].attack_speed[a[0].action]){var _=p.actions[a[l].action].timeout,m=p.actions[a[l].action].attack_speed[a[0].action]-p.actions.neutral.attack_speed[a[0].action];r+=_&&_<m?_:m/d,s=!0}else if(c!==a[0].weapon_index){var _=p.actions[a[l].action].timeout,m=p.actions[a[l].action].attack_speed.anim_cancel-p.actions.neutral.attack_speed[a[0].action];r+=_&&_<m?_:m/d,s=!0}else if(p.actions.push&&a[0].action===p.actions.push.push_attack){switch(a[l].action){case"anim_cancel":r+=0;break;case"block":r+=0;break;default:var u=p.actions[a[l].action].attack_speed.block,g=p.actions[a[l].action].damage_start+p.actions[a[l].action].damage_end;g/=2,r+=u<g?g/d:u/d;}s=!0}else"anim_cancel"===a[l].action?(r+=verminted.anim_cancel,s=!0):"block"===a[l].action&&(s=!0)}for(var f=0,b=a.length;f<b;f++){var c=a[f].weapon_index,m=verminted.build.weapon[c].attack_speed||1;r+=data.weapons[a[f].weapon].actions[a[f].action]&&data.weapons[a[f].weapon].actions[a[f].action].timeout&&data.weapons[a[f].weapon].actions[a[f].action].timeout<a[f].speed*m?data.weapons[a[f].weapon].actions[a[f].action].timeout:a[f].speed/m}r=t(100*r)/100,o.textContent=r+"s",s&&"number"==typeof r?(o.style.color="black",h(r)):(o.style.color="red",h(0))};n.addAttack=function(e,t,a,s){var l=n.chain,p=n.damage_profiles;if(0===s&&(o={},b(!0)),s<l.length){for(var c=l[s].profile_length-1,d=p.length;d>c;d--)p[d]=null,p.pop();for(var d=l.length-1;d>s-1;d--)u.removeChild(l[d].options.div),l[d]=null,l.pop()}l[s]={},l[s].weapon=e,l[s].weapon_index=a,l[s].action=t,l[s].speed=0,l[s].hit_type=4,l[s].profile_length=p.length,l[s].options={};var _=document.createElement("div");_.classList="attack-options";var m=document.createElement("div");m.classList="attack-count",m.textContent=s+1;var h=document.createElement("div");h.classList="attack-name-options";var f=document.createElement("p");f.textContent=e;var w=document.createElement("span");w.textContent=t,h.appendChild(f),h.appendChild(w);var k=document.createElement("select");k.classList="attack-option-select js-input",k.addEventListener("change",function(){l[s].hit_type=parseInt(k.value)});var y=document.createElement("option");y.value=4,y.textContent="default",y.setAttribute("selected",!0),k.appendChild(y);for(var x,d=0;d<constants.hit_types.length;d++)x=document.createElement("option"),x.value=d,x.textContent=constants.hit_types[d],k.appendChild(x);_.appendChild(m),_.appendChild(h),_.appendChild(k),u.appendChild(_),l[s].options.div=_;var v=s;if(n.pullProfiles(e,t,s),!data.weapons[e].actions[t]){var C=s-1,E=data.weapons[l[C].weapon],L=E.actions[l[C].action];if("block"===t){var N=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.block,B=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start;B+=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,B/=2,l[s].speed+=N<B?B:N,l[s].speed+=E.block.min_hold}else{var A=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.anim_cancel,B=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start;B=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,B/=2,l[s].speed+=A<B?B:A}--v}else{var E=data.weapons[e];if("melee"!==E.type||t!==E.actions.push.push_attack)0===s?l[s].speed=E.actions.neutral.attack_speed[t]:data.weapons[l[s-1].weapon].actions[l[s-1].action]?l[s].weapon_index===l[s-1].weapon_index?l[s].speed=E.actions[l[s-1].action].attack_speed[t]:(l[s].speed=E.actions.neutral.attack_speed[t],l[s].speed+=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.anim_cancel):l[s].speed=E.actions.neutral.attack_speed[t];else if(l[s].speed=E.actions.push.attack_speed[t],l[s].speed+=E.block.min_hold,0<s)if(e===l[s-1].weapon){var N=0,B=0;data.weapons[l[s-1].weapon].actions[l[s-1].action]&&(N=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.block,B=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start,B+=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,B/=2),l[s].speed+=N<B?B:N}else{var A=data.weapons[l[s-1].weapon].actions[l[s-1].action].attack_speed.anim_cancel,B=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_start;B+=data.weapons[l[s-1].weapon].actions[l[s-1].action].damage_end,B/=2,l[s].speed+=A<B?B:A}}l[s].tts=0;for(var d=0;d<=s;d++)l[s].tts+=l[d].speed;r(v),g()};var f=!1,b=function(t){f=t||!f,f?(e.container.getElementsByClassName("breakpoint-plate")[0].classList.remove("hide"),e.info.container.classList.remove("hide")):(e.container.getElementsByClassName("breakpoint-plate")[0].classList.add("hide"),e.info.container.classList.add("hide"))};return n.refresh=function(){var e=n.chain;e[0]&&null!==verminted.build.getWeaponIndex(e[0].weapon)&&g(),r(e.length-1)},function(){e.container.getElementsByClassName("attack-combo-title")[0].addEventListener("click",function(){b()})}(),verminted.update_on_build[verminted.update_on_build.length]=n.refresh,n},AttackChain=function(e){var t={anim_cancel:.05,weapon:[]},a={};t.chain=[];var n=document.getElementById("TEMPLATE-CHAIN");if(n.content)var o=n.content.firstElementChild;else var o=document.getElementById("TEMPLATE-CHAIN").querySelectorAll(".chain-attack-select")[0];var r=verminted.combo_breakpoints,i=function(e,o){for(var r=t.chain,s=[],l=0,p=0,c=t.weapon.length;p<c;p++){var d=t.weapon[p],_=data.weapons[d];if(d&&"melee"===data.weapons[d].type){if(o&&o.weapon===t.weapon[p]&&data.weapons[o.weapon].actions[o.attack]&&o.weapon_index===p){for(var m,u=data.weapons[o.weapon].actions,h=u[o.attack].attack_speed,g=Object.keys(h).sort(),f=[],b={},w=0;w<g.length;w++)if(m=g[w],u[m]&&(u[m].damage_profile||u[m].damage_profile_left)){var k=f.length;f[k]=m,b[m]=!0}for(var m,w=0;w<g.length;w++)if(m=g[w],!b[m]){var k=f.length;f[k]=m}g=f;for(var y=[],w=0,x=g.length;w<x;w++)"block_cancel_end"!==g[w]&&(s[l]={},s[l].name=p+1+" "+g[w],s[l].attack=g[w],s[l].weapon=d,s[l].weapon_index=p,l++)}else for(var v=data.weapons[d].actions.neutral.attack_speed,C=Object.keys(v),E=0,L=C.length;E<L;E++)s[l]={},s[l].name=p+1+" "+C[E],s[l].attack=C[E],s[l].weapon=d,s[l].weapon_index=p,l++;var N=Object.keys(a[d].push),B=a[d].block.push;B+=a[d].push[N[0]],s[l]={},s[l].name=p+1+" push_attack",s[l].attack=_.actions.push.push_attack,s[l].weapon=d,s[l].weapon_index=p,l++}else if(d&&"ranged"===data.weapons[d].type)if(o&&o.weapon===t.weapon[p]&&"neutral"!==o.attack){var h,A=0;_.actions[o.attack]?h=_.actions[o.attack].attack_speed:(h=_.actions.neutral.attack_speed,"block"===o.attack?A=_.block.min_hold:"anim_cancel"===o.attack&&(A=t.anim_cancel));for(var g=Object.keys(h),y=[],k=0,w=0,x=g.length;w<x;w++)"block_cancel_end"!==g[w]&&(s[l]={},s[l].name=p+1+" "+g[w],s[l].attack=g[w],s[l].weapon=d,s[l].weapon_index=p,l++)}else for(var v=data.weapons[d].actions.neutral.attack_speed,C=Object.keys(v),E=0,L=C.length;E<L;E++)s[l]={},s[l].name=p+1+" "+C[E],s[l].attack=C[E],s[l].weapon=d,s[l].weapon_index=p,l++}for(var w=0,x=s.length;w<x;w++)s[w].node=document.createElement("option"),s[w].node.value=s[w].weapon+","+s[w].attack+","+s[w].weapon_index,s[w].node.textContent=s[w].name,e.appendChild(s[w].node);return s},s=function(a){var n,l=t.chain;if(a.target)n=a.target;else if(a.value)n=a;else throw"next chain had a problem";var p=n.value.split(/,/),c={};c.weapon=p[0],c.attack=p[1],c.weapon_index=parseInt(p[2],10);var d=parseInt(n.getAttribute("data-count"),10)||0,_=d+1;if(l[_])for(var m=l.length-1;m>=_;m--)e.removeChild(l[m].node),l.pop();l[_-1].weapon=p[0],l[_-1].action=p[1],l[_]={},l[_].node=e.appendChild(o.cloneNode(!0)),l[_].select=l[_].node.getElementsByClassName("chain-attack-dropdown")[0],l[_].select.setAttribute("data-count",_),i(l[_].select,c),l[_].select.addEventListener("change",s),r.addAttack(c.weapon,c.attack,c.weapon_index,d)};return t.refresh=function(){for(var a=t.chain,n=!1,r=null,l=0,p=a.length;l<p;l++){var c=a[l].select.value.split(/,/),d=c[0];d!==t.weapon[0]&&d!==t.weapon[1]&&(n=!0),n&&(null===r&&(r=l-1),e.removeChild(a[l].node))}for(var l=a.length-1,p=0;l>=p;l--)a[l].node.parentNode&&e.removeChild(a[l].node),a.pop();a[0]&&e.removeChild(a[0].node),a[0]=a[0]||{},a[0].node=e.appendChild(o.cloneNode(!0)),a[0].select=a[0].node.getElementsByClassName("chain-attack-dropdown")[0],a[0].select.setAttribute("data-count",0),i(a[0].select),a[0].select.addEventListener("change",s)},t.setWeapon=function(e,n){t.weapon[n]=e,reverseLookup(e),a[e]=data.weapons[e].lookup,t.refresh()},t},WeaponSelection=function(e){var t={},a=verminted.weapon_list,n=verminted.attack_chain;t.update=[];var o=function(t){var a=e.getAttribute("data-weapon-select"),o=verminted.weapon_slot[a];e.textContent=t,e.setAttribute("data-input",t);for(var r=verminted.update_weapon,s=0,l=r.length;s<l;s++)r[s](t,a,o);n.setWeapon(t,parseInt(e.getAttribute("data-weapon-select"),10))};return e.addEventListener("click",function(t){a.setClickCallback(o);for(var e=verminted.update_weapon_list,n=0,r=e.length;n<r;n++)e[n](t);a.open()}),t},ModalControl=function(t,a){var n={clickCallback:null,closeCallback:null,modal:t},o=!0;return n.open=function(){t.classList.remove("hide"),n.bind();var e=t.children[0];o?o=!1:e.scrollTo&&e.scrollTo(0,0),document.body.classList.add("no-scroll")},n.setClickCallback=function(e){n.clickCallback=e},n.setCloseCallback=function(e){n.closeCallback=e},n.close=function(){null!==n.closeCallback&&n.closeCallback(),t.classList.add("hide"),document.body.removeEventListener("click",n.onClick),document.body.classList.remove("no-scroll")},n.onClick=function(o){o.stopPropagation();var e=o.target,r=!1;if(a)var i=a;else var i=t;for(;e&&e.classList;){if(e===i||e.classList.contains("weapon-list-holder")){r=!1;break}else if(e===document.body){r=!0;break}e=e.parentNode}r&&n.close()},n.bind=function(){document.body.addEventListener("click",n.onClick)},n},BuildBuild=function(){var e=document.getElementsByClassName("build-modal")[0].parentNode.parentNode,t={};t.career={},t.career.name,t.career.multipliers={},t.items=[],t.weapon=[],t.weapon_lookup={},t.update_on_close=verminted.update_on_build;for(var a,n={container:document.getElementsByClassName("weapon-list")[0],modal:verminted.weapon_list,lookup:{},weapon:{},property_combos:{}},o=document.getElementsByClassName("buff-container")[0],r=document.getElementsByClassName("weapon-breakpoints-container"),s={},l=[],p=[],c=0;c<data.careers.bw_scholar.talent_tree.length;c++)p[c]={};var d={power_vs_unarmoured:"infantry",power_vs_armoured:"armored",power_vs_large:"monster",power_vs_frenzy:"berserker",power_vs_skaven:"skaven",power_vs_chaos:"chaos",power_level:"power"},_=verminted.compression;t.modal=ModalControl(e,document.getElementsByClassName("build-modal")[0]),document.getElementsByClassName("build-modal-close")[0].addEventListener("click",t.modal.close);var m=function(){for(var t,n=e.getElementsByClassName("select-career")[0],o=document.createDocumentFragment(),r=Object.keys(data.careers).sort(),s=0,l=r.length;s<l;s++)t=document.createElement("option"),t.textContent=data.localize[verminted.language][data.careers[r[s]].name]||r[s],t.value=r[s],o.appendChild(t);n.appendChild(o),n.addEventListener("change",function(t){k(t.target.value)}),a=n},u=function(){var a=e.getElementsByClassName("career-and-gear")[0],n=t.items;n[0]={},n[0].container=a.getElementsByClassName("item-container")[0];for(var o=n[0].container.cloneNode(!0),r=0;5>n.length;){if(0!==r&&(n[r]={},n[r].container=n[r].container||o.cloneNode(!0),1<r&&(n[r].container.textContent=data.careers.dr_ranger.equipment[r]),4===r&&n[r].container.classList.add("item-container-last")),2>r){var s=document.createElement("div");s.classList.add("select-weapon"),s.classList.add("js-button"),s.setAttribute("data-weapon-select",r),n[r].weapon={},n[r].weapon.div=s,n[r].weapon.div.textContent="Weapon "+(r+1),n[r].container.classList.add("item-weapon"),n[r].container.appendChild(s)}n[r].property=[];for(var l,p=0;2>p;p++)l=document.createElement("select"),l.classList.add("select-property"),l.classList.add("js-input"),l.setAttribute("data-item-slot",r),l.setAttribute("data-property-slot",p),l.innerHTML="<option selected disabled hidden>Property</option>",l.addEventListener("change",function(t){var e=t.target.getAttribute("data-item-slot"),a=t.target.getAttribute("data-property-slot"),n=t.target.value;C(n,e,a)}),n[r].property[p]={},n[r].property[p].select=l,n[r].property[p].options=[],n[r].container.appendChild(l);for(var l,p=0;1>p;p++){l=document.createElement("select"),l.classList.add("select-trait"),l.classList.add("js-input"),l.innerHTML="<option selected disabled hidden>Trait</option>",n[r].trait={},n[r].trait.select=l,n[r].trait.options=[],n[r].trait.name=null;var c=n[r].trait;l.addEventListener("change",function(t){var e=t.target.value;c.name=e;data.item.traits[e];B.refresh()}),n[r].container.appendChild(l)}a.appendChild(n[r].container),r++}},h=function(){verminted.update_weapon[verminted.update_weapon.length]=v;for(var e=n.container,t=Object.keys(data.weapons).sort(),a=document.createDocumentFragment(),o=0,r=t.length;o<r;o++){for(var s=t[o],l=data.weapons[s].type,p=Object.keys(data.weapons[s].career),c=0,d=p.length;c<d;c++){var _=p[c],m=l;"dr_slayer"===_&&"throwing_axes"===s&&(m="melee"),n.lookup[_]=n.lookup[_]||{},n.lookup[_][m]=n.lookup[_][m]||[];var u=n.lookup[_][m].length;n.lookup[_][m][u]=s}var h=document.createElement("div");h.classList.add("weapon-list-weapon-name"),h.classList.add("js-button"),h.setAttribute("data-weapon",s),h.textContent=s,n.weapon[s]={},n.weapon[s].div=h,a.appendChild(h)}e.appendChild(a)},g=function(){for(var e={},t=Object.keys(data.item.property_combos),a=0,o=t.length;a<o;a++){e[t[a]]={};for(var r=data.item.property_combos[t[a]],s=0,l=r.length;s<l;s++)e[t[a]][r[s][0]]=e[t[a]][r[s][0]]||{},e[t[a]][r[s][0]][r[s][1]]=!0,e[t[a]][r[s][1]]=e[t[a]][r[s][1]]||{},e[t[a]][r[s][1]][r[s][0]]=!0}n.property_combos=e},f=function(e){var a=t.items,o=[];o[0]=a[e].property[0].select.value,o[1]=a[e].property[1].select.value;for(var r=a[e].type,s=n.property_combos[r],l=0,p=a[e].property.length;l<p;l++)for(var c,d=0,_=a[e].property[l].options.length;d<_;d++)c=a[e].property[l].options[d].value,s&&s[o[(l+1)%2]]?s[o[(l+1)%2]][c]?a[e].property[l].options[d].removeAttribute("disabled"):a[e].property[l].options[d].setAttribute("disabled",!0):a[e].property[l].options[d].removeAttribute("disabled")},b=function(a){var e=t.career.name,o=Object.keys(n.weapon),r={};if(e)for(var s=a.target.getAttribute("data-weapon-select"),l=e,p=data.careers[l].equipment[s],c=n.lookup[l][p],d=0,_=c.length;d<_;d++)r[c[d]]=!0;else for(var d=0,_=o.length;d<_;d++)r[o[d]]=!0;for(var d=0,_=o.length;d<_;d++)r[o[d]]?n.weapon[o[d]].div.classList.remove("hide"):n.weapon[o[d]].div.classList.add("hide")},w=function(e){var a,o,r=t.items;t.career.name?(a=data.careers[t.career.name],o=a.equipment):o=data.careers.dr_ranger.equipment;for(var l,p=0,c=r.length;p<c;p++){l=o[p],"dr_slayer"===t.career.name&&"throwing_axes"===r[p].name&&(l="ranged");var d;if(d=data.weapons[r[p].name]?data.weapons[r[p].name].traits:1==p?"ranged_ammo":o[p],s[a]);else if(r[p].type===l&&r[p].trait_type===d&&!e)continue;else{r[p].type=l,r[p].trait_type=d;for(var _=0,m=r[p].property.length;_<m;_++){for(var u,h=0,g=r[p].property[_].options.length;h<g;h++)u=r[p].property[_].options.length-1,r[p].property[_].select.removeChild(r[p].property[_].options[u]),r[p].property[_].options.pop();var f=l;("ranged_ammo"===f||"ranged_heat"===f)&&(f="ranged");for(var b=document.createDocumentFragment(),w=Object.keys(n.property_combos[f]).sort(),k=!1,h=0,g=w.length;h<g;h++){var v=w[h],C=document.createElement("option");C.value=v,C.textContent=data.localize[verminted.language][data.item.properties[v].name]||v,r[p].property[_].name&&v===r[p].property[_].name&&(C.setAttribute("selected",!0),k=!0),r[p].property[_].options[h]=C,b.appendChild(C)}!k&&r[p].property[_].name&&(r[p].property[_].name=w[0]),r[p].property[_].select.appendChild(b)}if(-1<p){var E=r[p].trait.options.length;if(0<E)for(var u,_=0;_<E;_++)u=E-1-_,r[p].trait.select.removeChild(r[p].trait.options[u]),r[p].trait.options.pop();for(var b=document.createDocumentFragment(),L=data.item.trait_combos[d].sort(),k=!1,_=0,m=data.item.trait_combos[d].length;_<m;_++){var N=L[_],C=document.createElement("option");C.value=N,C.textContent=data.localize[verminted.language][data.item.traits[N].name]||N,r[p].trait.name&&N===r[p].trait.name&&(C.setAttribute("selected",!0),k=!0),r[p].trait.options[_]=C,b.appendChild(C)}!k&&r[p].trait.name&&(r[p].trait.name=L[0]),r[p].trait.select.appendChild(b)}}}},k=function(e,a){if(t.career.name=e,t.career.crit_chance=data.careers[e].base_crit_chance,t.career.attack_speed=data.careers[e].base_attack_speed||0,t.career.reload_speed=data.careers[e].base_reload_speed||0,t.career.headshot_multiplier=data.careers[e].base_headshot_multiplier||0,t.career.backstab_multiplier=data.careers[e].base_backstab_multiplier||0,s[e]&&!a);else{w();for(var n=data.careers[e].talent_tree,o=0;o<n.length;o++){p[o]={};for(var r=0;r<n[o].length;r++){var c=n[o][r],d=data.localize[verminted.language][c.description],_="generated";if(!d&&c.buffs){_="",d="";for(var m=0;m<c.buffs.length;m++){0<m&&(d+="\r\n");var u=c.buffs[m];d+=u.name+"\r\n",u.stat_buff&&(d+="property: "+u.stat_buff+"\r\n"),(u.bonus||u.multiplier)&&(d+="bonus: "+(u.bonus||u.multiplier)+"\r\n"),u.max_stacks&&(d+="max stacks: "+u.max_stacks+"\r\n")}}var h=data.localize[verminted.language][c.name];h||(c.buffs[0]?h=c.buffs[0].name.replace(/_/g," "):h=o+"-"+r),l[o][r].div.classList.remove("not-active-talent"),l[o][r].div.textContent=h;var g=TooltipControl(l[o][r].div);g.text(d,_)}}}B.refresh()},y=function(e,a){var n=t.career.name;if(n){var o={power_level:"power"},r={attack_speed:"attack_speed",reload_speed:"reload_speed",critical_strike_chance:"crit_chance",backstab_multiplier:"backstab_multiplier"},s=data.careers[n].talent_tree;p[e]=s[e][a],p[e].col=a;var c=p[e];if(c.stat_buff&&(c.max_stacks||c.chunk_size));else for(var d=0;6>d;d++)if(p[d]&&p[d].stat_buff){var _=p[d].stat_buff;o[_]?(0==d&&(t.career.multipliers[o[_]]=0),t.career.multipliers[o[_]]+=p[d].multiplier):r[_]&&(0==d&&(t.career[r[_]]=0),t.career[r[_]]+=p[d].multiplier)}for(var d=0;d<s[e].length;d++)d===a?l[e][d].div.classList.remove("not-active-talent"):l[e][d].div.classList.add("not-active-talent");B.refresh()}},v=function(e,a){var n=t.items,o=n[a];o.name=e,verminted.weapon_attack_breakpoints[a].set(e),n[a].weapon.div.textContent=e,w(),verminted.attack_chain.setWeapon(e,a)},C=function(e,a,n){var o=t.items;o[a].property[n].name=e,o[a].property[n].value=data.item.properties[e].value[1],f(a,n)},E=function(e){var a=B.getModifier(e);if(!data.careers[t.career.name])"crit_chance"===e&&(a+=.05);else if(d[e]){for(var n=0;n<p.length;n++)if(p[n].buffs)for(var o,r=0;r<p[n].buffs.length;r++)o=p[n].buffs[r],e!==o.stat_buff||o.max_stacks||(a+=o.multiplier);}else{a+=t.career[e]||0;for(var n=0;n<p.length;n++)if(p[n].buffs)for(var o,r=0;r<p[n].buffs.length;r++)o=p[n].buffs[r],e!==o.stat_buff||o.max_stacks||("crit_chance"===o.stat_buff?a+=o.bonus:a+=o.multiplier)}return a};t.getMultipliers=function(){for(var e=t.items,a=t.weapon,n=t.weapon_lookup,o=[],r=0,s=e.length;r<s;r++)if("charm"===e[r].type||"trinket"===e[r].type){var l=o.length;o[l]=e[r]}for(var r=0;r<n.length;r++)n.pop();for(var p,r=0,s=e.length;r<s;r++)if(p=e[r].name,a[r]={},p||data.weapons[e[r].name]){n[p]=r,a[r].name=p,a[r].multipliers={},a[r].attack_speed=1+E("attack_speed"),a[r].reload_speed=1+E("reload_speed"),a[r].crit_boost=E("crit_boost"),a[r].power_boost=E("power_boost"),a[r].crit_chance=E("crit_chance"),a[r].headshot_multiplier=E("headshot_multiplier"),a[r].backstab_multiplier=E("backstab_multiplier"),a[r].has_power_boost=E("has_power_boost");for(var c=Object.keys(d),_=0,m=c.length;_<m;_++)a[r].multipliers[d[c[_]]]=1+E(c[_]);data.weapons[p].type;a[r].multipliers.power_melee=1+E("power_level_melee"),a[r].multipliers.power_ranged=1+E("power_level_ranged"),a[r].multipliers.damage_taken=1+E("damage_taken");for(var _=0,m=o.length+1;_<m;_++){var u=o[_]?o[_].property:e[r].property;for(var h,g=0,f=u.length;g<f;g++)h=u[g],d[h.name]?a[r].multipliers[d[h.name]]+=h.value:"attack_speed"===h.name?a[r].attack_speed+=h.value:"crit_boost"===h.name?a[r].crit_boost+=h.value:"crit_chance"===h.name&&(a[r].crit_chance+=h.value)}}return a},t.getWeaponIndex=function(e){var a=t.items,n=t.weapon,o=t.weapon_lookup;return 0<=o[e]?o[e]:(t.getMultipliers(),o[e])},t.refresh=function(){var e=t.weapon;t.getMultipliers();for(var a=0,n=verminted.update_on_build.length;a<n;a++)verminted.update_on_build[a]();for(var a=0;a<e.length;a++)e[a].name&&expandWeaponInfo(e[a].name,a,verminted.weapon_slot[a])};var L=function(){for(var e,n=0;n<a.length;n++)e=a[n],e.value===t.career.name?e.setAttribute("selected",!0):e.removeAttribute("selected",!1);w()};t.encode=function(e){var a={career:t.career,talents:p,items:t.items};if(!a.career||!a.career.name)e.classList.add("failed-copy");else{e.classList.remove("failed-copy");var n=_.encode(a),o="?"+n;e.textContent=o;var r=verminted.link+o,i=document.createElement("textarea");i.classList="hide",i.value=r,e.appendChild(i),i.focus(),i.select(),document.execCommand("copy"),e.removeChild(i);var s=document.createRange();s.selectNodeContents(e);var l=window.getSelection();l.removeAllRanges(),l.addRange(s),n!==t.build_code&&(history.pushState({build:{build_code:n}},"",o),t.build_code=n)}},t.decode=function(e){var a=verminted.compression.decode(e);N(a),t.build_code=e};var N=function(e){k(e.career,!0),v(e.items[0].weapon,0),v(e.items[1].weapon,1);for(var a=0;a<e.items.length;a++)C(e.items[a].properties[0],a,0),C(e.items[a].properties[1],a,1),t.items[a].trait.name=e.items[a].trait;for(var a=0;a<e.talents.length;a++){var n=a,o=e.talents[a];y(n,o)}L(),w(!0)},B=function(e,t){var a={},n={},o={},r=function(t){var a=n[t];if(!a.div){var o=document.createElement("label"),r=document.createElement("div");r.classList.add("buff");var i=n[t],s=TooltipControl(r);s.text(t+"\r\n"+a.buff[0].stat_buff+"\r\n"+a.buff[0].value);var l=document.createElement("div");l.classList.add("buff-name");for(var p,c=n[t].sources,d=c.length,_="",m=0;m<d;m++){p=c[m],_+=p.name,1<d&&m<d-1&&(_+=",");var u=document.createElement("p");u.textContent=_,l.appendChild(u)}var h=a.max_stacks,g=document.createElement("input");1===h?(g.type="checkbox",g.classList.add("buff-toggle"),r.addEventListener("click",function(){var e=g.checked;a.stacks=e?1:0})):1<h&&(g.type="number",g.max=h,g.min=0,g.classList.add("buff-input"),g.addEventListener("change",function(t){var e=t.target.valueAsNumber;a.stacks=0<e&&e<=h?e:0})),r.appendChild(l),r.appendChild(g),a.div=r,a.source_div=l,a.label=o,o.appendChild(r),e.appendChild(o)}else{a.source_div.innerHTML="";for(var c=n[t].sources,d=c.length,m=0;m<d;m++){var _="",p=c[m];_+=p.name,1<d&&m<d-1&&(_+=",");var u=document.createElement("p");u.textContent=_,a.source_div.appendChild(u)}}},s=function(t,a,i){var s=a.max_stacks;if(s){var l=i||a.name,p=data.localize[verminted.language][l]||t.replace(/_/g," ");if(!n[t]){var c=a.stat_buff,d=a.bonus||a.multiplier;n[t]={},n[t].sources=[],n[t].sources[0]={},n[t].sources[0].name=p,n[t].sources[0].name_id=l,n[t].source_lookup={},n[t].source_lookup[p]=!0,n[t].buff=[],n[t].buff[0]={},n[t].buff[0].stat_buff=c,n[t].buff[0].value=d,n[t].max_stacks=s,n[t].stacks=0,n[t].remove=function(){n[t].label&&(e.removeChild(n[t].label),delete n[t])},o[c]=o[c]||[];var _=o[c].length;o[c][_]=t}else if(!n[t].source_lookup[p]){var _=n[t].sources.length;n[t].sources[_]={},n[t].sources[_].name=p,n[t].sources[_].name_id=l,n[t].source_lookup[p]=!0}a.stat_buff&&(a.bonus||a.multiplier)&&r(t)}},l=function(){for(var e=Object.keys(n),t=0;t<e.length;t++)n[e[t]].sources=[],n[e[t]].source_lookup={}};return a.refresh=function(){l();for(var e=t.items,a=verminted.global_buffs,r=Object.keys(a),c=0;c<r.length;c++)s(r[c],a[r[c]]);if(t.career.name)for(var d=data.careers[t.career.name].passives,c=0;c<d.length;c++)s(d[c].name,d[c]);for(var c=0;c<p.length;c++)if(p[c]&&"number"==typeof p[c].name)for(var _,m=0;m<p[c].buffs.length;m++)_=p[c].buffs[m],s(_.name,_,p[c].name);for(var c=0;c<e.length;c++)if(e[c].trait.name){var u=data.item.traits[e[c].trait.name];s(e[c].trait.name,u,u.name)}for(var h={},g=Object.keys(n),c=0;c<g.length;c++){var f=g[c],_=n[f],b=_.sources;if(1>b.length)n[f].remove();else{var w=_.buff[0].stat_buff;h[w]=h[w]||[];var k=h[w].length;if(h[w][k]=f,"ranged_power_vs_armor_type"===w)for(var y,v=["power_vs_unarmoured","power_vs_armoured","power_vs_large","power_vs_frenzy"],c=0;c<v.length;c++){y=v[c],h[y]=o[y]||[];var C=h[y].length;h[y][C]=f}}}o=h},a.getModifier=function(e){var t=0;if(o[e])for(var a=0;a<o[e].length;a++){var r=o[e][a],s=n[r];0<s.stacks&&(t+=s.buff[0].value*s.stacks)}return t},a}(e.getElementsByClassName("buff-container")[0],t);return t.test=B,t.modal.setCloseCallback(t.refresh),h(),m(),u(),function(){for(var t=e.getElementsByClassName("talent-tree")[0],a=document.createDocumentFragment(),n=data.careers.dr_ranger.talent_tree.length,o=0;o<n;o++){l[o]=[];var i=document.createElement("div");i.classList.add("talent-row");for(var s,p=0;3>p;p++){s=document.createElement("div"),s.classList.add("talent"),s.classList.add("js-button"),l[o][p]={},l[o][p].div=s,i.appendChild(s);let e=p,t=o;s.addEventListener("mousedown",function(){y(t,e)})}a.appendChild(i)}t.appendChild(a)}(),function(){var e=document.getElementsByClassName("copy-build")[0];e.addEventListener("click",function(){t.encode(e)});var a=TooltipControl(e);a.text("Copies a url for this build containing\r\nselected career, items, and talents.\r\n\r\nOnly works with valid combinations.")}(),g(),B.refresh(),w(),t.getMultipliers(),verminted.refresh[verminted.refresh.length]=t.refresh,verminted.update_weapon_list[verminted.update_weapon_list.length]=b,verminted.do_not_open_build?window.setTimeout(function(){t.refresh()},100):t.modal.open(),t},WeaponListModal=function(){var t=ModalControl(document.getElementsByClassName("weapon-list-holder")[0]);return t.onClick=function(a){a.stopPropagation();for(var e=a.target,n=!0;e&&e.classList;){if(e.classList.contains("weapon-list-holder")){n=!1;break}else if(e.getAttribute("data-weapon")){var o=e.getAttribute("data-weapon");t.clickCallback(o),n=!0;break}else e.classList.contains("select-weapon")&&(n=!1);e=e.parentNode}n&&t.close()},t},TooltipControl=function(e){if(verminted.tooltips[uniqueID(e)])return verminted.tooltips[uniqueID(e)];var t={},a=null,n=verminted.tooltip,o=n.children[0],r="pre",i=null;return t.open=function(){var t=e.getBoundingClientRect();o.textContent=i,o.style.whiteSpace=r,n.style.display="inline-block",n.style.left=t.right+n.offsetWidth+2>window.innerWidth?window.innerWidth-(n.offsetWidth+2)+"px":t.right-0+"px",n.style.top=t.bottom+"px"},t.close=function(){n&&(n.style.display="none"),clearTimeout(a)},t.bind=function(){e.addEventListener("mouseover",t.startTimer),e.addEventListener("mouseout",t.close)},t.startTimer=function(){verminted.mobile=window.mobilecheck(),verminted.mobile||(a=setTimeout(function(){t.open()},400))},t.text=function(e,t){"generated"===t&&(r="normal"),i=e},t.bind(),verminted.tooltips[uniqueID(e)]=t},compareConsole=function(t){var i=Math.round;function e(e){for(var t,n=0;n<e.length;n++)if(t=e[n].split(","),c[t[0]]){var o=t[0],r=c[o];l[r]={};for(var s,p="infantry";n<e.length;){if(s=e[n].split(","),"infantry"===p&&""===s[2]){p="armored",n++;continue}else if("armored"===p&&""===s[2])break;var d=a(r,s[1]);"hevay attack 3"===s[1]&&(d="heavy_attack_right_up"),l[r][d]=l[r][d]||{},l[r][d][p]=l[r][d][p]||{},l[r][d][p].neither=l[r][d][p].neither||0,l[r][d][p].headshot=l[r][d][p].headshot||0,l[r][d][p].critical=l[r][d][p].critical||0,l[r][d][p].both=l[r][d][p].both||0,l[r][d][p].neither+=parseFloat(s[3]),l[r][d][p].headshot+=parseFloat(s[4]),l[r][d][p].critical+=parseFloat(s[5]),l[r][d][p].both+=parseFloat(s[6]),n++}}}function a(e,t){t=t.toLowerCase(0);var a,n=data.weapons[e].actions,o=function(e,t){for(var a="neutral",o=0;o<t;){for(var r=n[a].attack_speed,s=Object.keys(r).sort(),o=0;o<s.length;o++)if(0<=s[o].search(e)){if("heavy"===e&&0<=s[o].search("heavy_attack_charged"))continue;a=s[o]}o++}return a};if(0<=t.search("push"))a=n.push.push_attack;else if(0<=t.search("light")){var r=parseInt(t.charAt(t.search(/[0-9]/)),10);a=o("light",r)}else if(0<=t.search("charged")){var r=parseInt(t.charAt(t.search(/[0-9]/)),10)||1;a=o("heavy_attack_charged",r)}else if(0<=t.search("heavy")){var r=parseInt(t.charAt(t.search(/[0-9]/)),10)||1;a=o("heavy",r)}return a}function n(){for(var e,t=Object.keys(l),a=0;a<t.length;a++){e=t[a],p[e]={};for(var n=Object.keys(l[e]),s=0;s<n.length;s++){var c=n[s],_=data.weapons[e].actions[c];if(_){var m={},u=[];_.damage_profile_left?(u[0]=_.damage_profile_left,u[1]=_.damage_profile_right):u[0]=_.damage_profile_target||_.damage_profile;for(var h=0;h<u.length;h++)for(var g,f=u[h],b=verminted.damage.compileProfile(e,f,"raw"),w=0;w<d.length;w++)g=d[w],m[g]=m[g]||{},m[g].neither=m[g].neither||0,m[g].headshot=m[g].headshot||0,m[g].critical=m[g].critical||0,m[g].both=m[g].both||0,m[g].neither+=i(4*b[g].neither[0])/4,m[g].headshot+=i(4*b[g].headshot[0])/4,m[g].critical+=i(4*b[g].critical[0])/4,m[g].both+=i(4*b[g].both[0])/4;p[e][c]=m}}}r(o)}function o(e,t){var a=document.createElement("div");if(a.textContent=e,a.classList="js-button",0===t.length)a.classList.add("console-compare-weapon-passed");else{a.classList.add("console-compare-weapon-failed");var n=document.createElement("div");n.classList="console-compare-weapon-container hide";for(var o=0;o<t.length;o++){var r=t[o],s=document.createElement("div");s.textContent=r.action+" "+r.armor+" "+r.hit+" - estimate: "+r.estimate+" / actual: "+r.actual,n.appendChild(s)}a.appendChild(n),a.addEventListener("click",function(){n.classList.toggle("hide")})}return a}function r(e){for(var t=document.getElementById("SPA"),a=document.getElementsByClassName("console-compare"),n=0;n<a.length;n++)t.removeChild(a[n]);var o=document.createElement("div");o.classList="console-compare";for(var r=Object.keys(p),n=0;n<r.length;n++){for(var s,c=r[n],_=[],m=Object.keys(p[c]),u=0;u<m.length;u++){s=m[u];for(var h,g=0;g<d.length;g++){h=d[g];for(var f=0;f<constants.hit_types.length;f++){var b=constants.hit_types[f],w=p[c][s][h][b],k=l[c][s][h][b];if(k!==w){passed=!1;var v=_.length;_[v]={},_[v].estimate=w,_[v].actual=k,_[v].action=s,_[v].armor=h,_[v].hit=b}}}}o.appendChild(e(c,_))}var C=document.createElement("div");C.classList="console-compare-close-button js-button",C.textContent="Close",o.appendChild(C),t.appendChild(o),C.addEventListener("click",function(){document.getElementById("SPA").removeChild(o)})}verminted.platform=!0,verminted.difficulty="legend",verminted.power_level=785;var s=t.target.files[0],l={},p={},c={Axe:"1h_axe","Axe and Falchion":"axe_and_falchion",Falchion:"falchion",Flail:"flail",Rapier:"rapier","Two-handed Sword":"2h_sword",Crowbill:"crowbill",Dagger:"dagger","Fire Sword":"flame_sword",Mace:"mace",Sword:"1h_sword"},d=["infantry","armored"],_=new FileReader;_.onload=function(){e(_.result.split(/\r\n/g)),n()},_.readAsText(s)};function reverseLookup(e){if(data.weapons[e].lookup)return!1;var t={},a=data.weapons[e].actions,n=Object.keys(a),o={};o.lookup={},o.lookup["default"]=!0,o.current=0,o.buffer=[],o.buffer[0]="default",o.future=o.current+1;var r=function(s){t[s]={};for(var l,p=0,c=n.length;p<c;p++){if(l=a[n[p]],l.attack_speed&&l.attack_speed.parent)for(var d=Object.keys(l.attack_speed.parent),_=0,m=d.length;_<m;_++)o.lookup[d[_]]||(o.lookup[d[_]]=!0,o.buffer[o.future]=d[_],o.future++),s===d[_]&&(t[s][n[p]]=l.attack_speed.parent[d[_]]);if(l.attack_speed.child)for(var u=Object.keys(l.attack_speed.child),_=0,m=u.length;_<m;_++)o.lookup[u[_]]||(o.lookup[u[_]]=!0,o.buffer[o.future]=u[_],o.future++)}o.current++,o.buffer[o.current]?(s=o.buffer[o.current],r(s)):data.weapons[e].block&&(t.block=t.block||{},t.block.push=data.weapons[e].block.min_hold,data.weapons[e].push&&(t.push=t.push||{}),t.block_cancel_end&&delete t.block_cancel_end,t.anim_cancel&&delete t.anim_cancel)};return r(o.buffer[0]),data.weapons[e].lookup=t,!0}function expandWeaponInfo(e,t,a){var n=Math.round,o=constants.hit_types,r=constants.armor_types,s=(""+verminted.platform+t+concateObject(verminted.build.weapon[t])).hashCode(),l=a.getAttribute("data-hash");if(s!==l){a.setAttribute("data-hash",s);var p={neither:"normal",headshot:"headshot",critical:"critical",both:"both"},c=a;c.getElementsByClassName("weapon-title")[0].textContent=e;var d=data.weapons[e],_=Object.keys(d.actions).sort(),m=c.getElementsByClassName("attack"),u=verminted.damage,h=-1;"ranged"===data.weapons[e].type&&(h=0);for(var g=0,f=m.length;g<void 0;g++)if(g<_.length){var b=d.actions[_[g]].attack_speed,w=m[g].getElementsByClassName("attack-modifiers")[0];if(m[g].getElementsByClassName("weapon-attack-name")[0].textContent=_[g],w.textContent="",b){for(var k,v=m[g].getElementsByClassName("svg-attack-speed")[0],C=v.getElementsByTagName("use")[0],E=TooltipControl(C),L="Chain to:",N=Object.keys(b).sort().reverse(),B=0,A=N.length;B<A;B++)k=b[N[B]],k=n(100*k)/100,L+="\r\n"+k+"\t"+N[B];E.text(L)}var P={},z=m[g].getElementsByClassName("damage-table")[0];d.actions[_[g]].damage_profile?P[0]=d.actions[_[g]].damage_profile:(P[0]=d.actions[_[g]].damage_profile_left,P[1]=d.actions[_[g]].damage_profile_right);for(var D=0;6>D;D++){3==D&&(D=4);var T=D,I=D;5==D&&(T=1,I=5);for(var M=0;4>M;M++){var F,j;F=1==M||3==M?"headshot":null,j=!!(1<M);for(var S,q=!1,R=[],W=null,V=z.getElementsByClassName(constants.armor_types[D]+" "+constants.hit_types[M])[0],H=TooltipControl(V),O=0;5>O;O++){S=0;for(var U=0,Q=Object.keys(P).length;U<Q;U++){if(data.profiles[P[U]]){var y=u.getDamage(e,P[U],t,r[D],o[M],O);S+=n(4*y)/4}R[O]=S}var K;!0===q||0<O&&R[O]>R[O-1]?(K=0,q=!0):0<R[O]%1?K=R[O].toFixed(2):K=R[O],0==O&&(V.textContent=R[0],W=constants.armor_types[D]+" - "+p[constants.hit_types[M]],W+="\r\nTargets:"),0<K&&(W+="\r\n  "+(O+1)+": "+K)}H.text(W)}}m[g].classList.remove("hide")}else m[g].classList.add("hide")}}function assembleDiv(e,t,a,n){var o=n?document.createElement(n):document.createElement("div");return o.classList=e,a&&(o.textContent=a),t.appendChild(o),o}function assembleWeaponSheet(){var e={};e.table=document.createElement("div"),e.table.id="weapon-data",e.table.classList="hide",e.attack={};for(var t,a=0;16>a;a++){t=assembleDiv("attack-container",e.table),e.attack[a]=assembleDiv("attack-type",t).textContent;var n=assembleDiv("damage-table",t);e.damage={};for(var o=0;5>o;o++){e.damage[constants.armor_types[o]]={};for(var r,i=0;4>i;i++)r=assembleDiv(constants.armor_types[o]+" "+constants.hit_types[i],n).textContent,e.damage[constants.armor_types[o]][constants.hit_types[i]]=r}}return e}function assembleWeapon(e,t,a,n,o){var r=o.weapons[t[n]],i="weapon-name";"ranged"===r.type&&(i="weapon-name weapon-ranged");var s=assembleDiv(i+" weapon-holder",e,t[n]);if(s.setAttribute("data-weapon",t[n]),r.career){for(var l,p=Object.keys(r.career),a=constants.characters,c={},d=!1,_=0,m=p.length;_<m;_++)l=a[p[_]],l&&!c[l]&&(d?d+=","+l:d=l,c[l]=!0);s.setAttribute("data-character",d)}return s}function populateElements(){for(var e=document.createDocumentFragment(),t=document.getElementsByClassName("weapon-list")[0],a=Object.keys(data.weapons).sort(),n=constants.characters,o=document.getElementsByClassName("attack")[0],r=0;2>r;r++)for(var s,l="[data-weapon-slot='"+r+"']",p=document.querySelector(l).getElementsByClassName("attacks-container")[0],c=0;c<9+r;c++)s=o.cloneNode(!0),p.appendChild(s)}function populateAttackCombo(){var e={},t=Object.keys(constants.mob_lookup),a=constants.hit_types,n=constants.armor_types,o=verminted.max_targets,r=function(e,t){var n={},r=document.createElement("div"),i=document.createElement("div");i.classList.add("mob-name"),i.textContent=e,n.mob_name=i,r.appendChild(i),n.targets=[];for(var s,l=0;l<o;l++){s=document.createElement("div"),s.classList.add("breakpoint-row"),n.targets[l]={},n.targets[l].row=s,n.targets[l].callback=void 0,s.addEventListener("click",function(){"function"==typeof n.targets[l].callback&&n.targets[l].callback()});for(var p=0;p<a.length;p++){var c=a[p],d=document.createElement("div");d.classList.add(c),n.targets[l][c]=d,s.appendChild(d)}r.appendChild(s)}var _=document.createElement("div");_.classList.add("extra-target-row"),_.classList.add("hide"),n.extra_targets=_,r.appendChild(_),n.container=r;var m=verminted.callback_on_data.length;return verminted.callback_on_data[m]=function(){var o,i=data.breeds,s=data.breeds[e],l=s.primary_armor||s.armor;o=s.hitzone_primary_armor?s.hitzone_primary_armor.head:s.hitzone_armor?s.hitzone_armor.head:l;for(var p=0;p<n.targets.length;p++){n.targets[p].row;for(var c=0;c<a.length;c++){var d,_=a[c],m=n.targets[p][_];d="headshot"===_||"both"===_?o:l,m.classList.add(d)}}t.appendChild(r)},n};e.weapon=[];for(var s,l=document.getElementsByClassName("weapon-breakpoints-container"),p=0;p<l.length;p++){s=l[p].getElementsByClassName("weapon-breakpoints")[0],e.weapon[p]={},e.weapon[p].container=s,e.weapon[p].name_div=l[p].getElementsByClassName("weapon-name")[0];var c=document.createElement("div");c.classList.add("breakpoint-plate");for(var d,_={},m=0,u=t.length;m<u;m++)d=r(t[m],c),_[t[m]]=d;e.weapon[p].breeds=_;var h=l[p].getElementsByClassName("weapon-breakpoints-attacks")[0],g=!0;e.weapon[p].name_div.addEventListener("click",function(){g=!g,g?(h.classList.remove("hide"),c.classList.remove("hide")):(h.classList.add("hide"),c.classList.add("hide"))}),s.appendChild(c)}e.combo={},e.combo.container=document.getElementsByClassName("attack-combo")[0],e.combo.info={},e.combo.info.container=document.createElement("div"),e.combo.info.container.classList.add("combo-info"),e.combo.info.container.classList.add("hide"),e.combo.info.attack_speed=document.createElement("div"),e.combo.info.damage_box={},e.combo.info.damage_box.container=document.createElement("div"),e.combo.info.damage_box.dps={},e.combo.info.damage_box.container.classList.add("combo-damage-box"),e.combo.info.container.appendChild(e.combo.info.attack_speed),e.combo.info.container.appendChild(e.combo.info.damage_box.container),e.combo.breeds={};var c=document.createElement("div");c.classList.add("breakpoint-plate"),c.classList.add("hide");for(var d,_={},m=0,u=t.length;m<u;m++)d=r(t[m],c),_[t[m]]=d;return e.combo.breeds=_,e.combo.container.appendChild(e.combo.info.container),e.combo.container.appendChild(c),e}var VermBigInt=function(){var e=Math.ceil,t=Math.floor,a={},n=1e5;a.printraw=function(e){for(var t,a="",n=0;n<e.length;n++){for(t=""+e[n];5>t.length&&n<e.length-1;)t="0"+t;a=t+a}console.log(a)};var o=function(e,t){var a,o,r=[];e.length>t.length?(a=e,o=t):(o=e,a=t);for(var s,l=0,p=0;p<a.length||0<l;p++)s=(a[p]||0)+(o[p]||0)+l,s>=n?(l=1,s-=l*n,r[p]=s):(l=0,r[p]=s);return r},r=function(e,t){var a,o,r=[];e.length>=t.length?(a=e,o=t):(o=e,a=t);for(var s,l=0,p=0;p<a.length;p++)s=(e[p]||0)-((t[p]||0)+l),0>s?"number"==typeof e[p+1]&&(l=1,s+=n,r[p]=s):0<s?(l=0,r[p]=s):e[p+1]?(l=0,r[p]=0):l=0;return r},i=function(e,t){if(e.length>t.length)return!0;if(e.length===t.length){for(var a=0;a<e.length;a++){var n=e.length-1-a,o=e[n],r=t[n];if(o>r)return!0;if(o<r)return!1}return!0}return!1},s=function(e,a){for(var o=[0],r=0,s=0,l=0;l<e.length;l++){var p=e.length-1-l,c=e[p],d=c/a,_=r;if(s=d%1+_%1,r=s*n,r>n){var m=t(r/n);r-=m*n,s-=m,_+=m}var u=d-d%1+(_-_%1);0<u&&(o[p]=u)}return[o,s]};return a.biNew=function(e){var a=t(e),o=[],r=function(e,a,o){for(;;)if(a>=n){var i=t(a/n),s=r(e,i,o+1);a-=s*n}else{return e[o]=a,a}};return r(o,a,0),o},a.add=function(e,t){var a=o(e,t);return a},a.sub=function(e,t){var a=r(e,t);return a},a.mul=function(e,t){for(var a=e,n=1;n<t;n++)a=o(a,e);return(0===a.length||0===t)&&(a=[],a[0]=0),a},a.div=function(t,a){var n=0,o=t;if("object"==typeof a)for(;i(o,a)&&30>n;)o=r(o,a),n++;else{var l=s(t,a);o=l[0],n=e(l[1]*a)%a}return[o,n]},a},BigInt=BigInt;function VermintedCompress(){var e={},t={career:15,talent1:3,talent2:3,talent3:3,talent4:3,talent5:3,talent6:3,wep1:10,wep2:8,wep1props:27,wep2props:27,neckprops:20,charmprops:25,trinketprops:21,wep1traits:7,wep2traits:7,necktraits:5,charmtraits:5,trinkettraits:3},a=["career","talent1","talent2","talent3","talent4","talent5","talent6","wep1","wep2","wep1props","wep2props","neckprops","charmprops","trinketprops","wep1traits","wep2traits","necktraits","charmtraits","trinkettraits"],n=VermBigInt();"undefined"==typeof BigInt?(e.big_int=!1,BigInt=function(e){return e}):e.big_int=!0;var o={_Rixits:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_",toNumber:function(t){var a=0;t=t.split("");for(var n=0;n<t.length;n++)a=64*a+this._Rixits.indexOf(t[n]);return a},fromBigInt:function(e){for(var t,a="",n=e;t=+(n%BigInt(64)),a=this._Rixits.charAt(t)+a,n/=BigInt(64),n!=BigInt(0););return a},fromVBI:function(e){for(var t,a,o="",r=0,i=e;a=n.div(i,64),t=a[1],o=this._Rixits.charAt(t)+o,i=a[0],!(1===i.length&&0===i[0]||0===i.length||15<r);)r++;return o},toBigInt:function(t){var a=BigInt(0);t=t.split("");for(var n=0;n<t.length;n++)a=a*BigInt(64)+BigInt(this._Rixits.indexOf(t[n]));return a},toVBI:function(t){var a=[0];t=t.split("");for(var o=0;o<t.length;o++)a=n.add(n.mul(a,64),[this._Rixits.indexOf(t[o])]);return a}},r=function(r){var s="";if(e.big_int){for(var l=BigInt(1),p=BigInt(0),c=0;c<a.length;c++)p+=l*BigInt(r[c]),l*=BigInt(t[a[c]]);s=o.fromBigInt(p);for(var d=s.length,c=0;c<10-d;c++)s="0"+s}else{for(var _,l=[1],p=[0],c=0;c<a.length;c++){_=n.mul(l,r[c]),p=n.add(p,_);var m=n.mul(l,t[a[c]]);l=m}s=o.fromVBI(p);for(var d=s.length,c=0;c<10-d;c++)s="0"+s}return s},s=function(r){var s=Array(a.length);if(e.big_int){for(var l=Number,p=o.toBigInt(r),c=BigInt(1),d=0;d<a.length;d++)c*=BigInt(t[a[d]]);for(var _,d=0;d<a.length;d++){_=a.length-1-d,c/=BigInt(t[a[_]]);var m=p/c%BigInt(t[a[_]]);s[_]=l(m),p%=c}}else{for(var p=o.toVBI(r),c=[[1]],u=[1],d=0;d<a.length;d++)u=n.mul(u,t[a[d]]),c[d+1]=u;for(var _,d=0;d<a.length;d++){_=a.length-1-d,p=n.div(p,c[_]);var m=p[1];s[_]=m,p=p[0]}}return s};return e.encode=function(e){for(var t=vermintedLookup(63),a=e.career.name,n=[],o=[],s=[],l=0;l<e.items.length;l++)o[l]=e.items[l].type,s[l]="dr_slayer"===a&&"throwing_axes"===e.items[l].name?"melee":o[l];n[0]=t.careers[a],n[1]=e.talents[0].col,n[2]=e.talents[1].col,n[3]=e.talents[2].col,n[4]=e.talents[3].col,n[5]=e.talents[4].col,n[6]=e.talents[5].col,n[7]=t.weapons[a][s[0]][e.items[0].name],n[8]=t.weapons[a][s[1]][e.items[1].name],n[9]=t.properties[o[0]][e.items[0].property[0].name][e.items[0].property[1].name],n[10]=t.properties[o[1]][e.items[1].property[0].name][e.items[1].property[1].name],n[11]=t.properties[o[2]][e.items[2].property[0].name][e.items[2].property[1].name],n[12]=t.properties[o[3]][e.items[3].property[0].name][e.items[3].property[1].name],n[13]=t.properties[o[4]][e.items[4].property[0].name][e.items[4].property[1].name],n[14]=t.traits[e.items[0].trait_type][e.items[0].trait.name],n[15]=t.traits[e.items[1].trait_type][e.items[1].trait.name],n[16]=t.traits[e.items[2].trait_type][e.items[2].trait.name],n[17]=t.traits[e.items[3].trait_type][e.items[3].trait.name],n[18]=t.traits[e.items[4].trait_type][e.items[4].trait.name];var p=r(n);return p},e.decode=function(e){for(var t=vermintedLookup(63),a=t.index,n=0;n<e.length;n++)e.charAt(n);var o=s(e),r={};r.talents=[],r.items=[];for(var l=a.careers[o[0]],p=[],c=[],d=data.careers[l].equipment,n=0;n<d.length;n++)c[n]=d[n],r.items[n]={};var _=a.weapons[l][c[0]].length;p[0]=a.weapons[l][c[0]][o[7]%_],_=a.weapons[l][c[1]].length,p[1]=a.weapons[l][c[1]][o[8]%_];for(var m=[],n=0;n<d.length;n++)m[n]=data.weapons[p[n]]?data.weapons[p[n]].traits:c[n];r.career=l,r.talents[0]=o[1],r.talents[1]=o[2],r.talents[2]=o[3],r.talents[3]=o[4],r.talents[4]=o[5],r.talents[5]=o[6],r.items[0].weapon=p[0],r.items[1].weapon=p[1];for(var u=9,n=0;5>n;n++){var h=n+u,g=a.properties[c[n]].length,f=c[n];"dr_slayer"===l&&"throwing_axes"===p[n]&&(f="ranged"),r.items[n].properties=a.properties[f][o[h]%g]}u=14;for(var n=0;5>n;n++){var h=n+u,b=a.traits[m[n]].length;r.items[n].trait=a.traits[m[n]][o[h]%b]}return r},e}function vermintedLookup(e){var t={},a={},n=Object.keys(data.careers).sort(),o=Object.keys(data.weapons).sort(),r=Object.keys(data.item.property_combos),s=Object.keys(data.item.trait_combos);t.careers={},a.careers=[];for(var l=0;l<n.length;l++)t.careers[n[l]]=l,a.careers[l]=n[l];t.weapons={},a.weapons={};for(var p,l=0;l<o.length;l++){if(p=data.weapons[o[l]].type,1>e)var c=Object.keys(data.weapons[o[l]].career);else var c=Object.keys(data.weapons[o[l]].career).sort();for(var d=0;d<c.length;d++){var _=c[d],m=p;"dr_slayer"===_&&"throwing_axes"===o[l]&&(m="melee"),t.weapons[_]=t.weapons[_]||{},a.weapons[_]=a.weapons[_]||{},t.weapons[_][m]=t.weapons[_][m]||{},a.weapons[_][m]=a.weapons[_][m]||[];var u=Object.keys(t.weapons[_][m]).length;t.weapons[_][m][o[l]]=u,a.weapons[_][m][u]=o[l]}}t.properties={},a.properties={};for(var h,l=0;l<r.length;l++){h=r[l],t.properties[h]={},a.properties[h]=[];for(var g=data.item.property_combos[r[l]],d=0;d<g.length;d++)t.properties[h][g[d][0]]=t.properties[h][g[d][0]]||{},t.properties[h][g[d][0]][g[d][1]]=d,t.properties[h][g[d][1]]=t.properties[h][g[d][1]]||{},t.properties[h][g[d][1]][g[d][0]]=d,a.properties[h][d]=[g[d][0],g[d][1]]}t.traits={},a.traits={};for(var l=0;l<s.length;l++){t.traits[s[l]]={},a.traits[s[l]]=[];var f=data.item.trait_combos[s[l]].sort();1>e&&(f=data.item.trait_combos[s[l]]);for(var d=0;d<f.length;d++)t.traits[s[l]][f[d]]=d,a.traits[s[l]][d]=f[d]}return t.index=a,t}function VermintedStorage(){var e,t={};return t.init=function(){e=JSON.parse(localStorage.getItem("vermintools")),e||(e={},e.builds=[])},t.get=function(){return e},t}function prepPage(){constants=InitConstants();var e=document.getElementsByClassName("default-language")[0];e.textContent=verminted.language;for(var t=document.getElementsByClassName("input-power-level"),a=0;a<t.length;a++)t.textContent=verminted.power_level-235;for(var n,o=document.getElementsByClassName("appended-link"),a=0;a<o.length;a++)n=o[a].href.split("?")[1],o[a].href=window.location.search+"?"+n;for(var r=document.getElementsByClassName("select-difficulty")[0],s=document.createDocumentFragment(),l=Object.keys(constants.difficulties),a=0;a<l.length;a++){var p=l[a],c=document.createElement("option");c.textContent=p,c.value=p,p===verminted.difficulty&&c.setAttribute("selected",!0),s.appendChild(c)}r.appendChild(s),r.addEventListener("change",verminted.set_difficulty),verminted.callback_on_data=[],verminted.update_weapon_list=[],verminted.update_weapon=[],verminted.update_on_build=[],verminted.tooltip=document.getElementsByClassName("tooltip")[0],verminted.tooltips={},verminted.weapon_buttons={},verminted.weapon_slot={};for(var d=document.getElementsByClassName("select-page"),a=0,_=d.length;a<_;a++)d[a].addEventListener("click",function(t){pageSelection(t.target)});for(var m=document.getElementsByClassName("build-button"),a=0,u=m.length;a<u;a++)m[a].addEventListener("click",function(t){verminted.build.modal.open(),t.stopPropagation()});for(var h=document.getElementsByClassName("toggle-hbfs"),a=0;a<h.length;a++){h[a].addEventListener("change",verminted.set_harder_better);var g=TooltipControl(h[a]);g.text("Harder, Better, Faster, Stronger\r\ndoubles elites' hp")}var f=document.getElementsByClassName("select-headshot-percent")[0];f.addEventListener("change",function(t){var e=t.target.valueAsNumber;e=100<e?100:0<e?e:0,f.value=e,verminted.combo_breakpoints.headshot_chance=e/100,verminted.build.refresh()});var b=TooltipControl(f);b.text("Percentage of hits that\r\nare headshots for DPS");for(var w=document.getElementsByClassName("resource-title"),a=0;a<w.length;a++){var k=w[a],y=function(){for(var e,t=k.parentNode,a=k.parentNode.parentNode.children,n=0;n<a.length;n++)e=a[n],e!==t&&e.classList.toggle("hide")};y(),k.addEventListener("click",y)}var x=populateAttackCombo();verminted.combo_breakpoint_table=x.combo,verminted.weapon_breakpoint_table=[],verminted.weapon_breakpoint_table[0]=x.weapon[0],verminted.weapon_breakpoint_table[1]=x.weapon[1],verminted.weapon_attack_breakpoints=[];for(var a=0;a<verminted.weapon_breakpoint_table.length;a++)verminted.weapon_attack_breakpoints[a]=AttackBreakpoints(verminted.weapon_breakpoint_table[a],a);verminted.combo_breakpoints=ComboBreakpoints(verminted.combo_breakpoint_table),waitForData()}function waitForData(){verminted.finished_loading?finishPage():setTimeout(waitForData,5)}function finishPage(){var e=document.getElementById("build");e.textContent=data.vermintide+" "+e.textContent;for(var t=0;t<verminted.callback_on_data.length;t++)verminted.callback_on_data[t]();var a=document.getElementsByClassName("select-language")[0],o=Object.keys(data.localize).sort();for(let e=0;e<o.length;e++){var r=o[e],s=document.createElement("option");s.textContent=r,r===verminted.language&&s.setAttribute("selected",!0),a.addEventListener("change",function(t){verminted.set_language(t)}),a.appendChild(s)}verminted.compression=VermintedCompress();var l=window.location.search;if(l)for(var c=l.split("?"),t=0;t<c.length;t++){var d,_=c[t];"shadeult"===_?(verminted.temp_shade_ult=!0,pageSelection(document.getElementsByClassName("select-page")[1])):"compareconsole"===_?(document.getElementsByClassName("select-file")[0].addEventListener("change",compareConsole),document.getElementsByClassName("select-file")[0].classList.remove("hide")):"dontopenbuild"===_?verminted.do_not_open_build=!0:10===_.length&&(d=c[t])}verminted.global_buffs={witch_hunter_captain_ultimate:{name:"witch_hunter_captain_ultimate",stat_buff:"crit_chance",max_stacks:1,bonus:.25},markus_mercenary_passive:data.careers.es_mercenary.passives[0],markus_huntsman_passive_crit_aura:data.careers.es_huntsman.passives[3],trinket_grenade_damage_taken:data.item.traits.trinket_grenade_damage_taken,defence_debuff_enemies:data.careers.dr_slayer.talent_tree[1][2].buffs[0],strength_potion:{name:"strength_potion",stat_buff:"has_power_boost",max_stacks:1,multiplier:1},speed_potion:{name:"speed_potion",stat_buff:"attack_speed",max_stacks:1,multiplier:.5}};for(var m=Object.keys(data.globals),u=0,h=m.length;u<h;u++)constants[m[u]]=data.globals[m[u]];for(var g=document.getElementsByClassName("input-power-level"),t=0;t<g.length;t++)g[t].value=verminted.power_level-constants.starting_power_level,g[t].addEventListener("change",verminted.set_power_level);populateElements(),verminted.weapon_list=WeaponListModal(),verminted.damage=WeaponDamage(),verminted.attack_chain=AttackChain(document.getElementsByClassName("chain-attack-container")[0]),verminted.build=BuildBuild();for(var f=document.getElementsByClassName("select-weapon"),t=0,b=f.length;t<b;t++){var w=uniqueID(f[t]),k=verminted.tooltips[w];verminted.weapon_buttons[w]=WeaponSelection(f[t]),verminted.weapon_slot[t]=document.getElementsByClassName("weapon-attacks")[t],verminted.tooltips[w]=TooltipControl(f[t]),verminted.tooltips[w].text("Weapon "+(t+1))}verminted.update_weapon[verminted.update_weapon.length]=expandWeaponInfo,d&&verminted.build.decode(d);for(var y,v=["skaven_slave","skaven_clan_rat","chaos_fanatic","chaos_marauder","beastmen_gor","beastmen_ungor_archer","skaven_plague_monk","chaos_berzerker","skaven_storm_vermin","beastmen_bestigor","chaos_raider","chaos_warrior","chaos_vortex_sorcerer","chaos_corruptor_sorcerer","skaven_poison_wind_globadier","skaven_gutter_runner","skaven_warpfire_thrower","skaven_ratling_gunner","skaven_pack_master","beastmen_standard_bearer","skaven_rat_ogre","skaven_stormfiend","chaos_spawn","chaos_troll","chaos_exalted_champion_warcamp","skaven_storm_vermin_warlord","chaos_exalted_sorcerer","chaos_exalted_champion_norsca","chaos_spawn_exalted_champion_norsca","skaven_stormfiend_boss","skaven_grey_seer"],C=["recruit","veteran","champion","legend","cataclysm","cataclysm_2","cataclysm_3"],E=document.getElementsByClassName("mob-hp-list")[0],t=0;t<v.length;t++){y=document.createElement("p"),y.style.display="inline-block",y.style.whiteSpace="pre-wrap";for(var L="",N=data.breeds[v[t]],B=0;B<C.length;B++)if("number"==typeof N.max_health[C[B]]){var A=N.max_health[C[B]].toString(),P=A.replace(".","").length,z="";z+=A+"&#09;",4>P&&(z+="&#09;"),L+=z}y.innerHTML=L,y.textContent+=" // "+v[t],E.appendChild(y)}}window.onpopstate=function(e){var t=e.state,a=t.build.build_code;a&&verminted.build.decode(t.build.build_code)},"undefined"==typeof document.getElementsByClassName&&(document.getElementsByClassName=function(e){var t="."+e.replace(/ /g,".");return document.querySelectorAll(t)});